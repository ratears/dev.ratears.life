<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ratears&#39;s blog</title>
  
  <subtitle>ratears&#39;s blog</subtitle>
  <link href="https://ratears.github.io/dev.ratears.life/atom.xml" rel="self"/>
  
  <link href="https://ratears.github.io/dev.ratears.life/"/>
  <updated>2023-10-31T17:31:15.962Z</updated>
  <id>https://ratears.github.io/dev.ratears.life/</id>
  
  <author>
    <name>ratears</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>《RabbitMQ精讲，提升工程实践能力，培养架构思维》Study Notes</title>
    <link href="https://ratears.github.io/dev.ratears.life/2023/%E3%80%8ARabbitMQ%E7%B2%BE%E8%AE%B2%EF%BC%8C%E6%8F%90%E5%8D%87%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5%E8%83%BD%E5%8A%9B%EF%BC%8C%E5%9F%B9%E5%85%BB%E6%9E%B6%E6%9E%84%E6%80%9D%E7%BB%B4%E3%80%8BStudy-Notes/"/>
    <id>https://ratears.github.io/dev.ratears.life/2023/%E3%80%8ARabbitMQ%E7%B2%BE%E8%AE%B2%EF%BC%8C%E6%8F%90%E5%8D%87%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5%E8%83%BD%E5%8A%9B%EF%BC%8C%E5%9F%B9%E5%85%BB%E6%9E%B6%E6%9E%84%E6%80%9D%E7%BB%B4%E3%80%8BStudy-Notes/</id>
    <published>2023-10-31T17:31:15.962Z</published>
    <updated>2023-10-31T17:31:15.962Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>《零基础入门 详解企业主流数据库MySQL8.0》Study Notes</title>
    <link href="https://ratears.github.io/dev.ratears.life/2023/%E3%80%8A%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8-%E8%AF%A6%E8%A7%A3%E4%BC%81%E4%B8%9A%E4%B8%BB%E6%B5%81%E6%95%B0%E6%8D%AE%E5%BA%93MySQL8-0%E3%80%8BStudy-Notes/"/>
    <id>https://ratears.github.io/dev.ratears.life/2023/%E3%80%8A%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8-%E8%AF%A6%E8%A7%A3%E4%BC%81%E4%B8%9A%E4%B8%BB%E6%B5%81%E6%95%B0%E6%8D%AE%E5%BA%93MySQL8-0%E3%80%8BStudy-Notes/</id>
    <published>2023-10-28T21:48:10.607Z</published>
    <updated>2023-10-28T21:48:10.607Z</updated>
    
    <content type="html"><![CDATA[<br><h1 id="第1章-开篇引导"><a href="#第1章-开篇引导" class="headerlink" title="第1章 开篇引导"></a>第1章 开篇引导</h1><ul><li>用SQL解决企业中存在的真实业务痛点问题；</li><li>用SQL优化彰显你的个人价值</li></ul><br><br><br><h1 id="第2章-【上帝视角】技术选型之数据库选型"><a href="#第2章-【上帝视角】技术选型之数据库选型" class="headerlink" title="第2章 【上帝视角】技术选型之数据库选型"></a>第2章 【上帝视角】技术选型之数据库选型</h1><h2 id="SQL（关系型数据库）"><a href="#SQL（关系型数据库）" class="headerlink" title="SQL（关系型数据库）"></a>SQL（关系型数据库）</h2><ul><li><strong>常见的关系型数据库：</strong>MysQL、Oracle、SQLServer、PostGreSQL</li><li><strong>关系型数据库的特点：</strong><ul><li>数据结构化存储在二维表中</li><li>支持事务的原子性A,一致性C,隔离性I,持久性D 特性</li><li>支持使用SQL语言对存储在其中的数据进行操作</li></ul></li><li><strong>关系数据库的适用场景：</strong><ul><li>数据之间存在着一定关系，需要关联查询数据的场景</li><li>需要事务支持的业务场景</li><li>需要使用SQL语言灵活操作数据的场景</li></ul></li></ul><br><br><h2 id="NoSQL（非关系型数据库概述）"><a href="#NoSQL（非关系型数据库概述）" class="headerlink" title="NoSQL（非关系型数据库概述）"></a>NoSQL（非关系型数据库概述）</h2><ul><li><p><strong>常见的非关系型数据库：</strong>HBase、MongoDB、Redis、Hadoop</p></li><li><p><strong>非关系数据库的特点</strong></p><ul><li>存储结构灵活，没有固定的结构（在不考虑数据压缩的情况下，可能会占用更多的存储空间，因为存储了列名）</li><li>对事务的支持比较弱，但对数据的并发处理性能高</li><li>大多不使用SQL语言操作数据</li></ul></li><li><p><strong>非关系数据库的适用场景</strong></p><ul><li>数据结构不固定的场景</li><li>对事务要求不高，但读写并发比较大的场景</li><li>对数据的处理操作比较简单的场景</li></ul></li></ul><br><br><h2 id="关系数据库选型原则"><a href="#关系数据库选型原则" class="headerlink" title="关系数据库选型原则"></a>关系数据库选型原则</h2><ul><li><strong>数据库使用的广泛性</strong><ul><li>MySQL在数据库使用排行榜中名列前茅</li></ul></li><li><strong>数据库的可扩展性</strong><ul><li>支持基于二进制日志的逻辑复制</li><li>存在多种第三方数据库中间层，支持读写分离及分库分表</li></ul></li><li><strong>数据库的安全性和稳定性</strong><ul><li>MySQL主从复制集群可达到99%的可用性</li><li>配合主从复制高可用架构可以达到99.99%的可用性</li><li>支持对存储在MySQL的数据进行分级安全控制</li></ul></li><li><strong>数据库所支持的系统</strong><ul><li>支持Liunx系统</li><li>支持Windows系统</li></ul></li><li><strong>数据库的使用成本</strong><ul><li>社区版本免费</li><li>使用人员众多，可以方便的获取技术支持</li></ul></li></ul><br><br><h2 id="构建MySQL开发环境"><a href="#构建MySQL开发环境" class="headerlink" title="构建MySQL开发环境"></a>构建MySQL开发环境</h2><p>（0）环境准备：CentOS7</p><p>（1）MySQL下载、解压、创建软连接</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/src/</span><br><span class="line"></span><br><span class="line">wget https://downloads.mysql.com/archives/get/p/23/file/mysql-8.0.15-linux-glibc2.12-x86_64.tar.xz</span><br><span class="line"></span><br><span class="line">xz -d mysql-8.0.15-linux-glibc2.12-x86_64.tar.xz</span><br><span class="line"></span><br><span class="line">tar xf mysql-8.0.15-linux-glibc2.12-x86_64.tar</span><br><span class="line"></span><br><span class="line">mv /usr/local/src/mysql-8.0.15-linux-glibc2.12-x86_64 /usr/local/</span><br><span class="line"></span><br><span class="line">cd /usr/local/</span><br><span class="line"></span><br><span class="line">ln -s mysql-8.0.15-linux-glibc2.12-x86_64/ mysql</span><br></pre></td></tr></table></figure><p>（2）创建mysql专属用户（用于启动管理mysql），配置mysql的环境变量</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adduser mysql</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">配置mysql的环境变量</span></span><br><span class="line">vim /etc/profile</span><br><span class="line"></span><br><span class="line">export PATH=$JAVA_HOME/bin:/usr/local/mysql/bin:$PATH</span><br><span class="line"></span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>（3）配置mysql的配置文件my.cnf，创建数据目录并修改权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">port            = 3306</span><br><span class="line">socket          = /usr/local/mysql/data/mysql.sock</span><br><span class="line">[mysqld]</span><br><span class="line"># Skip #</span><br><span class="line">skip_name_resolve              = 1</span><br><span class="line">skip_external_locking          = 1 </span><br><span class="line">skip_symbolic_links     = 1</span><br><span class="line"># GENERAL #</span><br><span class="line">user = mysql</span><br><span class="line">default_storage_engine = InnoDB</span><br><span class="line">character-set-server = utf8</span><br><span class="line">socket  = /usr/local/mysql/data/mysql.sock</span><br><span class="line">pid_file = /usr/local/mysql/data/mysqld.pid</span><br><span class="line">basedir = /usr/local/mysql</span><br><span class="line">port = 3306</span><br><span class="line">bind-address = 0.0.0.0</span><br><span class="line">explicit_defaults_for_timestamp = off</span><br><span class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br><span class="line">#read_only=on</span><br><span class="line"># MyISAM #</span><br><span class="line">key_buffer_size                = 32M</span><br><span class="line">#myisam_recover                 = FORCE,BACKUP</span><br><span class="line"></span><br><span class="line"># undo log #</span><br><span class="line">innodb_undo_directory = /usr/local/mysql/undo</span><br><span class="line">innodb_undo_tablespaces = 8</span><br><span class="line"></span><br><span class="line"># SAFETY #</span><br><span class="line">max_allowed_packet             = 100M</span><br><span class="line">max_connect_errors             = 1000000</span><br><span class="line">sysdate_is_now                 = 1</span><br><span class="line">#innodb = FORCE</span><br><span class="line">#innodb_strict_mode = 1</span><br><span class="line">secure-file-priv=&#x27;/tmp&#x27;</span><br><span class="line">default_authentication_plugin=&#x27;mysql_native_password&#x27;</span><br><span class="line"># Replice #</span><br><span class="line"> server-id = 1001</span><br><span class="line"> relay_log = mysqld-relay-bin</span><br><span class="line"> gtid_mode = on</span><br><span class="line"> enforce-gtid-consistency</span><br><span class="line"> log-slave-updates = on</span><br><span class="line"> master_info_repository =TABLE</span><br><span class="line"> relay_log_info_repository =TABLE</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># DATA STORAGE #</span><br><span class="line"> datadir = /usr/local/mysql/data/</span><br><span class="line"> tmpdir = /tmp</span><br><span class="line"> </span><br><span class="line"># BINARY LOGGING #</span><br><span class="line"> log_bin = /usr/local/mysql/sql_log/mysql-bin</span><br><span class="line"> max_binlog_size = 1000M</span><br><span class="line"> binlog_format = row</span><br><span class="line"> binlog_expire_logs_seconds=86400</span><br><span class="line"># sync_binlog = 1</span><br><span class="line"></span><br><span class="line"> # CACHES AND LIMITS #</span><br><span class="line"> tmp_table_size                 = 32M</span><br><span class="line"> max_heap_table_size            = 32M</span><br><span class="line"> max_connections                = 4000</span><br><span class="line"> thread_cache_size              = 2048</span><br><span class="line"> open_files_limit               = 65535</span><br><span class="line"> table_definition_cache         = 4096</span><br><span class="line"> table_open_cache               = 4096</span><br><span class="line"> sort_buffer_size               = 2M</span><br><span class="line"> read_buffer_size               = 2M</span><br><span class="line"> read_rnd_buffer_size           = 2M</span><br><span class="line"># thread_concurrency             = 24</span><br><span class="line"> join_buffer_size = 1M</span><br><span class="line"># table_cache = 32768</span><br><span class="line"> thread_stack = 512k</span><br><span class="line"> max_length_for_sort_data = 16k</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> # INNODB #</span><br><span class="line"> innodb_flush_method            = O_DIRECT</span><br><span class="line"> innodb_log_buffer_size = 16M</span><br><span class="line"> innodb_flush_log_at_trx_commit = 2</span><br><span class="line"> innodb_file_per_table          = 1</span><br><span class="line"> innodb_buffer_pool_size        = 256M</span><br><span class="line"> #innodb_buffer_pool_instances = 8</span><br><span class="line"> innodb_stats_on_metadata = off</span><br><span class="line"> innodb_open_files = 8192</span><br><span class="line"> innodb_read_io_threads = 16</span><br><span class="line"> innodb_write_io_threads = 16</span><br><span class="line"> innodb_io_capacity = 20000</span><br><span class="line"> innodb_thread_concurrency = 0</span><br><span class="line"> innodb_lock_wait_timeout = 60</span><br><span class="line"> innodb_old_blocks_time=1000</span><br><span class="line"> innodb_use_native_aio = 1</span><br><span class="line"> innodb_purge_threads=1</span><br><span class="line"> innodb_change_buffering=all</span><br><span class="line"> innodb_log_file_size = 64M</span><br><span class="line"> innodb_log_files_in_group = 2</span><br><span class="line"> innodb_data_file_path  = ibdata1:256M:autoextend</span><br><span class="line"> </span><br><span class="line"> innodb_rollback_on_timeout=on</span><br><span class="line"> # LOGGING #</span><br><span class="line"> log_error                      = /usr/local/mysql/sql_log/mysql-error.log</span><br><span class="line"> # log_queries_not_using_indexes  = 1</span><br><span class="line"> # slow_query_log                 = 1</span><br><span class="line">  slow_query_log_file            = /usr/local/mysql/sql_log/slowlog.log</span><br><span class="line"></span><br><span class="line"> # TimeOut #</span><br><span class="line"> #interactive_timeout = 30</span><br><span class="line"> #wait_timeout        = 30</span><br><span class="line"> #net_read_timeout = 60</span><br><span class="line"></span><br><span class="line">[mysqldump]</span><br><span class="line">quick</span><br><span class="line">max_allowed_packet = 100M</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">no-auto-rehash</span><br><span class="line"># Remove the next comment character if you are not familiar with SQL</span><br><span class="line">#safe-updates</span><br><span class="line"></span><br><span class="line">[myisamchk]</span><br><span class="line">key_buffer_size = 256M</span><br><span class="line">sort_buffer_size = 256M</span><br><span class="line">read_buffer = 2M</span><br><span class="line">write_buffer = 2M</span><br><span class="line"></span><br><span class="line">[mysqlhotcopy]</span><br><span class="line">interactive-timeout</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/mysql</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建需要的mysql目录，并改变属主、权限</span></span><br><span class="line">mkdir data sql_log undo</span><br><span class="line"></span><br><span class="line">chown -R mysql.mysql data/ sql_log/ undo/</span><br></pre></td></tr></table></figure><p>（4）初始化mysql</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 初始化mysql8</span><br><span class="line">mysqld --initialize --user=mysql --basedir=/usr/local/mysql --datadir=/usr/local/mysql/data</span><br><span class="line"></span><br><span class="line">cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld</span><br></pre></td></tr></table></figure><p>（5）启动mysql</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/mysqld start</span><br></pre></td></tr></table></figure><p>（6）修改密码</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看mysql的初始密码</span></span><br><span class="line">grep password /usr/local/mysql/sql_log/mysql-error.log</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改mysql的初始密码</span></span><br><span class="line"><span class="meta prompt_">mysql&gt; </span><span class="language-bash">alter user user() identified by <span class="string">&#x27;root&#x27;</span>;</span></span><br></pre></td></tr></table></figure><br><br><br><h1 id="第3章-【设计师视角】关于数据库设计-程序猿必备技"><a href="#第3章-【设计师视角】关于数据库设计-程序猿必备技" class="headerlink" title="第3章 【设计师视角】关于数据库设计-程序猿必备技"></a>第3章 【设计师视角】关于数据库设计-程序猿必备技</h1><h2 id="数据库设计范式"><a href="#数据库设计范式" class="headerlink" title="数据库设计范式"></a>数据库设计范式</h2><ul><li><strong>第一范式：表中的所有字段都是不可再分的</strong><ul><li>符合第一范式的表全部都是二维表</li></ul></li><li><strong>第二范式：表中必须存在业务主键，并且非主键依赖于全部业务主键</strong><ul><li>第二范式是在第一范式的基础上定义的（也就是说第二范式的表一定是一个标准的二维表）</li></ul></li><li><strong>第三范式：表中的非主键列之间不能相互依赖</strong><ul><li>第三范式是在第一、第二范式的基础上定义的</li></ul></li></ul><br><br><br><h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><ul><li><a class="link"   href="https://coding.imooc.com/class/chapter/332.html#Anchor" >零基础入门 详解企业主流数据库MySQL8.0——从选型-设计-SQL开发-优化，一切为你在工作中能独当一面而设计<i class="fas fa-external-link-alt"></i></a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;br&gt;

&lt;h1 id=&quot;第1章-开篇引导&quot;&gt;&lt;a href=&quot;#第1章-开篇引导&quot; class=&quot;headerlink&quot; title=&quot;第1章 开篇引导&quot;&gt;&lt;/a&gt;第1章 开篇引导&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;用SQL解决企业中存在的真实业务痛点问题；&lt;/li&gt;
&lt;li&gt;用SQ</summary>
      
    
    
    
    <category term="DataBase" scheme="https://ratears.github.io/dev.ratears.life/categories/DataBase/"/>
    
    <category term="MySQL" scheme="https://ratears.github.io/dev.ratears.life/categories/DataBase/MySQL/"/>
    
    
    <category term="DataBase" scheme="https://ratears.github.io/dev.ratears.life/tags/DataBase/"/>
    
    <category term="MySQL" scheme="https://ratears.github.io/dev.ratears.life/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>《玩转MongoDB4.0(最新版) 从入门到实践》Study Notes</title>
    <link href="https://ratears.github.io/dev.ratears.life/2023/%E3%80%8A%E7%8E%A9%E8%BD%ACMongoDB4-0-%E6%9C%80%E6%96%B0%E7%89%88-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E3%80%8BStudy-Notes/"/>
    <id>https://ratears.github.io/dev.ratears.life/2023/%E3%80%8A%E7%8E%A9%E8%BD%ACMongoDB4-0-%E6%9C%80%E6%96%B0%E7%89%88-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E3%80%8BStudy-Notes/</id>
    <published>2023-10-28T16:03:39.570Z</published>
    <updated>2023-10-28T16:03:39.570Z</updated>
    
    <content type="html"><![CDATA[<br><h1 id="第1章-课程导学"><a href="#第1章-课程导学" class="headerlink" title="第1章 课程导学"></a>第1章 课程导学</h1><h2 id="为什么选择MongoDB"><a href="#为什么选择MongoDB" class="headerlink" title="为什么选择MongoDB"></a>为什么选择MongoDB</h2><ul><li>灵活性</li><li>可扩展性</li><li>强大的查询语言</li><li>优异性能</li></ul><br><br><h2 id="课程介绍"><a href="#课程介绍" class="headerlink" title="课程介绍"></a>课程介绍</h2><ul><li>零基础：基本操作，快速入门</li><li>新手进阶：原理讲解，高阶特性</li><li>运维支持：日常维护，故障诊断</li></ul><br><br><h2 id="学习收获"><a href="#学习收获" class="headerlink" title="学习收获"></a>学习收获</h2><ul><li>快速入门MongoDB基本操作</li><li>独立搭建支持MongoDB的web服务</li><li>为进一步提高学习打下牢固基础</li><li>掌握常用的数据库管理工具</li><li>覆盖70%官方认证核心知识点</li></ul><br><br><br><h1 id="第2章-程序媛姐姐带你初识MongoDB"><a href="#第2章-程序媛姐姐带你初识MongoDB" class="headerlink" title="第2章 程序媛姐姐带你初识MongoDB"></a>第2章 程序媛姐姐带你初识MongoDB</h1><h2 id="MongoDB是什么"><a href="#MongoDB是什么" class="headerlink" title="MongoDB是什么"></a>MongoDB是什么</h2><ul><li>MongoDB：文档存储</li><li>Redis：键值存储</li><li>Cassandra：列存储</li><li>Objectivity&#x2F;DB：对象存储</li><li>Neo4j：图形存储</li></ul><br><br><br><h1 id="第3章-MongoDB基本操作之CRUD"><a href="#第3章-MongoDB基本操作之CRUD" class="headerlink" title="第3章 MongoDB基本操作之CRUD"></a>第3章 MongoDB基本操作之CRUD</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><ul><li>存储在MongoDB中的每一篇文档都有一个专属id：文档主键id</li><li>文档主键id全局唯一</li><li>MongoDB支持所有数据类型（数组除外）</li><li>复合主键</li></ul><br><br><h2 id="对象主键ObjectId"><a href="#对象主键ObjectId" class="headerlink" title="对象主键ObjectId"></a>对象主键ObjectId</h2><ul><li>默认的文档主键</li><li>可以快速生成12字节id</li><li>包含创建时间</li></ul><br><br><h2 id="创建文档"><a href="#创建文档" class="headerlink" title="创建文档"></a>创建文档</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.<span class="property">collection</span>.<span class="title function_">insert</span>()</span><br><span class="line">db.<span class="property">collection</span>.<span class="title function_">insert</span>()</span><br></pre></td></tr></table></figure><ul><li>使用mongo shell创建文档</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** 使用test数据库 */</span></span><br><span class="line">use test</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 查看test数据库中的集合 */</span></span><br><span class="line">show collections</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment">db.&lt;collection&gt;.insertOne 会自动创建集合</span></span><br><span class="line"><span class="comment">&lt;collection&gt;表示文档将要写入的集合</span></span><br><span class="line"><span class="comment">&lt;document&gt; 表示要写入的文档本身</span></span><br><span class="line"><span class="comment">这里的writeConcern文档定义了本次文档创建操作的安全写级别；</span></span><br><span class="line"><span class="comment">简单来说，安全写级别用来判断一次数据库写入操作是否成功安全写级别越高，丢失数据的风险就越低，</span></span><br><span class="line"><span class="comment">然而写入操作的延迟也可能更高。如果不提供writeConcern文档，mongoDB使用默认的安全写级别</span></span><br><span class="line"><span class="comment">省略 _id 字段则会自动生成_id</span></span><br><span class="line"><span class="comment">*/</span>    </span><br><span class="line">db.&lt;collection&gt;.insertOne(</span><br><span class="line">   &lt;document&gt;,</span><br><span class="line">   &#123;</span><br><span class="line">      writeConcern: &lt;document&gt;</span><br><span class="line">   &#125;</span><br><span class="line">)</span><br><span class="line">    </span><br><span class="line">db.col.insert(&#123;title: <span class="string">&#x27;MongoDB 教程&#x27;</span>, </span><br><span class="line">    description: <span class="string">&#x27;MongoDB 是一个 Nosql 数据库&#x27;</span>,</span><br><span class="line">    by: <span class="string">&#x27;菜鸟教程&#x27;</span>,</span><br><span class="line">    url: <span class="string">&#x27;http://www.runoob.com&#x27;</span>,</span><br><span class="line">    tags: [<span class="string">&#x27;mongodb&#x27;</span>, <span class="string">&#x27;database&#x27;</span>, <span class="string">&#x27;NoSQL&#x27;</span>],</span><br><span class="line">    likes: <span class="number">100</span></span><br><span class="line">&#125;)</span><br><span class="line">&#123; acknowledged: <span class="literal">true</span>, insertedId: <span class="string">&#x27;aacount1&#x27;</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">由于我们在db.collection.insertone()命令中并没有提供writeConcern文档，这里显示的是mongoDB默认的安全写级别启用状态</span></span><br><span class="line"><span class="comment">&quot;insertedd 显示了被写入的文档的 id&quot;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment">db.collection.insertMany() 用于向集合插入一个多个文档，语法格式如下：将多个需要创建的文档作为一个数组传入 db,collection.insertMany()</span></span><br><span class="line"><span class="comment">ordered：指定是否按顺序写入，默认 true，按顺序写入;</span></span><br><span class="line"><span class="comment">如果将ordered参数设置为 false，mongoDB可以打乱文档写入的顺序，以便优化写入操作的性能;</span></span><br><span class="line"><span class="comment">在顺序写入时，一旦遇到错误，操作便会退出，剩余的文档无论正确与否，都不会被写入</span></span><br><span class="line"><span class="comment">在乱序写入时，即时某些文档造成了错误，剩余的正确文档仍然会被写入所以第二篇文档会被正常写入数据库</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">db.collection.insertMany(</span><br><span class="line">   [ &lt;document <span class="number">1</span>&gt; , &lt;document <span class="number">2</span>&gt;, ... ],</span><br><span class="line">   &#123;</span><br><span class="line">      writeConcern: &lt;document&gt;,</span><br><span class="line">      ordered: &lt;<span class="type">boolean</span>&gt;</span><br><span class="line">   &#125;</span><br><span class="line">)</span><br><span class="line">    </span><br><span class="line"><span class="comment">/** 创建单个或多个文档 */</span>    </span><br><span class="line">db.collection.insert()</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;br&gt;

&lt;h1 id=&quot;第1章-课程导学&quot;&gt;&lt;a href=&quot;#第1章-课程导学&quot; class=&quot;headerlink&quot; title=&quot;第1章 课程导学&quot;&gt;&lt;/a&gt;第1章 课程导学&lt;/h1&gt;&lt;h2 id=&quot;为什么选择MongoDB&quot;&gt;&lt;a href=&quot;#为什么选择MongoD</summary>
      
    
    
    
    <category term="DataBase" scheme="https://ratears.github.io/dev.ratears.life/categories/DataBase/"/>
    
    <category term="MongoDB" scheme="https://ratears.github.io/dev.ratears.life/categories/DataBase/MongoDB/"/>
    
    
    <category term="MongoDB" scheme="https://ratears.github.io/dev.ratears.life/tags/MongoDB/"/>
    
    <category term="DataBase" scheme="https://ratears.github.io/dev.ratears.life/tags/DataBase/"/>
    
  </entry>
  
  <entry>
    <title>《Java设计模式精讲 Debug方式+内存分析》Study Notes</title>
    <link href="https://ratears.github.io/dev.ratears.life/2023/%E3%80%8AJava%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%B2%BE%E8%AE%B2-Debug%E6%96%B9%E5%BC%8F-%E5%86%85%E5%AD%98%E5%88%86%E6%9E%90%E3%80%8BStudy-Notes/"/>
    <id>https://ratears.github.io/dev.ratears.life/2023/%E3%80%8AJava%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%B2%BE%E8%AE%B2-Debug%E6%96%B9%E5%BC%8F-%E5%86%85%E5%AD%98%E5%88%86%E6%9E%90%E3%80%8BStudy-Notes/</id>
    <published>2023-10-26T18:37:51.668Z</published>
    <updated>2023-10-26T18:37:51.668Z</updated>
    
    <content type="html"><![CDATA[<br><h1 id="第1章-课程导学"><a href="#第1章-课程导学" class="headerlink" title="第1章 课程导学"></a>第1章 课程导学</h1><h2 id="设计模式概述"><a href="#设计模式概述" class="headerlink" title="设计模式概述"></a>设计模式概述</h2><ul><li>工程师必备知识</li><li>面试高频考点</li></ul><br><br><h2 id="课程内容设计"><a href="#课程内容设计" class="headerlink" title="课程内容设计"></a>课程内容设计</h2><ul><li><p>设计模式定义</p></li><li><p>设计模式应用</p></li><li><p>源码解析</p></li><li><p>系统学习设计模式</p></li><li><p>结合大量场景 Coding</p></li><li><p>动态递进式讲解(场景-UML-代码）</p></li><li><p>采用 Debug方式及内存分析，容易理解抽象的设计模式</p></li><li><p>JDK及热门开源框架解析，领略设计模式的妙用技巧</p></li></ul><blockquote><p>真正学懂设计模式，面试中脱颖而出</p></blockquote><br><br><h2 id="课程内容概述"><a href="#课程内容概述" class="headerlink" title="课程内容概述"></a>课程内容概述</h2><h3 id="UML"><a href="#UML" class="headerlink" title="UML"></a>UML</h3><ul><li>UML基础</li><li>UML类图</li><li>UML时序留</li><li>UML类关系</li><li>UML记忆技巧</li></ul><h3 id="7大设计原则"><a href="#7大设计原则" class="headerlink" title="7大设计原则"></a>7大设计原则</h3><ul><li>开闭原则</li><li>依赖倒置原则</li><li>单一职责原则</li><li>接口隔离原则</li><li>迪米特原则</li><li>里氏替换原则</li><li>合成复用原则</li></ul><h3 id="设计模式-创建型模式"><a href="#设计模式-创建型模式" class="headerlink" title="设计模式-创建型模式"></a>设计模式-创建型模式</h3><ul><li>工厂方法模式</li><li>抽象工厂模式</li><li>建造者模式</li><li>单例模式</li><li>原型模式</li></ul><h3 id="设计模式-结构型模式"><a href="#设计模式-结构型模式" class="headerlink" title="设计模式-结构型模式"></a>设计模式-结构型模式</h3><ul><li>适配器模式</li><li>装饰者模式</li><li>代理模式</li><li>外观模式</li><li>桥接模式</li><li>组合模式</li><li>享元模式</li></ul><h3 id="设计模式-行为型模式"><a href="#设计模式-行为型模式" class="headerlink" title="设计模式-行为型模式"></a>设计模式-行为型模式</h3><ul><li>策略模式</li><li>观察者模式</li><li>责任链模式</li><li>备忘录模式</li><li>模板方法模式</li><li>迭代器模式</li><li>中介者模式</li><li>命令模式</li><li>访问者模式</li><li>解释器模式</li><li>状态模式</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;br&gt;

&lt;h1 id=&quot;第1章-课程导学&quot;&gt;&lt;a href=&quot;#第1章-课程导学&quot; class=&quot;headerlink&quot; title=&quot;第1章 课程导学&quot;&gt;&lt;/a&gt;第1章 课程导学&lt;/h1&gt;&lt;h2 id=&quot;设计模式概述&quot;&gt;&lt;a href=&quot;#设计模式概述&quot; class=&quot;he</summary>
      
    
    
    
    <category term="Design-Pattern" scheme="https://ratears.github.io/dev.ratears.life/categories/Design-Pattern/"/>
    
    
    <category term="Design-Pattern" scheme="https://ratears.github.io/dev.ratears.life/tags/Design-Pattern/"/>
    
  </entry>
  
  <entry>
    <title>《Java主流分布式解决方案多场景设计与实战》Study Notes</title>
    <link href="https://ratears.github.io/dev.ratears.life/2023/%E3%80%8AJava%E4%B8%BB%E6%B5%81%E5%88%86%E5%B8%83%E5%BC%8F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E5%A4%9A%E5%9C%BA%E6%99%AF%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E6%88%98%E3%80%8BStudy-Notes/"/>
    <id>https://ratears.github.io/dev.ratears.life/2023/%E3%80%8AJava%E4%B8%BB%E6%B5%81%E5%88%86%E5%B8%83%E5%BC%8F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E5%A4%9A%E5%9C%BA%E6%99%AF%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E6%88%98%E3%80%8BStudy-Notes/</id>
    <published>2023-10-25T17:10:31.435Z</published>
    <updated>2023-10-25T17:10:31.435Z</updated>
    
    <content type="html"><![CDATA[<br><h1 id="第1章-课程介绍"><a href="#第1章-课程介绍" class="headerlink" title="第1章 课程介绍"></a>第1章 课程介绍</h1><h2 id="分布式架构下常见问题"><a href="#分布式架构下常见问题" class="headerlink" title="分布式架构下常见问题"></a>分布式架构下常见问题</h2><ul><li>集群部署，JVM锁解决不了并发问题</li><li>远程调用，Spring事务失效了</li><li>数据量太大，单库单表支撑不了业务压力了</li><li>分库分表，数据库自增id重复了</li><li>已经登录过了，访问另外一个服务还需要重新登录</li><li>集群部署，Spring任务调度执行重复了</li></ul><br><br><h2 id="课程安排"><a href="#课程安排" class="headerlink" title="课程安排"></a>课程安排</h2><ul><li>分布式锁</li><li>分布式事务</li><li>分布式ID</li><li>分库分表</li><li>分布式会话</li><li>分布式调度</li></ul><br><br><br><h1 id="第2章-分布式锁前置内容-JVM锁和MySql锁解决库存超卖问题"><a href="#第2章-分布式锁前置内容-JVM锁和MySql锁解决库存超卖问题" class="headerlink" title="第2章 分布式锁前置内容-JVM锁和MySql锁解决库存超卖问题"></a>第2章 分布式锁前置内容-JVM锁和MySql锁解决库存超卖问题</h1><h2 id="扣减库存实战"><a href="#扣减库存实战" class="headerlink" title="扣减库存实战"></a>扣减库存实战</h2><ul><li><strong>需求背景</strong>：电商项目中，用户购买商品后，会对商品的库存进行扣减</li><li><strong>需求实现</strong>：根据用户购买商品及购买商品数量，对商品的库存进行指定数量的扣减。</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database shop;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS `goods_stock`;</span><br><span class="line">CREATE TABLE `goods_stock` (</span><br><span class="line">  `id` bigint(20) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `goods_id` bigint(20) NOT NULL,</span><br><span class="line">  `stock` int(11) NOT NULL,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT=&#x27;商品库存表&#x27;;</span><br></pre></td></tr></table></figure><ul><li><strong>库存扣减项目技术点</strong><ul><li>Spring Boot 3.0</li><li>JDK17</li><li>Mybatis</li><li>Lombok</li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.stu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>distributed-lock-stock<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>distributed-lock-stock<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>distributed-lock-stock<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>17<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">exclude</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/shop?characterEncoding=UTF-8</span></span><br></pre></td></tr></table></figure><br><br><h2 id="使用JMeter压力测试工具"><a href="#使用JMeter压力测试工具" class="headerlink" title="使用JMeter压力测试工具"></a>使用JMeter压力测试工具</h2><ul><li>Jmeter介绍<ul><li>ApacheJMeter 是 Apache 组织基于Java 开发的压力测试工具，用于对软件做压力测试。</li></ul></li><li>Jmeter用来做什么<ul><li>接口测试</li><li>性能测试</li><li>压力测试</li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;br&gt;

&lt;h1 id=&quot;第1章-课程介绍&quot;&gt;&lt;a href=&quot;#第1章-课程介绍&quot; class=&quot;headerlink&quot; title=&quot;第1章 课程介绍&quot;&gt;&lt;/a&gt;第1章 课程介绍&lt;/h1&gt;&lt;h2 id=&quot;分布式架构下常见问题&quot;&gt;&lt;a href=&quot;#分布式架构下常见问题&quot; c</summary>
      
    
    
    
    <category term="distributed" scheme="https://ratears.github.io/dev.ratears.life/categories/distributed/"/>
    
    
    <category term="distributed" scheme="https://ratears.github.io/dev.ratears.life/tags/distributed/"/>
    
    <category term="lock" scheme="https://ratears.github.io/dev.ratears.life/tags/lock/"/>
    
  </entry>
  
  <entry>
    <title>《Linux核心技能与应用》Study Notes</title>
    <link href="https://ratears.github.io/dev.ratears.life/2023/%E3%80%8ALinux%E6%A0%B8%E5%BF%83%E6%8A%80%E8%83%BD%E4%B8%8E%E5%BA%94%E7%94%A8%E3%80%8BStudy-Notes/"/>
    <id>https://ratears.github.io/dev.ratears.life/2023/%E3%80%8ALinux%E6%A0%B8%E5%BF%83%E6%8A%80%E8%83%BD%E4%B8%8E%E5%BA%94%E7%94%A8%E3%80%8BStudy-Notes/</id>
    <published>2023-10-21T16:08:41.638Z</published>
    <updated>2023-10-21T16:08:41.638Z</updated>
    
    <content type="html"><![CDATA[<br><h1 id="第1章-课程介绍"><a href="#第1章-课程介绍" class="headerlink" title="第1章 课程介绍"></a>第1章 课程介绍</h1><ul><li>Android 和苹果的操作系统底层都是类 Linux</li></ul><blockquote><p>Android：修改过的Linux</p><p>ios &#x2F; macOS ：修改过的 Unix （类Linux）</p></blockquote><br><br><br><h1 id="第2章-Linux的安装与配置"><a href="#第2章-Linux的安装与配置" class="headerlink" title="第2章 Linux的安装与配置"></a>第2章 Linux的安装与配置</h1><h2 id="Linux-简介"><a href="#Linux-简介" class="headerlink" title="Linux 简介"></a>Linux 简介</h2><ul><li><p>Linux 是什么：简单来说，Linux和Windows 类似，都是操作系统</p></li><li><p>CentoS 是什么：开源的 Linux操作系统的发行版</p></li><li><p>VirtualBox 是什么：一款开源虚拟机软件</p></li><li><p>启动 : 电脑开启</p><ul><li>不同电脑的“启动界面”是不尽相同的</li><li>正是电脑的主板(mother board)显示了“启动界面</li><li>主板是电脑最主要的部分</li></ul></li><li><p>主板</p><ul><li>英语是Motherboard 或Mainboard</li><li>又称主机板、系统板、逻辑板、母板、底板，等</li></ul></li><li><p>Windows 启动的必要性</p><ul><li>Windows启动后，才可以使用各种应用程序</li><li>你的电脑需要一个类似“大管家”的软件</li><li>“大管家”软件起到连接电脑硬件和软件的“桥梁”的作用</li></ul></li><li><p>操作系统是“大管家”</p><ul><li>操作系统，简称 OS，是 Operating System 的首字母</li></ul></li><li><p>电脑按以下顺序执行任务</p><ul><li>启动界面（主板）</li><li>操作系统(例如 Windows)的启动</li><li>其他程序(或称软件)的启动</li></ul></li><li><p>Linux就是一个操作系统</p></li></ul><blockquote><p>类似的还有 macos，是苹果研发的操作系统</p><p>相比于Windows，Linux 以它的可靠和安全著称，而且更新频繁</p></blockquote><blockquote><p>一台电脑可以拥有两个(甚至更多)的操作系统</p><p>当启动界面结束后，会有一个被称为 bootloader 的程序显示出来</p><p>bootloader 让你做出选择，到底选择哪个操作系统来启动</p></blockquote><ul><li><p>bootloader</p><ul><li>boot(表示“启动”)，loader(表示“加载器”)，通过这段小程序，初始化硬件设备、建立内存空间的映射图，为最终调用操作系统内核准备好正确的环境</li><li>通常 bootloader 是严重依赖于硬件而实现的，特别在嵌入式领域</li><li>一般在 Linux和 Windows 之间做出选择的 bootloader 叫GRUB</li><li>如果没有做出选择，GRUB在几秒之后就会启动默认的操作系统</li></ul></li><li><p>不同操作系统上的程序</p></li></ul><blockquote><p>Windows的程序在 Linux 下不能运行，反之亦然</p><p>有些技术使 Windows的程序在 Linux 下可以运行，例如Wine，但终归是使用专为 Linux定制的程序比较好</p></blockquote><ul><li>Linux 上的程序有很多优点</li></ul><blockquote><p>免费:基本上 Linux上的所有程序都是免费的</p><p>更新频繁，更新也是免费的</p><p>不少程序的 Linux 版更优秀，有些程序没有 Windows 版</p></blockquote><ul><li><p>1984：微软刚刚发布第一个操作系统:MS-DOS</p></li><li><p>除了 DOS，也有一个操作系统很有名，就是 Unix；Unix 是 1969 年(或 1970年)诞生的</p></li><li><p><strong>操作系统是电脑和应用程序之间的连接工具</strong></p></li><li><p>Windows，macos和 Linux 是最常用的操作系统</p></li></ul><br><br><h2 id="GNU-项目和-Linux-的不同发行版"><a href="#GNU-项目和-Linux-的不同发行版" class="headerlink" title="GNU 项目和 Linux 的不同发行版"></a>GNU 项目和 Linux 的不同发行版</h2><h3 id="GNU-项目"><a href="#GNU-项目" class="headerlink" title="GNU 项目"></a>GNU 项目</h3><ul><li>GNU在英语里是“牛羚”的意思</li><li>GNU是“GNUis Not Unix” (“GNU 不是 Unix”)的递归缩写</li><li>1984年，Richard Stallman ( 理查德斯托曼)创立了GNU 项目</li></ul><h3 id="Richard-Stallman-理查德斯托曼"><a href="#Richard-Stallman-理查德斯托曼" class="headerlink" title="Richard Stallman ( 理查德斯托曼 )"></a>Richard Stallman ( 理查德斯托曼 )</h3><ul><li>自由软件基金会( Free Software Foundation )的主席</li><li>GNU项目的创始人</li><li>著名黑客，1971 年进入哈佛大学学习，同年受聘于麻省理工学院</li><li>代表作品:Emacs 编辑器，GCC 编译器，GDB 调试器</li><li>获得过很多荣誉奖章，1991 年获得格雷斯霍普奖</li><li>GNU项目在当时的首要目的是创立一个类Unix的操作系统</li></ul><h3 id="自由和免费的区别"><a href="#自由和免费的区别" class="headerlink" title="自由和免费的区别"></a>自由和免费的区别</h3><ul><li>自由的软件意味着源代码必须公开</li><li>自由的软件大部分时候是免费的，但也可以复制，修改和出售</li></ul><h3 id="Linus-Torvalds-李纳斯·托沃兹）"><a href="#Linus-Torvalds-李纳斯·托沃兹）" class="headerlink" title="Linus Torvalds (李纳斯·托沃兹）"></a>Linus Torvalds (李纳斯·托沃兹）</h3><ul><li>1991年Linus Torvalds 在业余时间编写了一个类Unix的内核</li><li>Linux 这个名字可以说是 Linus 和Unix 的合并</li><li>Linux 也可以说是“LinuxIs Not Unix”的递归缩写</li></ul><h3 id="Linux-吉祥物"><a href="#Linux-吉祥物" class="headerlink" title="Linux 吉祥物"></a>Linux 吉祥物</h3><ul><li>一只名叫 Tux的萌萌的雄性企鹅。Tux 是英语“燕尾服”的意思</li><li>为 Linux 设计吉祥物的画家征求意见，其他人提议模仿其他软件</li><li>Linus Torvalds说:“我以前在澳大利亚被一只企鹅咬过“</li></ul><h3 id="Linux-和-GNU-项目的联系"><a href="#Linux-和-GNU-项目的联系" class="headerlink" title="Linux 和 GNU 项目的联系"></a>Linux 和 GNU 项目的联系</h3><ul><li>这两个项目是互补的:Linus 其实就是写了一个类Unix的内核</li><li>1991 年，GNU 项目已经创建了不少操作系统的外围软件了</li><li>GNU 的软件 :cp 命令，rm 命令，Emacs，GCC，GDB，等</li><li>后来完善Linux的工作交给了Linus 和广大开源社区的黑客们</li><li>Linus是站在开源社区的巨人肩膀上的“芬兰小毛孩子” (大牛)</li><li>GNU 项目+ Linux (系统内核)&#x3D; GNU&#x2F;Linux 完整的操作系统</li></ul><blockquote><p>操作系统的核心称为“内核”，但内核并不就等于操作系统</p><p>内核提供系统服务，比如文件管理、虚拟内存、设备I&#x2F;0等，还包含一些基本的程序，例如 文本编辑器，编译器，外壳程序 Shell</p><p>单独的 Linux内核没办法工作，须要有GNU项目的众多应用程序</p><p>Linux的官方称谓应该是“GNU&#x2F;Linux”，一般简称 Linux</p></blockquote><ul><li><a class="link"   href="https://www.kernel.org/" >Linux 内核的官网<i class="fas fa-external-link-alt"></i></a></li></ul><br><br><h2 id="各个操作系统之间关系"><a href="#各个操作系统之间关系" class="headerlink" title="各个操作系统之间关系"></a>各个操作系统之间关系</h2><ul><li>macos和 Linux的设计理念基于 Unix，Unix 可以说是它们的祖先</li><li>目前大部分 Windows 版本是基于革命性的 Windows NT 内核</li><li>我们说 macos和Linux 基于 Unix，只是说复刻了 Unix 的运行模式</li></ul><br><br><h2 id="Linux-发行版"><a href="#Linux-发行版" class="headerlink" title="Linux 发行版"></a>Linux 发行版</h2><ul><li>因为是开源自由的，Linux 不像 Windows 那么死板</li><li>Linux 发行版:简化用户安装的过程，以及提供一些基本的软件，这种“发行版”的概念在 Windows 可以说并没有</li></ul><h3 id="Linux-发行版之间主要区别"><a href="#Linux-发行版之间主要区别" class="headerlink" title="Linux 发行版之间主要区别"></a>Linux 发行版之间主要区别</h3><ul><li>安装方法不一样:有的复杂，有的简单</li><li>安装应用程序的方式不一样</li><li>预装的应用程序不一样</li></ul><h3 id="不同的-Linux-发行版"><a href="#不同的-Linux-发行版" class="headerlink" title="不同的 Linux 发行版"></a>不同的 Linux 发行版</h3><ul><li>Red Hat:性能稳定，老牌的Linux发行版。收费的是 RHEL</li><li>Fedora :Red Hat 的社区免费后继版</li><li>Centos:算是 RHEL 的克隆版，免费。本课程使用</li><li>Deepin:中国发行。对优秀的开源产品进行集成和配置，开发软件</li><li>Debian :算是迄今为止，最遵循 GNU 规范的 Linux 系统</li><li>Ubuntu:Debian 的后继或一个分支</li></ul><h3 id="Red-Hat-家族主要成员"><a href="#Red-Hat-家族主要成员" class="headerlink" title="Red Hat 家族主要成员"></a>Red Hat 家族主要成员</h3><ul><li>RHEL : Red Hat 企业版</li><li>Fedora:Red Hat 的社区免费后继版</li><li>Centos:RHEL的克隆版，免费。结合了 RHEL和 Fedora 的特性</li></ul><h3 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h3><ul><li>CentOS是Community Enterprise Operating System 的缩写</li><li>CentOs 兼具 Community (社区)和Enterprise(企业)的特性</li><li>融合了 Fedora和 Red Hat 企业版的优点</li><li>CentOs 稳定、长期支持(10 年)、保守、大规模使用性能稳定</li><li>CentoS被企业普遍使用。特别适合用来做服务器的操作系统</li></ul><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><ul><li>macos和 Windows 的源代码是闭源的(看不到)，Linux 则开源</li><li>有很多不同的 Linux 变体，术语称为“Linux发行版“</li><li>在众多的 Linux 发行版中，Centos 非常流行、支持很广</li></ul><h2 id="Linux的多面特性"><a href="#Linux的多面特性" class="headerlink" title="Linux的多面特性"></a>Linux的多面特性</h2><ul><li>Windows可是很贵的，一个操作系统要几百美元，Linux却是免费的</li><li>不论是哪一个 Linux发行版，都有两种使用 Linux的方式：<ul><li>命令行界面 (类似DOS 操作系统)</li><li>图形界面（类似Windows 操作系统）</li></ul></li><li>主流的桌面管理器：<ul><li>Gnome</li><li>KDE</li><li>XFCE</li></ul></li></ul><br><br><h2 id="虚拟技术-虚拟化-Virtualization"><a href="#虚拟技术-虚拟化-Virtualization" class="headerlink" title="虚拟技术&#x2F;虚拟化( Virtualization )"></a>虚拟技术&#x2F;虚拟化( Virtualization )</h2><ul><li>一种通过组合或分区现有的计算机资源(CPU、内存、磁盘空间等)，使得这些资源表现为一个或多个操作环境，从而提供优于原有资源配置的访问方式的技术</li></ul><br><br><br><h1 id="第3章-Linux基础知识和命令"><a href="#第3章-Linux基础知识和命令" class="headerlink" title="第3章 Linux基础知识和命令"></a>第3章 Linux基础知识和命令</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;br&gt;

&lt;h1 id=&quot;第1章-课程介绍&quot;&gt;&lt;a href=&quot;#第1章-课程介绍&quot; class=&quot;headerlink&quot; title=&quot;第1章 课程介绍&quot;&gt;&lt;/a&gt;第1章 课程介绍&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;Android 和苹果的操作系统底层都是类 Linux&lt;/li&gt;
&lt;</summary>
      
    
    
    
    <category term="Linux" scheme="https://ratears.github.io/dev.ratears.life/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://ratears.github.io/dev.ratears.life/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>《SpringBoot3.0 + RocketMq 构建企业级数据中台》Study Notes</title>
    <link href="https://ratears.github.io/dev.ratears.life/2023/%E3%80%8ASpringBoot3-0-RocketMq-%E6%9E%84%E5%BB%BA%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%8F%B0%E3%80%8BStudy-Notes/"/>
    <id>https://ratears.github.io/dev.ratears.life/2023/%E3%80%8ASpringBoot3-0-RocketMq-%E6%9E%84%E5%BB%BA%E4%BC%81%E4%B8%9A%E7%BA%A7%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%8F%B0%E3%80%8BStudy-Notes/</id>
    <published>2023-10-19T16:15:45.991Z</published>
    <updated>2023-10-19T16:15:45.991Z</updated>
    
    <content type="html"><![CDATA[<br><h1 id="第1章-课程引言"><a href="#第1章-课程引言" class="headerlink" title="第1章 课程引言"></a>第1章 课程引言</h1><h2 id="课程导学"><a href="#课程导学" class="headerlink" title="课程导学"></a>课程导学</h2><h3 id="企业数据应用问题引入"><a href="#企业数据应用问题引入" class="headerlink" title="企业数据应用问题引入"></a>企业数据应用问题引入</h3><ul><li>开发效率低下</li><li>数据重复开发</li><li>数据质量低下</li><li>数据孤岛</li></ul><h3 id="课程介绍"><a href="#课程介绍" class="headerlink" title="课程介绍"></a>课程介绍</h3><ul><li>业务背景:智慧校园场景</li><li>场景问题引入</li><li>数据中台</li></ul><h3 id="课程安排"><a href="#课程安排" class="headerlink" title="课程安排"></a>课程安排</h3><img src="https://cdn.statically.io/gh/ratears/images-hosting@picx/picx/image.4xvfchj7yu00.webp" /><h3 id="课程特色"><a href="#课程特色" class="headerlink" title="课程特色"></a>课程特色</h3><ul><li>手把手代码开发，真正带你从零开始体验</li><li>组件式开发</li><li>源码深度实践</li><li>架构设计模式</li><li>企业完整项目流程和开发体验</li></ul><h3 id="课程收获"><a href="#课程收获" class="headerlink" title="课程收获"></a>课程收获</h3><ul><li>理解数据中台架构理念，实现数据中台的构建</li><li>积累实际企业项目开发经验</li><li>培养解决问题的能力和思路</li><li>提高对SpringBoot源码的认知深度，从源码转化为技术能力</li><li>提高编码质量</li></ul><h3 id="适合人群"><a href="#适合人群" class="headerlink" title="适合人群"></a>适合人群</h3><ul><li>想体验企业完整项目开发流程，积累开发经验</li><li>想要构建企业数据中台的开发人群</li><li>想要提升技能水平，突破瓶颈，晋级中高级的人群</li></ul><br><br><h2 id="数据中台项目展示及技术栈梳理"><a href="#数据中台项目展示及技术栈梳理" class="headerlink" title="数据中台项目展示及技术栈梳理"></a>数据中台项目展示及技术栈梳理</h2><h3 id="项目展示"><a href="#项目展示" class="headerlink" title="项目展示"></a>项目展示</h3><ul><li>略</li></ul><h3 id="技术栈梳理"><a href="#技术栈梳理" class="headerlink" title="技术栈梳理"></a>技术栈梳理</h3><ul><li>前端：Vue 3.2.13</li><li>服务端：SpringBoot 3.0.5</li></ul><h3 id="服务端技术要点"><a href="#服务端技术要点" class="headerlink" title="服务端技术要点"></a>服务端技术要点</h3><ul><li>SpringBoot 3.0.5</li><li>JDK17</li><li>动态多数据源技术</li><li>Mybatis Plus 3.5.3</li><li>RocketMQ 5.0.0</li><li>ElasticJob 3.0.2</li><li>Dubbo 3.2.0-beta.6</li><li>Google aviator 5.3.3</li><li>架构设计模式</li><li>MapStruct 1.5.3.Final</li></ul><br><br><h2 id="学习建议"><a href="#学习建议" class="headerlink" title="学习建议"></a>学习建议</h2><ul><li>课程学习方法：<ul><li>动手撸代码</li></ul></li><li>组件源码学习方法：<ul><li>先抓住主干，骨架</li></ul></li></ul><br><br><br><h1 id="第2章-认知数据中台"><a href="#第2章-认知数据中台" class="headerlink" title="第2章 认知数据中台"></a>第2章 认知数据中台</h1><br><br><br><h1 id="第3章-数据中台建设-前置理论基础"><a href="#第3章-数据中台建设-前置理论基础" class="headerlink" title="第3章 数据中台建设 - 前置理论基础"></a>第3章 数据中台建设 - 前置理论基础</h1><br><br><br><h1 id="第4章-构建数据模型-数据处理的原材料"><a href="#第4章-构建数据模型-数据处理的原材料" class="headerlink" title="第4章 构建数据模型 - 数据处理的原材料"></a>第4章 构建数据模型 - 数据处理的原材料</h1><br><br><br>]]></content>
    
    
      
      
    <summary type="html">&lt;br&gt;

&lt;h1 id=&quot;第1章-课程引言&quot;&gt;&lt;a href=&quot;#第1章-课程引言&quot; class=&quot;headerlink&quot; title=&quot;第1章 课程引言&quot;&gt;&lt;/a&gt;第1章 课程引言&lt;/h1&gt;&lt;h2 id=&quot;课程导学&quot;&gt;&lt;a href=&quot;#课程导学&quot; class=&quot;header</summary>
      
    
    
    
    <category term="SpringBoot" scheme="https://ratears.github.io/dev.ratears.life/categories/SpringBoot/"/>
    
    <category term="RocketMQ" scheme="https://ratears.github.io/dev.ratears.life/categories/SpringBoot/RocketMQ/"/>
    
    <category term="数据中台" scheme="https://ratears.github.io/dev.ratears.life/categories/SpringBoot/RocketMQ/%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%8F%B0/"/>
    
    
    <category term="RocketMQ" scheme="https://ratears.github.io/dev.ratears.life/tags/RocketMQ/"/>
    
    <category term="数据中台" scheme="https://ratears.github.io/dev.ratears.life/tags/%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%8F%B0/"/>
    
    <category term="SpringBoot" scheme="https://ratears.github.io/dev.ratears.life/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>《RocketMQ核心技术精讲与高并发抗压实战》Study Notes</title>
    <link href="https://ratears.github.io/dev.ratears.life/2023/%E3%80%8ARocketMQ%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E7%B2%BE%E8%AE%B2%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91%E6%8A%97%E5%8E%8B%E5%AE%9E%E6%88%98%E3%80%8BStudy-Notes/"/>
    <id>https://ratears.github.io/dev.ratears.life/2023/%E3%80%8ARocketMQ%E6%A0%B8%E5%BF%83%E6%8A%80%E6%9C%AF%E7%B2%BE%E8%AE%B2%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91%E6%8A%97%E5%8E%8B%E5%AE%9E%E6%88%98%E3%80%8BStudy-Notes/</id>
    <published>2023-10-17T19:42:05.246Z</published>
    <updated>2023-10-17T19:42:05.246Z</updated>
    
    <content type="html"><![CDATA[<br><h1 id="第1章-课程介绍"><a href="#第1章-课程介绍" class="headerlink" title="第1章 课程介绍"></a>第1章 课程介绍</h1><h2 id="两大模块"><a href="#两大模块" class="headerlink" title="两大模块"></a>两大模块</h2><ul><li>核心技术讲解与原理分析：<ul><li>最新版本使用</li><li>学以致用</li><li>原理分析及源代码剖析</li><li>体会RocketMQ设计思想</li></ul></li><li>双十一抗压实战基于RocketMQ落地</li></ul><br><br><h2 id="学完课程可以获得的技能"><a href="#学完课程可以获得的技能" class="headerlink" title="学完课程可以获得的技能"></a>学完课程可以获得的技能</h2><ul><li>掌握RocketMQ核心应用，更好的应对工作中MQ相关挑战</li><li>掌握RocketMQ集群搭建，助力快速投入到生产环境中</li><li>生产者: 轻松解决消息同步&#x2F;异步、延迟、顺序等问题</li><li>消费者: 真正理解Offset存储机制、消费端重试、幂等策略</li><li>核心原理，进阶掌握高可用机制、协调服务，刷盘赋值策略</li><li>SpringBoot2.x + Dubbo + Hystrix + RocketMO</li><li>分流&#x2F;限流，缓存路由，负载均衡，分库分表，抗压点分析</li><li>理解电商平台双十一高并发抗压的全链路核心流程</li></ul><br><br><h2 id="课程安排"><a href="#课程安排" class="headerlink" title="课程安排"></a>课程安排</h2><ul><li><p>RocketMQ-初探门径</p><ul><li>.RocketMQ整体认知</li><li>核心概念模型解析</li><li>源码结构解析</li><li>编译部署&amp;环境搭建</li><li>SpringBoot控制台讲解</li></ul></li><li><p>RocketMQ-急速入门</p><ul><li>生产者模型使用</li><li>消费者模型使用</li><li>四种集群环境讲解</li><li>主从集群环境构建</li><li>数据高可用机制故障演练</li></ul></li><li><p>RocketMQ-生产者核心</p><ul><li>配置参数解析</li><li>主从同步机制解析</li><li>同步&#x2F;异步消息发送解析</li><li>底层Netty通信解析</li><li>延迟消息投递解析</li></ul></li><li><p>RocketMQ-消费者核心</p><ul><li>配置参数详解</li><li>集群与广播模式解析</li><li>消息存储核心-OffSet解析</li><li>消费者底层解析与最佳实践</li><li>消息推拉模式解析</li></ul></li><li><p>RocketMQ-原理解析</p><ul><li>消息存储结构解析</li><li>同步&#x2F;异步刷盘解析</li><li>同步&#x2F;异步复制解析</li><li>高可用机制解析</li><li>NameServer协调者解析</li></ul></li></ul><br><br><h2 id="适合人群"><a href="#适合人群" class="headerlink" title="适合人群"></a>适合人群</h2><ul><li>Java中高级工程师</li><li>想彻底掌握RocketMQ消息中间件技术的小伙伴</li><li>想把RocketMQ结合到高并发实战场景的小伙伴</li><li>想提升技术深度、广度，面试中能够脱颖而出的工程师</li></ul><br><br><h2 id="技术储备要求"><a href="#技术储备要求" class="headerlink" title="技术储备要求"></a>技术储备要求</h2><ul><li>具备一定的自学能力</li><li>具备Java基础，Linux基础、SpringBoot基础</li><li>了解分布式rpc框架 (dubbo)、zookeeper</li></ul><br><br><br><h1 id="第2章-RocketMQ初探门径"><a href="#第2章-RocketMQ初探门径" class="headerlink" title="第2章 RocketMQ初探门径"></a>第2章 RocketMQ初探门径</h1><h2 id="RocketMQ-整体介绍"><a href="#RocketMQ-整体介绍" class="headerlink" title="RocketMQ-整体介绍"></a>RocketMQ-整体介绍</h2><ul><li>RocketMQ是一款分布式、队列模型的消息中间件</li><li>4.x版本开始支持分布式事务</li><li>支持集群模型、负载均衡、水平扩展能力</li><li>亿级别的消息堆积能力</li><li>采用零拷贝的原理、顺序写盘、随机读</li><li>丰富的API使用</li><li>代码优秀，底层通信框架采用Netty NIO框架</li><li>NameServer 代替 Zookeper</li><li>强调集群无单点，可扩展，任意一点高可用，水平可扩展</li><li>消息失败重试机制、消息可查询</li><li>开源社区活跃、成熟度(经过双十一考验）</li></ul><br><br><h2 id="RocketMQ-核心概念模型"><a href="#RocketMQ-核心概念模型" class="headerlink" title="RocketMQ-核心概念模型"></a>RocketMQ-核心概念模型</h2><ul><li>Producer:消息生产者，负责产生消息，一般由业务系统负责产生消息</li><li>Consumer:消息消费者，负责消费消息，一般是后台系统负责异步消费</li><li>Push Consumer: Consumer的一种，需要Consumer对象注册监听</li><li>Pull Consumer: Consumer的一种，需要主动请求Broker拉取消息</li><li>Producer Group: 生产者集合，一般用于发送一类消息</li><li>Consumer Group:消费者集合，一般用于接受一类消息进行消费</li><li>Broker: MQ消息服务 (中转角色，用于消息存储与生产消费转发）</li></ul><br><br><h2 id="RocketMQ-源码包下载与结构说明"><a href="#RocketMQ-源码包下载与结构说明" class="headerlink" title="RocketMQ-源码包下载与结构说明"></a>RocketMQ-源码包下载与结构说明</h2><ul><li><p>官网地址下载源码包<code>rocketmq-all-4.3.0-source-release.zip</code>解压后，eclipse引入工程时修正小错误</p></li><li><p>执行命令：<code>mvn -Prelease-all -DskipTests clean install -U</code>，<strong>BUILD SUCCESS</strong>后会在<code>rocketmq-distribution/target/</code>目录下生成<code>apache-rocketmq.tar.gz</code>文件</p></li><li><p>rocketmq-broker 主要的业务逻辑，消息收发，主从同步，pagecache</p></li><li><p>rocketmq-client 客户端接口，比如生产者和消费者</p></li><li><p>rocketmq-example 示例，比如生产者和消费者</p></li><li><p>rocketmq-common 公用数据结构等等</p></li><li><p>rocketmq-distribution 编译模块，编译输出等</p></li><li><p>rocketmg-fliter 进行Broker过滤的不感兴趣的消息传输，减小带宽压力</p></li><li><p>rocketmq-logappender、rocketmq-logging日志相关</p></li><li><p>rocketmq-namesrv Namesrv服务，用于服务协调</p></li><li><p>rocketmq-openmessaging 对外提供服务</p></li><li><p>rocketmq-remoting 远程调用接口，封装Netty底层通信</p></li><li><p>rocketmq-srvutil 提供了处理命令行参数的功能</p></li><li><p>rocketmq-store 消息存储</p></li><li><p>rocketmq-test 、rocketmq-example</p></li><li><p>rocketmg-tools 管理工具，比如有名的mqadmin工具</p></li></ul><br><br><h2 id="RocketMQ-环境搭建"><a href="#RocketMQ-环境搭建" class="headerlink" title="RocketMQ-环境搭建"></a>RocketMQ-环境搭建</h2><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><ul><li><p>CentOS 7</p></li><li><p>JDK1.8+</p></li><li><p>RocketMQ 4.3.X</p></li></ul><h3 id="单Master环境搭建"><a href="#单Master环境搭建" class="headerlink" title="单Master环境搭建"></a>单Master环境搭建</h3><blockquote><p><font color='red'>PS：注意开通网络端口或关闭防火墙</font></p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">（1）配置hosts信息</span></span><br><span class="line">vim /etc/hosts</span><br><span class="line"></span><br><span class="line">192.168.61.220 rocketmq-nameserver1</span><br><span class="line">192.168.61.220 rocketmq-master1</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">（2）上传 apache-rocketmq.tar.gz 包到服务器 /usr/local/src/</span></span><br><span class="line">cd /usr/local/src/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">（3）解压，创建软连接</span></span><br><span class="line">mkdir -p /usr/local/apache-rocketmq-4.3.0</span><br><span class="line">tar -zxvf /usr/local/src/apache-rocketmq.tar.gz -C /usr/local/apache-rocketmq-4.3.0</span><br><span class="line">ln -s /usr/local/apache-rocketmq-4.3.0 /usr/local/rocketmq</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">（4）创建存储路径</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">store：rocketmq数据存储目录，commitlog：真正存储rocketmq 实际数据，consumequeue：逻辑存储，index 索引存储</span></span><br><span class="line">mkdir /usr/local/rocketmq/store</span><br><span class="line">mkdir /usr/local/rocketmq/store/commitlog</span><br><span class="line">mkdir /usr/local/rocketmq/store/consumequeue</span><br><span class="line">mkdir /usr/local/rocketmq/store/index</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">（5）配置RocketMQ配置文件</span></span><br><span class="line">vim /usr/local/rocketmq/conf/2m-2s-async/broker-a.properties</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">所属集群名字</span></span><br><span class="line">brokerClusterName=rocketmq-cluster</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">broker 名字，注意此处不同的配置文件填写的不一样</span></span><br><span class="line">brokerName=broker-a</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">0 表示 Master，&gt;0 表示 Slave</span></span><br><span class="line">brokerId=0</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">nameServer 地址，分号分割</span></span><br><span class="line">namesrvAddr=rocketmq-nameserver1:9876</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在发送消息时，自动创建服务器不存在的 topic，默认创建的队列数</span></span><br><span class="line">defaultTopicQueueNums=4</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">是否允许 Broker 自动创建 Topic，建议线下开启，线上关闭</span></span><br><span class="line">autoCreateTopicEnable=true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">是否允许 Broker 自动创建订阅组，建议线下开启，线上关闭</span></span><br><span class="line">autoCreateSubscriptionGroup=true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Broker 对外服务的监听端口</span></span><br><span class="line">listenPort=10911</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除文件时间点，默认凌晨 4 点</span></span><br><span class="line">deleteWhen=04</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">文件保留时间，默认 48 小时</span></span><br><span class="line">fileReservedTime=120</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">commitLog 每个文件的大小默认 1G</span></span><br><span class="line">mapedFileSizeCommitLog=1073741824</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ConsumeQueue 每个文件默认存 30W 条，根据业务情况调整</span></span><br><span class="line">mapedFileSizeConsumeQueue=300000</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">destroyMapedFileIntervalForcibly=120000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">redeleteHangedFileInterval=120000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">检测物理文件磁盘空间</span></span><br><span class="line">diskMaxUsedSpaceRatio=88</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">存储路径</span></span><br><span class="line">storePathRootDir=/usr/local/rocketmq/store</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">commitLog 存储路径</span></span><br><span class="line">storePathCommitLog=/usr/local/rocketmq/store/commitlog</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">消费队列存储路径存储路径</span></span><br><span class="line">storePathConsumeQueue=/usr/local/rocketmq/store/consumequeue</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">消息索引存储路径</span></span><br><span class="line">storePathIndex=/usr/local/rocketmq/store/index</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">checkpoint 文件存储路径</span></span><br><span class="line">storeCheckpoint=/usr/local/rocketmq/store/checkpoint</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">abort 文件存储路径</span></span><br><span class="line">abortFile=/usr/local/rocketmq/store/abort</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">限制的消息大小</span></span><br><span class="line">maxMessageSize=65536</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushCommitLogLeastPages=4</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushConsumeQueueLeastPages=2</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushCommitLogThoroughInterval=10000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushConsumeQueueThoroughInterval=60000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Broker 的角色</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- ASYNC_MASTER 异步复制 Master</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SYNC_MASTER 同步双写 Master</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SLAVE</span></span><br><span class="line">brokerRole=ASYNC_MASTER</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">刷盘方式</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- ASYNC_FLUSH 异步刷盘</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SYNC_FLUSH 同步刷盘</span></span><br><span class="line">flushDiskType=ASYNC_FLUSH</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">checkTransactionMessageEnable=<span class="literal">false</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">发消息线程池数量</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">sendMessageThreadPoolNums=128</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">拉消息线程池数量</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">pullMessageThreadPoolNums=128</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">（6）修改日志配置文件，日志全局替换</span></span><br><span class="line">mkdir -p /usr/local/rocketmq/logs</span><br><span class="line">cd /usr/local/rocketmq/conf &amp;&amp; sed -i &#x27;s#$&#123;user.home&#125;#/usr/local/rocketmq#g&#x27; *.xml</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">（7）修改启动脚本参数</span></span><br><span class="line">vim /usr/local/rocketmq/bin/runbroker.sh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">===========================================================================================</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">JVM Configuration</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">===========================================================================================</span></span><br><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -server -Xms1g -Xmx1g -Xmn512m&quot;</span><br><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -XX:+UseG1GC -XX:G1HeapRegionSize=16m -XX:G1ReservePercent=25 -XX:InitiatingHeapOccupancyPercent=30 -XX:SoftRefLRUPolicyMSPerMB=0 -XX:SurvivorRatio=8&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">vim /usr/local/rocketmq/bin/runserver.sh</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">===========================================================================================</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">JVM Configuration</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">===========================================================================================</span></span><br><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -server -Xms1g -Xmx1g -Xmn512m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m&quot;</span><br><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:CMSInitiatingOccupancyFraction=70 -XX:+CMSParallelRemarkEnabled -XX:SoftRefLRUPolicyMSPerMB=0 -XX:+CMSClassUnloadingEnabled -XX:SurvivorRatio=8  -XX:-UseParNewGC&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">（8）启动 NameServer</span></span><br><span class="line">cd /usr/local/rocketmq/bin</span><br><span class="line">nohup sh mqnamesrv &amp;</span><br><span class="line"></span><br><span class="line">nohup sh /usr/local/rocketmq/bin/mqnamesrv &amp;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">（9）启动 BrokerServer</span></span><br><span class="line">cd /usr/local/rocketmq/bin</span><br><span class="line">nohup sh mqbroker -c /usr/local/rocketmq/conf/2m-2s-async/broker-a.properties &gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line"></span><br><span class="line">nohup sh /usr/local/rocketmq/bin/mqbroker -c /usr/local/rocketmq/conf/2m-2s-async/broker-a.properties &gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">（10）验证启动的服务，查看启动日志，观察服务启动情况</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看 BrokerStartup 和 NamesrvStartup 服务是否存在</span></span><br><span class="line">jps</span><br><span class="line"></span><br><span class="line">tail -f -n 500 /usr/local/rocketmq/logs/rocketmqlogs/namesrv.log</span><br><span class="line"></span><br><span class="line">tail -f -n 500 /usr/local/rocketmq/logs/rocketmqlogs/broker.log</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">（11）关闭服务</span></span><br><span class="line">cd /usr/local/rocketmq/bin</span><br><span class="line">sh mqshutdown broker</span><br><span class="line">sh mqshutdown namesrv</span><br></pre></td></tr></table></figure><br><br><h2 id="RocketMQ-控制台部署与使用"><a href="#RocketMQ-控制台部署与使用" class="headerlink" title="RocketMQ-控制台部署与使用"></a>RocketMQ-控制台部署与使用</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git clone git@github.com:apache/rocketmq-dashboard.git</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打开工程，修改配置文件 namesrvAddrs 为我们的RocketMQ服务器地址 启动即可</span></span><br><span class="line"></span><br><span class="line">git clone git@github.com:Xuchengen/rocketmq-console.git</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">打开工程，修改配置文件 namesrvAddrs 为我们的RocketMQ服务器地址 启动即可</span></span><br></pre></td></tr></table></figure><br><br><br><h1 id="第3章-RocketMQ急速入门"><a href="#第3章-RocketMQ急速入门" class="headerlink" title="第3章 RocketMQ急速入门"></a>第3章 RocketMQ急速入门</h1><h2 id="QuickStart-生产者使用"><a href="#QuickStart-生产者使用" class="headerlink" title="QuickStart-生产者使用"></a>QuickStart-生产者使用</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.stu.quickstart;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.exception.MQBrokerException;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.exception.MQClientException;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.producer.DefaultMQProducer;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.producer.SendResult;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.common.message.Message;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.remoting.exception.RemotingException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Producer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> MQClientException, MQBrokerException, RemotingException, InterruptedException &#123;</span><br><span class="line">        <span class="comment">//（1)创建生产者对象DefaultMQProducer</span></span><br><span class="line">        <span class="type">DefaultMQProducer</span> <span class="variable">producer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultMQProducer</span>(<span class="string">&quot;test_quick_producer_name&quot;</span>);</span><br><span class="line">        <span class="comment">//（2）设置NamesrvAddr</span></span><br><span class="line">        producer.setNamesrvAddr(<span class="string">&quot;192.168.61.220:9876&quot;</span>);</span><br><span class="line">        <span class="comment">//（3）启动生产者服务</span></span><br><span class="line">        producer.start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//（4）创建消息并发送</span></span><br><span class="line">            <span class="type">Message</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Message</span>(</span><br><span class="line">                    <span class="string">&quot;test_quick_topic&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;tagB&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;key&quot;</span>+i,</span><br><span class="line">                    (<span class="string">&quot;hello RocketMQ &quot;</span>+i).getBytes()</span><br><span class="line">            );</span><br><span class="line">            <span class="type">SendResult</span> <span class="variable">sr</span> <span class="operator">=</span> producer.send(message);</span><br><span class="line">            System.out.println(<span class="string">&quot;sr = &quot;</span> + sr);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        producer.shutdown();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br><br><h2 id="QuickStart-消费者使用"><a href="#QuickStart-消费者使用" class="headerlink" title="QuickStart-消费者使用"></a>QuickStart-消费者使用</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.stu.quickstart;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.consumer.DefaultMQPushConsumer;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.consumer.listener.ConsumeConcurrentlyContext;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.consumer.listener.ConsumeConcurrentlyStatus;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.consumer.listener.MessageListenerConcurrently;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.client.exception.MQClientException;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.common.consumer.ConsumeFromWhere;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.common.message.MessageExt;</span><br><span class="line"><span class="keyword">import</span> org.apache.rocketmq.remoting.common.RemotingHelper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Consumer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> MQClientException &#123;</span><br><span class="line">        <span class="comment">//（1）创建消费者对象 DefaultMQPushConsumer</span></span><br><span class="line">        <span class="type">DefaultMQPushConsumer</span> <span class="variable">consumer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultMQPushConsumer</span>(<span class="string">&quot;test_quick_consumer_name&quot;</span>);</span><br><span class="line">        <span class="comment">//（2）设置NamesrvAddr</span></span><br><span class="line">        consumer.setNamesrvAddr(<span class="string">&quot;192.168.61.220:9876&quot;</span>);</span><br><span class="line">        <span class="comment">//（3）设置消费位置</span></span><br><span class="line">        consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_LAST_OFFSET);</span><br><span class="line">        <span class="comment">//（4）进行订阅主题subscribe</span></span><br><span class="line">        consumer.subscribe(<span class="string">&quot;test_quick_topic&quot;</span>,<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        <span class="comment">//（5）注册监听并消费 registerMessageListener</span></span><br><span class="line">        consumer.registerMessageListener(<span class="keyword">new</span> <span class="title class_">MessageListenerConcurrently</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> ConsumeConcurrentlyStatus <span class="title function_">consumeMessage</span><span class="params">(List&lt;MessageExt&gt; list, ConsumeConcurrentlyContext consumeConcurrentlyContext)</span> &#123;</span><br><span class="line">                <span class="type">MessageExt</span> <span class="variable">me</span> <span class="operator">=</span> list.get(<span class="number">0</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">                    <span class="type">String</span> <span class="variable">topic</span> <span class="operator">=</span> me.getTopic();</span><br><span class="line">                    <span class="type">String</span> <span class="variable">tags</span> <span class="operator">=</span> me.getTags();</span><br><span class="line">                    <span class="type">String</span> <span class="variable">keys</span> <span class="operator">=</span> me.getKeys();</span><br><span class="line"><span class="keyword">if</span>(keys.equals(<span class="string">&quot;key1&quot;</span>)) &#123;</span><br><span class="line">System.err.println(<span class="string">&quot;消息消费失败..&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">                    <span class="type">String</span> <span class="variable">msgBody</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(me.getBody(), RemotingHelper.DEFAULT_CHARSET);</span><br><span class="line">                    System.err.println(<span class="string">&quot;topic: &quot;</span> + topic + <span class="string">&quot;,tags: &quot;</span> + tags + <span class="string">&quot;, keys: &quot;</span> + keys + <span class="string">&quot;,body: &quot;</span> + msgBody);</span><br><span class="line"></span><br><span class="line">                &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line"><span class="type">int</span> <span class="variable">recousumeTimes</span> <span class="operator">=</span> me.getReconsumeTimes();</span><br><span class="line">System.err.println(<span class="string">&quot;recousumeTimes: &quot;</span> + recousumeTimes);</span><br><span class="line"><span class="keyword">if</span>(recousumeTimes == <span class="number">3</span>) &#123;</span><br><span class="line"><span class="comment">//记录日志....</span></span><br><span class="line"><span class="comment">//  做补偿处理</span></span><br><span class="line">                        System.out.println(<span class="string">&quot;记录日志....做补偿处理&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line">                    <span class="keyword">return</span> ConsumeConcurrentlyStatus.RECONSUME_LATER;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        consumer.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br><h2 id="四种集群环境构建详解"><a href="#四种集群环境构建详解" class="headerlink" title="四种集群环境构建详解"></a>四种集群环境构建详解</h2><img src="https://cdn.statically.io/gh/ratears/images-hosting@picx/picx/image.759u3wf0uyg0.webp" /><ul><li>单点模式</li><li>主从模式（主从模式环境构建可以保障消息的即时性与可靠性）</li><li>双主模式</li><li>双主双从模式、多主多从模式</li></ul><br><br><h2 id="主从模式集群环境构建与测试"><a href="#主从模式集群环境构建与测试" class="headerlink" title="主从模式集群环境构建与测试"></a>主从模式集群环境构建与测试</h2><ul><li><p><strong>主从模式环境构建可以保障消息的即时性与可靠性</strong></p></li><li><p><strong>环境准备</strong></p><ul><li><p>CentOS 7</p></li><li><p>JDK1.8+</p></li><li><p>RocketMQ 4.3.X</p></li></ul></li><li><p><strong>环境搭建</strong></p></li></ul><blockquote><p><font color='red'>PS：注意开通网络端口或关闭防火墙</font></p></blockquote><p>（1）配置hosts信息（两台机器）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hosts</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">192.168.61.221  rocketmq-nameserver1</span><br><span class="line">192.168.61.221  rocketmq-master1</span><br><span class="line">192.168.61.222  rocketmq-nameserver2</span><br><span class="line">192.168.61.222  rocketmq-master1-slave</span><br></pre></td></tr></table></figure><blockquote><p><font color='red'>下面步骤，我们先配置好一台机器（192.168.61.221）的环境，然后直接把文件拷贝到另一台机器即可</font></p></blockquote><p>（2）上传 apache-rocketmq.tar.gz 包到服务器 &#x2F;usr&#x2F;local&#x2F;src&#x2F;</p><p>（3）解压，创建软连接</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /usr/local/apache-rocketmq-4.3.0</span><br><span class="line">tar -zxvf /usr/local/src/apache-rocketmq.tar.gz -C /usr/local/apache-rocketmq-4.3.0</span><br><span class="line">ln -s /usr/local/apache-rocketmq-4.3.0 /usr/local/rocketmq</span><br></pre></td></tr></table></figure><p>（4）创建存储路径</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># store：rocketmq数据存储目录，commitlog：真正存储rocketmq 实际数据，consumequeue：逻辑存储，index 索引存储</span></span><br><span class="line"><span class="built_in">mkdir</span> /usr/local/rocketmq/store</span><br><span class="line"><span class="built_in">mkdir</span> /usr/local/rocketmq/store/commitlog</span><br><span class="line"><span class="built_in">mkdir</span> /usr/local/rocketmq/store/consumequeue</span><br><span class="line"><span class="built_in">mkdir</span> /usr/local/rocketmq/store/index</span><br></pre></td></tr></table></figure><p>（5）修改日志配置文件，日志全局替换</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /usr/local/rocketmq/logs</span><br><span class="line">cd /usr/local/rocketmq/conf &amp;&amp; sed -i &#x27;s#$&#123;user.home&#125;#/usr/local/rocketmq#g&#x27; *.xml</span><br></pre></td></tr></table></figure><p>（6）修改启动脚本参数</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/rocketmq/bin/runbroker.sh</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">===========================================================================================</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">JVM Configuration</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">===========================================================================================</span></span><br><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -server -Xms1g -Xmx1g -Xmn512m&quot;</span><br><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -XX:+UseG1GC -XX:G1HeapRegionSize=16m -XX:G1ReservePercent=25 -XX:InitiatingHeapOccupancyPercent=30 -XX:SoftRefLRUPolicyMSPerMB=0 -XX:SurvivorRatio=8&quot;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/rocketmq/bin/runserver.sh</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">===========================================================================================</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">JVM Configuration</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">===========================================================================================</span></span><br><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -server -Xms1g -Xmx1g -Xmn512m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m&quot;</span><br><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125; -XX:+UseConcMarkSweepGC -XX:+UseCMSCompactAtFullCollection -XX:CMSInitiatingOccupancyFraction=70 -XX:+CMSParallelRemarkEnabled -XX:SoftRefLRUPolicyMSPerMB=0 -XX:+CMSClassUnloadingEnabled -XX:SurvivorRatio=8  -XX:-UseParNewGC&quot;</span><br></pre></td></tr></table></figure><p>（7）配置RocketMQ配置文件（2台机器）</p><ul><li>192.168.61.221 &amp; 192.168.61.222</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/rocketmq/conf/2m-2s-async/broker-a.properties</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">所属集群名字</span></span><br><span class="line">brokerClusterName=rocketmq-cluster</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">broker 名字，注意此处不同的配置文件填写的不一样</span></span><br><span class="line">brokerName=broker-a</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">0 表示 Master，&gt;0 表示 Slave</span></span><br><span class="line">brokerId=0</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">nameServer 地址，分号分割</span></span><br><span class="line">namesrvAddr=rocketmq-nameserver1:9876;rocketmq-nameserver2:9876</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在发送消息时，自动创建服务器不存在的 topic，默认创建的队列数</span></span><br><span class="line">defaultTopicQueueNums=4</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">是否允许 Broker 自动创建 Topic，建议线下开启，线上关闭</span></span><br><span class="line">autoCreateTopicEnable=true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">是否允许 Broker 自动创建订阅组，建议线下开启，线上关闭</span></span><br><span class="line">autoCreateSubscriptionGroup=true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Broker 对外服务的监听端口</span></span><br><span class="line">listenPort=10911</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除文件时间点，默认凌晨 4 点</span></span><br><span class="line">deleteWhen=04</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">文件保留时间，默认 48 小时</span></span><br><span class="line">fileReservedTime=120</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">commitLog 每个文件的大小默认 1G</span></span><br><span class="line">mapedFileSizeCommitLog=1073741824</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ConsumeQueue 每个文件默认存 30W 条，根据业务情况调整</span></span><br><span class="line">mapedFileSizeConsumeQueue=300000</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">destroyMapedFileIntervalForcibly=120000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">redeleteHangedFileInterval=120000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">检测物理文件磁盘空间</span></span><br><span class="line">diskMaxUsedSpaceRatio=88</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">存储路径</span></span><br><span class="line">storePathRootDir=/usr/local/rocketmq/store</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">commitLog 存储路径</span></span><br><span class="line">storePathCommitLog=/usr/local/rocketmq/store/commitlog</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">消费队列存储路径存储路径</span></span><br><span class="line">storePathConsumeQueue=/usr/local/rocketmq/store/consumequeue</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">消息索引存储路径</span></span><br><span class="line">storePathIndex=/usr/local/rocketmq/store/index</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">checkpoint 文件存储路径</span></span><br><span class="line">storeCheckpoint=/usr/local/rocketmq/store/checkpoint</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">abort 文件存储路径</span></span><br><span class="line">abortFile=/usr/local/rocketmq/store/abort</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">限制的消息大小</span></span><br><span class="line">maxMessageSize=65536</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushCommitLogLeastPages=4</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushConsumeQueueLeastPages=2</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushCommitLogThoroughInterval=10000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushConsumeQueueThoroughInterval=60000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Broker 的角色</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- ASYNC_MASTER 异步复制 Master</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SYNC_MASTER 同步双写 Master</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SLAVE</span></span><br><span class="line">brokerRole=ASYNC_MASTER</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">刷盘方式</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- ASYNC_FLUSH 异步刷盘</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SYNC_FLUSH 同步刷盘</span></span><br><span class="line">flushDiskType=ASYNC_FLUSH</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">checkTransactionMessageEnable=<span class="literal">false</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">发消息线程池数量</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">sendMessageThreadPoolNums=128</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">拉消息线程池数量</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">pullMessageThreadPoolNums=128</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/rocketmq/conf/2m-2s-async/broker-a-s.properties</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">所属集群名字</span></span><br><span class="line">brokerClusterName=rocketmq-cluster</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">broker 名字，注意此处不同的配置文件填写的不一样</span></span><br><span class="line">brokerName=broker-b</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">0 表示 Master，&gt;0 表示 Slave</span></span><br><span class="line">brokerId=1</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">nameServer 地址，分号分割</span></span><br><span class="line">namesrvAddr=rocketmq-nameserver1:9876;rocketmq-nameserver2:9876</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在发送消息时，自动创建服务器不存在的 topic，默认创建的队列数</span></span><br><span class="line">defaultTopicQueueNums=4</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">是否允许 Broker 自动创建 Topic，建议线下开启，线上关闭</span></span><br><span class="line">autoCreateTopicEnable=true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">是否允许 Broker 自动创建订阅组，建议线下开启，线上关闭</span></span><br><span class="line">autoCreateSubscriptionGroup=true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Broker 对外服务的监听端口</span></span><br><span class="line">listenPort=10911</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除文件时间点，默认凌晨 4 点</span></span><br><span class="line">deleteWhen=04</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">文件保留时间，默认 48 小时</span></span><br><span class="line">fileReservedTime=120</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">commitLog 每个文件的大小默认 1G</span></span><br><span class="line">mapedFileSizeCommitLog=1073741824</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ConsumeQueue 每个文件默认存 30W 条，根据业务情况调整</span></span><br><span class="line">mapedFileSizeConsumeQueue=300000</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">destroyMapedFileIntervalForcibly=120000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">redeleteHangedFileInterval=120000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">检测物理文件磁盘空间</span></span><br><span class="line">diskMaxUsedSpaceRatio=88</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">存储路径</span></span><br><span class="line">storePathRootDir=/usr/local/rocketmq/store</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">commitLog 存储路径</span></span><br><span class="line">storePathCommitLog=/usr/local/rocketmq/store/commitlog</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">消费队列存储路径存储路径</span></span><br><span class="line">storePathConsumeQueue=/usr/local/rocketmq/store/consumequeue</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">消息索引存储路径</span></span><br><span class="line">storePathIndex=/usr/local/rocketmq/store/index</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">checkpoint 文件存储路径</span></span><br><span class="line">storeCheckpoint=/usr/local/rocketmq/store/checkpoint</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">abort 文件存储路径</span></span><br><span class="line">abortFile=/usr/local/rocketmq/store/abort</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">限制的消息大小</span></span><br><span class="line">maxMessageSize=65536</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushCommitLogLeastPages=4</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushConsumeQueueLeastPages=2</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushCommitLogThoroughInterval=10000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushConsumeQueueThoroughInterval=60000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Broker 的角色</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- ASYNC_MASTER 异步复制 Master</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SYNC_MASTER 同步双写 Master</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SLAVE</span></span><br><span class="line">brokerRole=SLAVE</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">刷盘方式</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- ASYNC_FLUSH 异步刷盘</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SYNC_FLUSH 同步刷盘</span></span><br><span class="line">flushDiskType=ASYNC_FLUSH</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">checkTransactionMessageEnable=<span class="literal">false</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">发消息线程池数量</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">sendMessageThreadPoolNums=128</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">拉消息线程池数量</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">pullMessageThreadPoolNums=128</span></span><br></pre></td></tr></table></figure><p>（8）把配置好的文件上传到另一台机器</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -prv /usr/local/apache-rocketmq-4.3.0 root@192.168.61.222:/usr/local/</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进入 192.168.61.222 机器的 ，创建软连接</span></span><br><span class="line">ln -s /usr/local/apache-rocketmq-4.3.0 /usr/local/rocketmq</span><br></pre></td></tr></table></figure><p>（9）启动 NameServer</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/rocketmq/bin</span><br><span class="line">nohup sh mqnamesrv &amp;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup sh /usr/local/rocketmq/bin/mqnamesrv &amp;</span><br></pre></td></tr></table></figure><p>（9）启动 BrokerServer（两台机器）</p><ul><li>192.168.61.221</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/rocketmq/bin</span><br><span class="line">nohup sh mqbroker -c /usr/local/rocketmq/conf/2m-2s-async/broker-a.properties &gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或者</span></span><br><span class="line">nohup sh /usr/local/rocketmq/bin/mqbroker -c /usr/local/rocketmq/conf/2m-2s-async/broker-a.properties &gt;/dev/null 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><ul><li>192.168.61.222</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/rocketmq/bin</span><br><span class="line">nohup sh mqbroker -c /usr/local/rocketmq/conf/2m-2s-async/broker-a-s.properties &gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或者</span></span><br><span class="line">nohup sh /usr/local/rocketmq/bin/mqbroker -c /usr/local/rocketmq/conf/2m-2s-async/broker-a-s.properties &gt;/dev/null 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><p>（10）验证启动的服务，查看启动日志，观察服务启动情况（两台机器）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看 BrokerStartup 和 NamesrvStartup 服务是否存在</span></span><br><span class="line">jps</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">PS：注意开通网络端口或关闭防火墙</span></span><br><span class="line">tail -f -n 500 /usr/local/rocketmq/logs/rocketmqlogs/namesrv.log</span><br><span class="line"></span><br><span class="line">tail -f -n 500 /usr/local/rocketmq/logs/rocketmqlogs/broker.log</span><br></pre></td></tr></table></figure><p>（11）关闭服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/rocketmq/bin</span><br><span class="line">sh mqshutdown broker</span><br><span class="line">sh mqshutdown namesrv</span><br></pre></td></tr></table></figure><br><br><h2 id="模拟故障"><a href="#模拟故障" class="headerlink" title="模拟故障"></a>模拟故障</h2><ul><li>投递一条消息后，关闭主节点；从节点继续可以提供消费者数据进行消费，但是不能接收消息；主节点上线后进行消费进度offset同步</li></ul><br><br><br><h1 id="第4章-RocketMQ生产者核心讲解"><a href="#第4章-RocketMQ生产者核心讲解" class="headerlink" title="第4章 RocketMQ生产者核心讲解"></a>第4章 RocketMQ生产者核心讲解</h1><h2 id="生产者-核心参数详解"><a href="#生产者-核心参数详解" class="headerlink" title="生产者-核心参数详解"></a>生产者-核心参数详解</h2><ul><li>producerGroup :组名；一个应用中唯一</li><li>createTopicKey；生产者端创建topic。最佳实战：一般由架构组创建，不把这个暴露</li><li>defaultTopicQueueNums(默4)；默认的一个topic下有4个队列</li><li>sendMsgTimeout (单位:ms)；发送消息超时时间</li><li>compressMsgBodyOverHowmuch(默认压缩字节4096)，消息超过4096字节就压缩消息体</li><li>retryTimesWhenSendFailed (可配置）消息发送失败重试机制</li><li>retryAnotherBrokerWhenNotStoreOK(默认false)；没有存储成功去其它brocker进行存储</li><li>maxMessageSize(默认128K)，默认最大消息大小</li></ul><br><br><h2 id="主从同步机制分析"><a href="#主从同步机制分析" class="headerlink" title="主从同步机制分析"></a>主从同步机制分析</h2><ul><li>Master - Slave主从同步</li><li>同步信息：数据内容（原生socket同步）+元数据信息（使用Netty，定时任务同步）</li><li>元数据同步:Broker 角色识别，为Slave则启动同步任务</li><li>消息同步: HAService、 HAconnection、 WaitNotfiyQbiect</li></ul><br><br><h2 id="同步消息发送"><a href="#同步消息发送" class="headerlink" title="同步消息发送"></a>同步消息发送</h2><ul><li>消息的同步发送:producer.send(msg)</li><li>同步发送消息核心实现: DefaultMQProducerlmpl</li></ul><br><br><h2 id="异步消息发送"><a href="#异步消息发送" class="headerlink" title="异步消息发送"></a>异步消息发送</h2><ul><li>producer.send(Message msg, SendCallback sendCallback)</li><li>异步发送消息核心实现: DefaultMQProducerlmpl</li></ul><br><br><h2 id="Netty底层通信框架解析"><a href="#Netty底层通信框架解析" class="headerlink" title="Netty底层通信框架解析"></a>Netty底层通信框架解析</h2><img src="https://cdn.statically.io/gh/ratears/images-hosting@picx/picx/image.2jp7wc19buw0.webp" /><br><br><h2 id="生产者-消息返回状态详解"><a href="#生产者-消息返回状态详解" class="headerlink" title="生产者-消息返回状态详解"></a>生产者-消息返回状态详解</h2><ul><li>SEND_OK</li><li>FLUSH_DISK_TIMEOUT</li><li>FLUSH_SLAVE_TIMEOUT</li><li>SLAVE_NOT_AVAILABLE</li></ul><br><br><h2 id="生产者-延迟消息"><a href="#生产者-延迟消息" class="headerlink" title="生产者-延迟消息"></a>生产者-延迟消息</h2><ul><li>延迟消息:消息发到 Broker 后，要特定的时间才会被Consumer消费</li><li>目前只支持固定精度的定时消息</li><li>MessageStoreConfig配置类&amp;ScheduleMessageService任务类</li><li>setDelayTimeLevel方法设置</li></ul><br><br><h2 id="生产者-自定义消息发送规则"><a href="#生产者-自定义消息发送规则" class="headerlink" title="生产者-自定义消息发送规则"></a>生产者-自定义消息发送规则</h2><ul><li>MessageQueueSelector</li><li>producer.send(Msg, selector, Obj)</li></ul><br><br><br><h1 id="第5章-RocketMQ消费者核心讲解"><a href="#第5章-RocketMQ消费者核心讲解" class="headerlink" title="第5章 RocketMQ消费者核心讲解"></a>第5章 RocketMQ消费者核心讲解</h1><h2 id="PushConsumer核心参数详解"><a href="#PushConsumer核心参数详解" class="headerlink" title="PushConsumer核心参数详解"></a>PushConsumer核心参数详解</h2><ul><li>consumeFromWhere</li><li>allocateMessageQueueStrategy</li><li>subscription</li><li>offsetStore</li><li>consumeThreadMin&#x2F;consumeThreadMax</li><li>consumeConcurrentlyMaxSpan&#x2F; pullThresholdForQueue</li><li>pullinterval&#x2F; pullBatchSize</li><li>consumeMessageBatchMaxSize</li></ul><br><br><h2 id="PushConsumer消费模式-集群模式"><a href="#PushConsumer消费模式-集群模式" class="headerlink" title="PushConsumer消费模式-集群模式"></a>PushConsumer消费模式-集群模式</h2><ul><li>Clustering模式(默认)</li><li>GroupName用于把多个Consumer组织到一起；相同GroupName的Consumer只消费所订阅消息的一部分；目的:达到天然的负载均衡机制</li></ul><br><br><h2 id="PushConsumer消费模式-广播模式"><a href="#PushConsumer消费模式-广播模式" class="headerlink" title="PushConsumer消费模式-广播模式"></a>PushConsumer消费模式-广播模式</h2><ul><li>Broadcasting模式(广播模式)</li><li>同一个ConsumerGroup里的Consumer都消费订阅Topic全部信息；也就是一条消息会被每一个Consumer消费</li><li>setMessageModel方法</li></ul><br><br><h2 id="消息存储核心-偏移量Offset"><a href="#消息存储核心-偏移量Offset" class="headerlink" title="消息存储核心-偏移量Offset"></a>消息存储核心-偏移量Offset</h2><ul><li>Offset是消息消费进度的核心</li><li>Offset指某个topic下的一条消息在某个MessageQueue里的位置</li><li>通过Offset可以进行定位到这条消息</li><li>Offset的存储实现分为远程文件类型和本地文件类型两种</li></ul><br><br><h2 id="集群模式-RemoteBrokerOffsetStore解析"><a href="#集群模式-RemoteBrokerOffsetStore解析" class="headerlink" title="集群模式-RemoteBrokerOffsetStore解析"></a>集群模式-RemoteBrokerOffsetStore解析</h2><ul><li>默认集群模式clustering，采用远程文件存储Offset</li><li>本质上因为多消费模式，每个Consumer消费所订阅主题的一部分</li><li>这种情况需要broker控制offset的值，使用RemoteBrokerOffsetStore</li></ul><br><br><h2 id="广播模式-LocalFileOffsetStore解析"><a href="#广播模式-LocalFileOffsetStore解析" class="headerlink" title="广播模式-LocalFileOffsetStore解析"></a>广播模式-LocalFileOffsetStore解析</h2><ul><li>广播模式下，由于每个Consumer都会收到消息且消费</li><li>各个Consumer之间没有任何干扰，独立线程消费</li><li>所以使用LocalFileOffsetStore，也就是把Offset存储到本地</li></ul><br><br><h2 id="消费者长轮询模式分析"><a href="#消费者长轮询模式分析" class="headerlink" title="消费者长轮询模式分析"></a>消费者长轮询模式分析</h2><ul><li>DefaultPushConsumer是使用长轮询模式进行实现的</li><li>通常主流消息获取模式:Push消息推送模式&amp;Pull消息拉取模式</li><li>长轮询机制</li></ul><br><br><h2 id="RocketMQ消费者-PullConsumer使用"><a href="#RocketMQ消费者-PullConsumer使用" class="headerlink" title="RocketMQ消费者-PullConsumer使用"></a>RocketMQ消费者-PullConsumer使用</h2><ul><li>消息拉取方式: DefaultMQPullConsumer</li><li>Pull方式主要做了三件事：<ul><li>获取Message Queue并遍历</li><li>维护OffsetStore</li><li>根据不同的消息状态做不同的处理</li></ul></li></ul><br><br><br><h1 id="第6章-RocketMQ核心原理解析"><a href="#第6章-RocketMQ核心原理解析" class="headerlink" title="第6章 RocketMQ核心原理解析"></a>第6章 RocketMQ核心原理解析</h1><h2 id="消息的存储结构"><a href="#消息的存储结构" class="headerlink" title="消息的存储结构"></a>消息的存储结构</h2><img src="https://cdn.statically.io/gh/ratears/images-hosting@picx/picx/image.7955o55p1mo.webp" /><br><br><h2 id="同步刷盘与异步刷盘"><a href="#同步刷盘与异步刷盘" class="headerlink" title="同步刷盘与异步刷盘"></a>同步刷盘与异步刷盘</h2><ul><li>RocketMQ消息存储:内存+磁盘存储，两种刷盘方式</li><li>异步刷盘</li><li>同步刷盘</li></ul><br><br><h2 id="同步复制与异步复制"><a href="#同步复制与异步复制" class="headerlink" title="同步复制与异步复制"></a>同步复制与异步复制</h2><ul><li>同一组Broker有Master - Slave角色</li><li>异步复制</li><li>同步复制</li></ul><br><br><h2 id="高可用机制"><a href="#高可用机制" class="headerlink" title="高可用机制"></a>高可用机制</h2><ul><li>Master -Slave 高可用</li><li>Brokerld</li><li>Master读、写，Slave只读</li><li>当Master繁忙或者不可用时，可以自动切换到Slave读取消息</li></ul><br><br><h2 id="NameServer协调者"><a href="#NameServer协调者" class="headerlink" title="NameServer协调者"></a>NameServer协调者</h2><ul><li>为什么需要NameServer</li><li>NameServer是整个集群的状态服务器</li><li>NameServer部署、相互独立</li><li>为什么不用zookeeper?</li><li>NameServer维护元数据信息</li></ul><br><br><br><h1 id="第7章-双主双从部署实战"><a href="#第7章-双主双从部署实战" class="headerlink" title="第7章 双主双从部署实战"></a>第7章 双主双从部署实战</h1><br><br><br><h1 id="第8章-购物车、订单与支付场景抗压需求分析"><a href="#第8章-购物车、订单与支付场景抗压需求分析" class="headerlink" title="第8章 购物车、订单与支付场景抗压需求分析"></a>第8章 购物车、订单与支付场景抗压需求分析</h1><br><br><br><h1 id="第9章-微服务基础设施构建"><a href="#第9章-微服务基础设施构建" class="headerlink" title="第9章 微服务基础设施构建"></a>第9章 微服务基础设施构建</h1><br><br><br><h1 id="第10章-高并发抗压实战"><a href="#第10章-高并发抗压实战" class="headerlink" title="第10章 高并发抗压实战"></a>第10章 高并发抗压实战</h1><br><br><br><h1 id="第11章-RocketMQ分布式事务消息"><a href="#第11章-RocketMQ分布式事务消息" class="headerlink" title="第11章 RocketMQ分布式事务消息"></a>第11章 RocketMQ分布式事务消息</h1><br><br><br><h1 id="第12章-RocketMQ顺序消费与微服务解耦"><a href="#第12章-RocketMQ顺序消费与微服务解耦" class="headerlink" title="第12章 RocketMQ顺序消费与微服务解耦"></a>第12章 RocketMQ顺序消费与微服务解耦</h1><br><br><br><h1 id="第13章-数据过滤与性能提升"><a href="#第13章-数据过滤与性能提升" class="headerlink" title="第13章 数据过滤与性能提升"></a>第13章 数据过滤与性能提升</h1><br><br><br><h1 id="第14章-课程总结"><a href="#第14章-课程总结" class="headerlink" title="第14章 课程总结"></a>第14章 课程总结</h1><br><br><br><h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><ul><li><a class="link"   href="https://coding.imooc.com/class/chapter/292.html#Anchor" >RocketMQ核心技术精讲与高并发抗压实战——RocketMQ核心API+抗压分析与实战+分布式事务+顺序消费与微服务解耦+数据过滤与性能提升<i class="fas fa-external-link-alt"></i></a></li></ul><br><br><br><h1 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h1><blockquote><ol><li>生产者核心配合和代码需要实践</li><li>如何保证消息可靠投递，这是一个重点，可以参考老师的免费课，rabbitmq里的内容</li></ol></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;br&gt;

&lt;h1 id=&quot;第1章-课程介绍&quot;&gt;&lt;a href=&quot;#第1章-课程介绍&quot; class=&quot;headerlink&quot; title=&quot;第1章 课程介绍&quot;&gt;&lt;/a&gt;第1章 课程介绍&lt;/h1&gt;&lt;h2 id=&quot;两大模块&quot;&gt;&lt;a href=&quot;#两大模块&quot; class=&quot;header</summary>
      
    
    
    
    <category term="MQ" scheme="https://ratears.github.io/dev.ratears.life/categories/MQ/"/>
    
    <category term="RocketMQ" scheme="https://ratears.github.io/dev.ratears.life/categories/MQ/RocketMQ/"/>
    
    
    <category term="MQ" scheme="https://ratears.github.io/dev.ratears.life/tags/MQ/"/>
    
    <category term="RocketMQ" scheme="https://ratears.github.io/dev.ratears.life/tags/RocketMQ/"/>
    
  </entry>
  
  <entry>
    <title>Software Development Learning Routes And Resources</title>
    <link href="https://ratears.github.io/dev.ratears.life/2023/Software-Development-Learning-Routes-And-Resources/"/>
    <id>https://ratears.github.io/dev.ratears.life/2023/Software-Development-Learning-Routes-And-Resources/</id>
    <published>2023-10-15T18:36:49.822Z</published>
    <updated>2023-10-15T18:36:49.822Z</updated>
    
    <content type="html"><![CDATA[<br><h1 id="Route"><a href="#Route" class="headerlink" title="Route"></a>Route</h1><ul><li>RocketMQ MQ</li><li>JVM Java</li><li>MySQL</li><li>other：git maven linux mongodb</li></ul><h1 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h1><h2 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h2><table><thead><tr><th align="center">explain</th><th align="left">content</th></tr></thead><tbody><tr><td align="center">学习目标</td><td align="left">熟悉JVM内存结构，垃圾回收算法等核心知识<br>熟悉JVM调优实践<br>应对高阶JVM面试题（包括笔试题、面试概述题、以及JVM实践和调优）</td></tr><tr><td align="center">入门</td><td align="left">尚硅谷宋红康JVM全套教程（详解java虚拟机）<br>深入拆解 Java 虚拟机<br/>从 0 开始带你成为JVM高手<br>深入浅出 Java 虚拟机_LG<br></td></tr><tr><td align="center">系统全面&#x2F;进阶</td><td align="left">《深入理解Java虚拟机（第3版）》<br>构建JVM知识体系 解决Java工程师必会的工作&#x2F;面试难点<br>JVM与GC调优_大厂学苑<br>深入JVM内核—原理、诊断与优化<br></td></tr><tr><td align="center">进阶&#x2F;面试</td><td align="left">JVM七大核心系统精讲 从基础理论到高级应用<br></td></tr><tr><td align="center">待定</td><td align="left">马士兵jvm、龙果学院 叶子猿 深入理解Java虚拟机、深入理解和实践JVM、反射和内省技术_腾讯课堂、一次性精通JVM JAVA虚拟机</td></tr></tbody></table><br><br><br><h1 id="DataBase"><a href="#DataBase" class="headerlink" title="DataBase"></a>DataBase</h1><h2 id="MySQL（软件开发-使用方向）"><a href="#MySQL（软件开发-使用方向）" class="headerlink" title="MySQL（软件开发&#x2F;使用方向）"></a>MySQL（软件开发&#x2F;使用方向）</h2><table><thead><tr><th align="center">explain</th><th align="left">content</th><th>remark</th></tr></thead><tbody><tr><td align="center">学习目标</td><td align="left">精通MySQL，成为数据库架构师</td><td></td></tr><tr><td align="center">入门</td><td align="left">零基础入门 详解企业主流数据库MySQL8.0<br>MySQL、Redis、MongoDB 数据库一课通【没有资源】<br>《MySQL是怎样使用的 快速入门MySQL》<br>MySQL 必知必会（geek）<br>《MySQL必知必会》<br></td><td></td></tr><tr><td align="center">实战</td><td align="left">阿里新零售数据库设计与实战 （升级版）<br>高并发 高性能 高可用 MySQL 实战<br></td><td></td></tr><tr><td align="center">系统全面</td><td align="left">6大数据库，挖掘7种Java业务下的分布式存储更优解<br/>《MySQL是怎样运行的 : 从根儿上理解 MySQL》</td><td></td></tr><tr><td align="center">进阶</td><td align="left">MySQL提升课程 全面讲解MySQL架构设计<br/>技术大牛成长课,从0到1带你手写一个数据库系统<br/>MySQL面试指南 中高级开发者的晋升加薪利器<br/>MySQL 实战 45 讲<br>《高性能MySQL（第4版）》</td><td></td></tr></tbody></table><ul><li>路线：先掌握最基础的mysql知识，然后学习mysql的架构设计，内部设计，然后学习实战课程</li><li>学习资料：<ul><li>MySQL 必知必会（geek）、零基础入门 详解企业主流数据库MySQL8.0</li><li>MySQL提升课程 全面讲解MySQL架构设计</li><li>高并发 高性能 高可用 MySQL 实战</li><li>再来一个其它非主流平台的mysql课程：MySQL精讲训练营、7天实战集训营-带你锤碎MySQL</li></ul></li></ul><br><br><h2 id="MySQL（运维-架构-DBA方向）"><a href="#MySQL（运维-架构-DBA方向）" class="headerlink" title="MySQL（运维&#x2F;架构&#x2F;DBA方向）"></a>MySQL（运维&#x2F;架构&#x2F;DBA方向）</h2><table><thead><tr><th align="center">explain</th><th align="left">content</th></tr></thead><tbody><tr><td align="center">学习目标</td><td align="left"></td></tr><tr><td align="center">入门</td><td align="left"></td></tr><tr><td align="center">系统全面</td><td align="left">DBA数据库工程师（imooc）【没有资源】<br/></td></tr><tr><td align="center">进阶</td><td align="left"></td></tr></tbody></table><br><br><h2 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h2><table><thead><tr><th align="center">explain</th><th align="left">content</th></tr></thead><tbody><tr><td align="center">学习目标</td><td align="left">熟练、实践。技能可以写在简历上</td></tr><tr><td align="center">入门</td><td align="left">【编程不良人】MongoDB最新实战教程<br></td></tr><tr><td align="center">系统全面</td><td align="left">玩转MongoDB4.0(最新版) 从入门到实践</td></tr><tr><td align="center">进阶</td><td align="left">MongoDB 高手课</td></tr></tbody></table><br><br><br><h1 id="MQ"><a href="#MQ" class="headerlink" title="MQ"></a>MQ</h1><h2 id="MQ-1"><a href="#MQ-1" class="headerlink" title="MQ"></a>MQ</h2><table><thead><tr><th align="center">explain</th><th align="left">content</th></tr></thead><tbody><tr><td align="center">学习目标</td><td align="left"></td></tr><tr><td align="center">入门</td><td align="left">从零开始带你成为消息中间件实战高手<br>深入拆解消息队列 47 讲<br/>消息队列高手课</td></tr><tr><td align="center">系统全面</td><td align="left">深入拆解消息队列 47 讲<br/>消息队列高手课</td></tr><tr><td align="center">进阶</td><td align="left"></td></tr></tbody></table><br><br><h2 id="RocketMQ"><a href="#RocketMQ" class="headerlink" title="RocketMQ"></a>RocketMQ</h2><table><thead><tr><th align="center">explain</th><th align="left">content</th></tr></thead><tbody><tr><td align="center">学习目标</td><td align="left"></td></tr><tr><td align="center">入门</td><td align="left">JAVA-ACE-架构师系列视频课程- RocketMQ（上）（下）<br>RocketMQ核心技术精讲与高并发抗压实战</td></tr><tr><td align="center">系统全面</td><td align="left">RocketMQ官方文档</td></tr><tr><td align="center">进阶</td><td align="left"></td></tr><tr><td align="center">待定</td><td align="left">价值198元新版本RocketMQ4.X教程消息队列</td></tr></tbody></table><br><br><br><h1 id="Development-Tools"><a href="#Development-Tools" class="headerlink" title="Development Tools"></a>Development Tools</h1><h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><table><thead><tr><th align="center">explain</th><th align="left">content</th></tr></thead><tbody><tr><td align="center">学习目标</td><td align="left">熟悉常用操作，了解基本原理，了解常见问题解决方式<br>熟悉作为技术领导需要掌握的Git团队协作技能</td></tr><tr><td align="center">入门</td><td align="left">玩转 Git 三剑客</td></tr><tr><td align="center">系统全面</td><td align="left"><a class="link"   href="https://git-scm.com/book/zh/v2" >Git 官方文档<i class="fas fa-external-link-alt"></i></a></td></tr><tr><td align="center">进阶</td><td align="left">《Git权威指南》</td></tr></tbody></table><br><br><br><h2 id="GitHub"><a href="#GitHub" class="headerlink" title="GitHub"></a>GitHub</h2><br><br><br><h1 id="template"><a href="#template" class="headerlink" title="template"></a>template</h1><table><thead><tr><th align="center">explain</th><th align="left">content</th></tr></thead><tbody><tr><td align="center">学习目标</td><td align="left"></td></tr><tr><td align="center">入门</td><td align="left"></td></tr><tr><td align="center">系统全面</td><td align="left"></td></tr><tr><td align="center">进阶</td><td align="left"></td></tr></tbody></table><br><br><br>]]></content>
    
    
      
      
    <summary type="html">&lt;br&gt;

&lt;h1 id=&quot;Route&quot;&gt;&lt;a href=&quot;#Route&quot; class=&quot;headerlink&quot; title=&quot;Route&quot;&gt;&lt;/a&gt;Route&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;RocketMQ MQ&lt;/li&gt;
&lt;li&gt;JVM Java&lt;/li&gt;
&lt;li&gt;MySQL&lt;/</summary>
      
    
    
    
    <category term="Learning" scheme="https://ratears.github.io/dev.ratears.life/categories/Learning/"/>
    
    
    <category term="Learning" scheme="https://ratears.github.io/dev.ratears.life/tags/Learning/"/>
    
  </entry>
  
  <entry>
    <title>《玩转 Git 三剑客》Study Notes</title>
    <link href="https://ratears.github.io/dev.ratears.life/2023/%E3%80%8A%E7%8E%A9%E8%BD%AC-Git-%E4%B8%89%E5%89%91%E5%AE%A2%E3%80%8BStudy-Notes/"/>
    <id>https://ratears.github.io/dev.ratears.life/2023/%E3%80%8A%E7%8E%A9%E8%BD%AC-Git-%E4%B8%89%E5%89%91%E5%AE%A2%E3%80%8BStudy-Notes/</id>
    <published>2023-10-14T08:21:20.125Z</published>
    <updated>2023-10-14T08:21:20.125Z</updated>
    
    <content type="html"><![CDATA[<br><h1 id="第一章：Git基础-13讲"><a href="#第一章：Git基础-13讲" class="headerlink" title="第一章：Git基础 (13讲)"></a>第一章：Git基础 (13讲)</h1><h2 id="版本控制系统-VCS"><a href="#版本控制系统-VCS" class="headerlink" title="版本控制系统 &#x2F; VCS"></a>版本控制系统 &#x2F; VCS</h2><ul><li><strong>版本控制是一种记录一个或若干文件内容变化，以便将来查阅特定版本修订情况的系统</strong></li></ul><h3 id="本地版本控制系统"><a href="#本地版本控制系统" class="headerlink" title="本地版本控制系统"></a>本地版本控制系统</h3><ul><li>⽤用⽬目录拷⻉贝区别不不同版本</li><li>公共⽂文件容易易被覆盖</li><li>成员沟通成本很⾼高，代码集成效率低下</li></ul><h3 id="集中式-VCS"><a href="#集中式-VCS" class="headerlink" title="集中式 VCS"></a>集中式 VCS</h3><ul><li>有集中的版本管理理服务器器</li><li>具备文件版本管理和分支管理能力</li><li>集成效率有明显地提⾼高</li><li>客户端必须时刻和服务器器相连</li></ul><h3 id="分布式-VCS"><a href="#分布式-VCS" class="headerlink" title="分布式 VCS"></a>分布式 VCS</h3><ul><li>服务端和客户端都有完整的版本库</li><li>脱离服务端，客户端照样可以管理理版本</li><li>查看历史和版本⽐比较等多数操作，都不不需要访问服务器器，⽐比集中式 VCS 更更能提⾼高版本管理理效率</li></ul><br><br><h2 id="Git-的特点"><a href="#Git-的特点" class="headerlink" title="Git 的特点"></a>Git 的特点</h2><ul><li>最优的存储能⼒力</li><li>非凡的性能</li><li>开源的</li><li>很容易易做备份</li><li>支持离线操作</li><li>很容易易定制⼯工作流程</li></ul><br><br><h2 id="Git-最小配置"><a href="#Git-最小配置" class="headerlink" title="Git 最小配置"></a>Git 最小配置</h2><ul><li>配置用户信息</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &#x27;user_name&#x27;</span><br><span class="line">git config --global user.email &#x27;user_email&#x27;</span><br></pre></td></tr></table></figure><ul><li>config 的三个作用域（缺省等同于 local）</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="built_in">local</span>只对仓库有效</span></span><br><span class="line">git config --local</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">global对登录⽤用户所有仓库有效</span></span><br><span class="line">git config --global</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">system对系统的所有⽤用户有效</span></span><br><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git config --system</span></span><br></pre></td></tr></table></figure><ul><li>显示 config 的配置</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --list --local</span><br><span class="line">git config --list --global</span><br><span class="line">git config --list --system</span><br></pre></td></tr></table></figure><ul><li>设置（缺省等同于 local）</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --local</span><br><span class="line">git config --global</span><br><span class="line">git config --system</span><br></pre></td></tr></table></figure><ul><li>清除</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --unset --local user.name</span><br><span class="line">git config --unset --global user.name</span><br><span class="line">git config --unset --system user.name</span><br></pre></td></tr></table></figure><ul><li>优先级：<code>local &gt; global &gt; system</code></li></ul><br><br><h2 id="Git-基本命令"><a href="#Git-基本命令" class="headerlink" title="Git 基本命令"></a>Git 基本命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd [project_dir]</span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line">git init [project_name]</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li>工作目录、暂存区、版本历史</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git add [file1] [file2]</span><br><span class="line"></span><br><span class="line">git commit -m&#x27;add file remark&#x27;</span><br><span class="line"></span><br><span class="line">git mv [filename] [filename]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加到暂存区后直接commit</span></span><br><span class="line">git commit -am&#x27;add file remark&#x27;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">直接切换到某个commit，即分离头指针</span></span><br><span class="line">git checkout [commit_id]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">基于某个存在的分支（commit），创建新分支，并检出，切换到该新分支</span></span><br><span class="line">git checkout -b [new branch name] [branch_name/commit_id]</span><br><span class="line"></span><br><span class="line">git diff [commit_id] [commit_id]</span><br><span class="line"></span><br><span class="line">git diff HEAD HEAD^1/HEAD^^/HEAD~1/HEAD~2</span><br></pre></td></tr></table></figure><h3 id="git-log"><a href="#git-log" class="headerlink" title="git log"></a>git log</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">git log --oneline</span><br><span class="line"></span><br><span class="line">git log --oneline --all</span><br><span class="line"></span><br><span class="line">git log --oneline --all --graph</span><br><span class="line"></span><br><span class="line">git log --oneline --all --graph -n4</span><br><span class="line"></span><br><span class="line">git log --oneline --graph [branch_name]</span><br><span class="line"></span><br><span class="line">git help --web log</span><br><span class="line"></span><br><span class="line">gitk</span><br></pre></td></tr></table></figure><br><br><h2 id="探密-git目录"><a href="#探密-git目录" class="headerlink" title="探密.git目录"></a>探密.git目录</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看对象类型</span></span><br><span class="line">git cat-file -t hash_num</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">看对象内容</span></span><br><span class="line">git cat-file -p hash_num</span><br></pre></td></tr></table></figure><br><br><br><h1 id="第二章：独自使用Git时的常见场景-16讲"><a href="#第二章：独自使用Git时的常见场景-16讲" class="headerlink" title="第二章：独自使用Git时的常见场景 (16讲)"></a>第二章：独自使用Git时的常见场景 (16讲)</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">git branch -av</span><br><span class="line"></span><br><span class="line">git branch -d [branch_name]</span><br><span class="line"></span><br><span class="line">git branch -D [branch_name]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">（在自己的分支上）对最近一次 commit 的message进行修改</span></span><br><span class="line">git commit --amend</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">（在自己的分支上）对历史 commit 的message进行修改，（选择r）</span></span><br><span class="line">git rebase -i [commit_id]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">（在自己的分支上）把多个commit信息合并到一起（选择s）、还可以对不连续的commit 信息进行合并</span></span><br><span class="line">git rebase -i [pre commit_id]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">暂存区和<span class="built_in">head</span>进行比较</span></span><br><span class="line">git diff --cached</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">工作区和暂存区的区别比较（所有文件）</span></span><br><span class="line">git diff</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">工作区和暂存区的区别比较（指定文件）</span></span><br><span class="line">git diff -- [file name]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">暂存区恢复成HEAD，但是变更的内容会在工作区</span></span><br><span class="line">git reset HEAD</span><br><span class="line">git reset HEAD -- [file_name] [file_name]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">丢掉工作区某个文件</span></span><br><span class="line">git checkout -- [file_name]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">丢弃commit</span></span><br><span class="line">git reset --hard [commit_id]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">比较不同commit差异</span></span><br><span class="line">git diff [branch_name] [branch_name] -- [file_name]</span><br><span class="line">git diff [commit_id] [commit_id] -- [file_name]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">直接删除，并保存在暂存区</span></span><br><span class="line">git rm [file_name]</span><br><span class="line"></span><br><span class="line">git stash</span><br><span class="line"></span><br><span class="line">git stash list</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">弹出暂存内容，并保存在暂存区</span></span><br><span class="line">git stash apply</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">弹出暂存内容，并不保存</span></span><br><span class="line">git stash pop</span><br></pre></td></tr></table></figure><br><br><h2 id="gitignore"><a href="#gitignore" class="headerlink" title=".gitignore"></a>.gitignore</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">不管理doc文件，以及doc文件夹下的内容</span></span><br><span class="line">doc</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">管理doc文件，不管理doc文件夹下的内容</span></span><br><span class="line">doc/</span><br></pre></td></tr></table></figure><br><br><h2 id="Git-备份"><a href="#Git-备份" class="headerlink" title="Git 备份"></a>Git 备份</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br><span class="line"></span><br><span class="line">git remote add </span><br></pre></td></tr></table></figure><br><br><br><h1 id="第三章：Git与GitHub的简单同步-4讲"><a href="#第三章：Git与GitHub的简单同步-4讲" class="headerlink" title="第三章：Git与GitHub的简单同步 (4讲)"></a>第三章：Git与GitHub的简单同步 (4讲)</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">本地仓库和远端仓库建立链接</span></span><br><span class="line">git remote add [remote_repo_name] [url]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">把本地仓库所有分支内容推送到远端仓库</span></span><br><span class="line">git push [remote_repo_name] --all</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">把远端仓库分支拉取到本地</span></span><br><span class="line">git fetch [remote_repo_name] [remote_repo_branch]</span><br></pre></td></tr></table></figure><br><br><br><h1 id="第四章：Git多人单分支集成协作时的常见场景-5讲"><a href="#第四章：Git多人单分支集成协作时的常见场景-5讲" class="headerlink" title="第四章：Git多人单分支集成协作时的常见场景 (5讲)"></a>第四章：Git多人单分支集成协作时的常见场景 (5讲)</h1><br><br><br><h1 id="第五章：Git集成使用禁忌-2讲"><a href="#第五章：Git集成使用禁忌-2讲" class="headerlink" title="第五章：Git集成使用禁忌 (2讲)"></a>第五章：Git集成使用禁忌 (2讲)</h1><ul><li>禁止使用：<code>git push -f origin branch_name</code></li></ul><br><br><br><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><blockquote><p>29 讲，git备份还需要再学习熟悉一下</p><p>rebase？</p><p>fetch?</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;br&gt;

&lt;h1 id=&quot;第一章：Git基础-13讲&quot;&gt;&lt;a href=&quot;#第一章：Git基础-13讲&quot; class=&quot;headerlink&quot; title=&quot;第一章：Git基础 (13讲)&quot;&gt;&lt;/a&gt;第一章：Git基础 (13讲)&lt;/h1&gt;&lt;h2 id=&quot;版本控制系统-VCS&quot;</summary>
      
    
    
    
    <category term="Git" scheme="https://ratears.github.io/dev.ratears.life/categories/Git/"/>
    
    
    <category term="Git" scheme="https://ratears.github.io/dev.ratears.life/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>《高级Redis进阶课 解决Redis实际问题+掌握Redis6.x特性》Study Notes</title>
    <link href="https://ratears.github.io/dev.ratears.life/2023/%E3%80%8A%E9%AB%98%E7%BA%A7Redis%E8%BF%9B%E9%98%B6%E8%AF%BE-%E8%A7%A3%E5%86%B3Redis%E5%AE%9E%E9%99%85%E9%97%AE%E9%A2%98-%E6%8E%8C%E6%8F%A1Redis6-x%E7%89%B9%E6%80%A7%E3%80%8BStudy-Notes/"/>
    <id>https://ratears.github.io/dev.ratears.life/2023/%E3%80%8A%E9%AB%98%E7%BA%A7Redis%E8%BF%9B%E9%98%B6%E8%AF%BE-%E8%A7%A3%E5%86%B3Redis%E5%AE%9E%E9%99%85%E9%97%AE%E9%A2%98-%E6%8E%8C%E6%8F%A1Redis6-x%E7%89%B9%E6%80%A7%E3%80%8BStudy-Notes/</id>
    <published>2023-10-03T17:32:04.446Z</published>
    <updated>2023-10-03T17:32:04.446Z</updated>
    
    <content type="html"><![CDATA[<br><h1 id="课程介绍"><a href="#课程介绍" class="headerlink" title="课程介绍"></a>课程介绍</h1><ul><li><p><strong>Redis是目前使用非常广泛的中间件</strong></p></li><li><p><strong>为何Redis经久不衰：</strong></p><ul><li>功能强大：<ul><li>高性能：底层C语言编写，内存数据库，，通讯采用epoll非阻塞I&#x2F;O多路复用机制</li><li>线程安全：原子操作、单线程</li><li>功能丰富：<ul><li>数据结构：<ul><li>基本：String、List、HashSet、SortedSet</li><li>高阶：GEO、BitMap、HyperLogLog</li></ul></li><li>持久化：RDB持久化、AOF持久化、RDB—AOF混合持久化</li><li>主从：Master—Slave</li><li>哨兵：Sentinel</li><li>集群</li><li>模块化：能够支撑很多的互联网应用场景，比如缓存、分布式锁队列、集合、GEO、BitMap操作等</li></ul></li></ul></li><li>持续改进</li></ul></li><li><p><strong>以项目，穿针引线（理论+实践）</strong></p><ul><li>典型的业务场景</li><li>丰富的数据类型</li><li>新特性：多线程IO</li><li>微服务与分布式</li></ul></li></ul><img src="https://cdn.statically.io/gh/ratears/images-hosting@picx/picx/image.z5a1scmzyzk.webp" /><ul><li><strong>项目架构</strong><ul><li>单节点-&gt;主从-&gt;哨兵-&gt;集群</li></ul></li></ul><img src="https://cdn.statically.io/gh/ratears/images-hosting@picx/picx/image.1ua6qm7bk0a.webp" /><ul><li><strong>课程内容概述（以问带学）</strong><ul><li>项目系统搭建：SpringBoot整合Redis， SpringCloud搭建微服务</li><li>系统响应慢：用最合适的数据类型来缓存，满日志，BigKey，连接池优化</li><li>缓存异常：分布式锁，LRU淘汰算法，（缓存穿透，缓存击穿，缓存雪崩）</li><li>数据丢失、不安全：RDB—AOF混合持久化，全量&#x2F;部分同步，主从复制数据一致性</li><li>主从复制故障：哨兵监控，主观&#x2F;客观下线</li><li>存储不够用：集群分片存储，集群内部原理，故障自动转移</li><li>服务器宕机：集群动态收缩，MOVED&#x2F;ASK转向，故障演示与恢复方案</li></ul></li></ul><p>​</p><ul><li>底层原理：<ul><li>网络底层</li><li>事务处理</li><li>持久化原理</li><li>主从复制原理</li><li>哨兵机制</li><li>分片存储原理</li></ul></li><li>底层算法：<ul><li>Sorted Set底层</li><li>Bitmap、Geo算法</li><li>数据过期淘汰算法</li><li>Leader选举流程</li><li>槽位定位算法</li><li>备份迁移及其算法</li></ul></li><li>性能提升方案：<ul><li>Key与Value设计规范</li><li>避免BigKey</li><li>避免耗时操作</li><li>Pipeline管道操作</li><li>连接池性能优化</li><li>子进程的开销与优化</li></ul></li><li>故障解决方案：<ul><li>数据延迟</li><li>数据脏读</li><li>数据抖动</li><li>数据一致性</li><li>热点数据存储</li><li>RDB文件损坏</li></ul></li></ul><br><br><br><h1 id="第2章-Redis快速入门"><a href="#第2章-Redis快速入门" class="headerlink" title="第2章 Redis快速入门"></a>第2章 Redis快速入门</h1><h2 id="章节介绍"><a href="#章节介绍" class="headerlink" title="章节介绍"></a>章节介绍</h2><ul><li><strong>[学习目标]</strong></li></ul><p>1、了解Redis为什么能流行这么多年，高性能的原因<br>2、掌握Redis环境安装以及配置<br>3、了解微服务项目的构建以及SpringBoot开发</p><ul><li><strong>[理论知识]</strong></li></ul><p>1、缓存相关中间件 (Redis、 Memcache和Ehcache) 的比较<br>2、对Redis的基本理解<br>3、微服务相关概念</p><ul><li><strong>[实际操作]</strong></li></ul><p>1、Redis安装、配置以及启动<br>2、Redis的基本命令<br>3、数据库表结构设计<br>4、SpringBoot&amp;SpringCloud项目搭建</p><br><br><h2 id="Redis介绍"><a href="#Redis介绍" class="headerlink" title="Redis介绍"></a>Redis介绍</h2><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul><li>内存数据库，速度快，也支持数据的持久化</li><li>Redis不仅仅支持简单的key-value类型的数据，同时还提供Lists、 Hashes、 Sets 、Sorted Sets 等多种数据结构的存储</li><li>Redis支持数据的备份 (master-slave) 与集群 (分片存储)，以及拥有哨兵监控机制.</li><li>支持事务</li></ul><h3 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h3><ul><li>性能极高 - Redis能读的速度是110000次&#x2F;s，写的速度是81000次&#x2F;s</li><li>丰富的数据类型 - Redis支持 Strings、 Lists、 Hashes、Sets 、Sorted Sets 等数据类型操作</li><li>原子操作 - Redis的所有操作都是原子性的，同时Redis还支持对几个操作合并后的原子性执行 (事务）</li><li>丰富的特性 - Redis还支持 publish&#x2F;subscribe,通知,key 过期等特性。</li></ul><h3 id="Redis、Memcached、-Ehcache的区别"><a href="#Redis、Memcached、-Ehcache的区别" class="headerlink" title="Redis、Memcached、 Ehcache的区别"></a>Redis、Memcached、 Ehcache的区别</h3><ul><li>这三个中间件都可以应用于缓存，但目前市面上使用Redis的场景会更多，更广泛，其原因是: Redis性能高、原子操作、支持多种数据类型，主从复制与哨兵监控，持久化操作等。</li></ul><img src="https://cdn.statically.io/gh/ratears/images-hosting@picx/picx/image.27avr4hyqo4k.webp" /><br><br><h2 id="Redis的高并发"><a href="#Redis的高并发" class="headerlink" title="Redis的高并发"></a>Redis的高并发</h2><ul><li>官方的bench-mark数据: 测试完成了50个并发执行100000个请求。设置和获取的值是一个256字节字符串。结果: 读的速度是110000次&#x2F;s,写的速度是81000次&#x2F;s。redis尽量少写多读，符合缓存的适用要求。单机redis支撑万级，如果10万+可以采用主从复制的模式。</li></ul><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><ol><li>Redis是纯内存数据库，所以读取速度快。</li><li>Redis使用的是非阻塞10，10多路复用，减少了线程切换时上下文的切换和竞争</li><li>Redis采用了单线程的模型，保证了每个操作的原子性，也减少了线程的上下文切换和竞争</li><li>Redis存储结构多样化，不同的数据结构对数据存储进行了优化加快读取的速度</li><li>Redis采用自己实现的事件分离器，效率比较高，内部采用非阻塞的执行方式，吞吐能力比较大</li></ol><h3 id="Redis的单线程"><a href="#Redis的单线程" class="headerlink" title="Redis的单线程"></a>Redis的单线程</h3><p><strong>原因</strong></p><ul><li>不需要各种锁的性能消耗</li><li>单线程多进程集群方案</li><li>CPU消耗</li></ul><p><strong>优劣</strong></p><ul><li>单进程单线程优势<ul><li>代码更清晰，处理逻辑更简单</li><li>不用去考虑各种锁的问题，不存在加锁释放锁操作，没有因为可能出现死锁而导致的性能消耗</li><li>不存在多进程或者多线程导致的切换而消耗CPU</li></ul></li><li>单进程单线程弊端<ul><li>无法发挥多核CPU性能，不过可以通过在单机开多个Redis实例来完善</li></ul></li></ul><br><h3 id="I-O多路复用技术"><a href="#I-O多路复用技术" class="headerlink" title="I&#x2F;O多路复用技术"></a>I&#x2F;O多路复用技术</h3><ul><li>redis 采用网络I&#x2F;O多路复用技术来保证在多连接的时候，系统的高吞吐量。</li></ul><br><br><h2 id="Redis版本说明"><a href="#Redis版本说明" class="headerlink" title="Redis版本说明"></a>Redis版本说明</h2><ul><li>Redis2.6<ul><li>键的过期时间支持毫秒</li><li>从节点支持只读功能</li></ul></li><li>Redis2.8<ul><li>可以用bind命令绑定多个IP地址</li><li>发布订阅添加了pub&#x2F;sub</li><li>Redis Sentinel第二版，相比于Redis2.6的Redis Sentinel，此版本已经变成生产可用</li></ul></li><li>Redis3.0 (里程碑)<ul><li>Redis最大的改动就是添加Redis的分布式实现Redis cluster。</li></ul></li><li>Redis3.2<ul><li>添加GEO相关功能。</li><li>新的List编码类型: quicklist。</li></ul></li><li>Redis4.0 (重大改版)<ul><li>提供了模块系统，方便第三方开发者拓展Redis的功能</li><li>提供了新的缓存剔除算法: LFU (Last Frequently Used)，并对已有算法进行了优化</li><li>提供了非阻塞del和flushall&#x2F;flushdb功能，有效解决删除了bigkey可能造成的Redis阻塞.</li><li>提供了RDB-AOF混合持久化格式，充分利用了AOF和RDB各自优势。</li></ul></li><li>Redis5.0<ul><li>新的stream数据类型</li><li>客户经常连接和断开连接时性能更好</li></ul></li><li>Redis6.0<ul><li>多线程I&#x2F;O。多线程部分只是用来处理网络数据的读写和协议解析，执行命令仍然是单线程</li></ul></li></ul><br><br><h2 id="Redis安装"><a href="#Redis安装" class="headerlink" title="Redis安装"></a>Redis安装</h2><ul><li><strong>下载解压</strong></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget -P /usr/local/src/ https://download.redis.io/releases/redis-6.0.9.tar.gz</span><br><span class="line"></span><br><span class="line">cd /usr/local/src/</span><br><span class="line">tar -zxvf redis-6.0.9.tar.gz</span><br></pre></td></tr></table></figure><ul><li><strong>确保环境依赖（升级 GCC）</strong></li></ul><blockquote><p>在编译 Redis 6 之前需要升级 gc 的版本，默认情况 yum 安装的 gcc 版本是 4.8.5，由于版本过低，在编译时会报如下错误。所以我们需要执行以下操作升级 GCC。</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装 Sc1 源</span></span><br><span class="line">yum install -y centos-release-scl scl-utils-build</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装 9 版本的 gcc、gcc-c++、gdb 工具链 (toolchian)</span></span><br><span class="line">yum install -y devtoolset-9-toolchain</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">临时覆盖系统原有的 gcc 引用</span></span><br><span class="line">scl enable devtoolset-9 bash</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看 gcc 当前版本</span></span><br><span class="line">gcc -v</span><br></pre></td></tr></table></figure><ul><li><strong>预编译</strong></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/src/redis-6.0.9/</span><br><span class="line">make</span><br></pre></td></tr></table></figure><ul><li><strong>安装</strong></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /usr/local/redis-6.0.9</span><br><span class="line">cd /usr/local/src/redis-6.0.9/</span><br><span class="line">make PREFIX=/usr/local/redis-6.0.9 install</span><br></pre></td></tr></table></figure><ul><li><strong>创建软连接</strong></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/</span><br><span class="line">ln -s redis-6.0.9/ redis</span><br></pre></td></tr></table></figure><br><br><h2 id="Redis的启动"><a href="#Redis的启动" class="headerlink" title="Redis的启动"></a>Redis的启动</h2><ul><li><strong>前台启动</strong></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/redis</span><br><span class="line">bin/redis-server</span><br></pre></td></tr></table></figure><ul><li><strong>后台启动</strong></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/local/src/redis-6.0.9/redis.conf /usr/local/redis/bin/</span><br><span class="line"></span><br><span class="line">cd /usr/local/redis/bin/</span><br><span class="line"></span><br><span class="line">vim redis.conf</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改以守护进程方式启动</span></span><br><span class="line">daemonize yes</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用配置文件，后台启动</span></span><br><span class="line">cd /usr/local/redis/bin/</span><br><span class="line">./redis-server redis.conf</span><br></pre></td></tr></table></figure><ul><li><strong>配置开机启动 (centos7及以上)</strong></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">在系统服务目录里创建redis.service文件</span></span><br><span class="line">vim /etc/systemd/system/redis.service</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">写入以下内容:</span></span><br><span class="line">[Unit]</span><br><span class="line">Description=redis-server</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=forking</span><br><span class="line">ExecStart=/usr/local/redis/bin/redis-server /usr/local/redis/bin/redis.conf</span><br><span class="line">PrivateTmp=true</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重载系统服务</span></span><br><span class="line">systemctl daemon-reload</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">关闭redis-server:</span> </span><br><span class="line">systemctl stop redis.service</span><br><span class="line"></span><br><span class="line">systemctl start redis.service</span><br><span class="line"></span><br><span class="line">systemctl status redis.service</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开启成功，将服务加入开机自启</span></span><br><span class="line">systemctl enable redis.service</span><br></pre></td></tr></table></figure><br><br><h2 id="Redis-的配置"><a href="#Redis-的配置" class="headerlink" title="Redis 的配置"></a>Redis 的配置</h2><ul><li>daemonize默认情况下，redis 不是在后台运行的，如果需要在后台运行，把该项的值更改为 yes</li><li>bind指定 Redis 只接收来自于该IP 地址的请求</li><li>port监听端口，默认为 6379</li><li>databases设置数据库的个数，默认使用的数据库是0</li><li>save设置 Redis 进行数据库镜像的频率</li><li>dbfilename镜像备份文件的文件名</li><li>dir数据库镜像备份的文件放置的路径</li><li>requirepass设置客户端连接后进行任何其他指定前需要使用的密码</li><li>maxclients限制同时连接的客户数量</li><li>maxmemory设置redis 能够使用的最大内存</li></ul><br><br><h2 id="Redis的客户端"><a href="#Redis的客户端" class="headerlink" title="Redis的客户端"></a>Redis的客户端</h2><h3 id="Windows-客户端"><a href="#Windows-客户端" class="headerlink" title="Windows 客户端"></a>Windows 客户端</h3><ul><li>redis-desktop-manager</li></ul><h3 id="Redis-自带的客户端"><a href="#Redis-自带的客户端" class="headerlink" title="Redis 自带的客户端"></a>Redis 自带的客户端</h3><p><code>./redis-cli -a [password]</code></p><h3 id="Java-客户端"><a href="#Java-客户端" class="headerlink" title="Java 客户端"></a>Java 客户端</h3><ul><li>Redis的Java客户端也有很多: <a class="link"   href="https://redis,io/clients#java%EF%BC%8C%E5%85%B6%E4%B8%AD%E6%AF%94%E8%BE%83%E5%8F%97%E6%AC%A2%E8%BF%8E%E7%9A%84%E6%98%AFJedis%E5%92%8CLettuce" >https://redis,io/clients#java，其中比较受欢迎的是Jedis和Lettuce<i class="fas fa-external-link-alt"></i></a>.</li><li>Jedis在实现上是直接连接的redis server，如果在多线程环境下是非线程安全的，这个时候只有使用连接池，为每个Jedis实例增加物理连接，官方推荐。</li><li>Lettuce的连接是基于Netty的，连接实例 (StatefulRedisConnection)可以在多个线程间并发访问，因为StatefulRedisConnection是线程安全的，所以一个连接实例 (StatefulRedisConnection) 就可以满足多线程环境下的并发访问，当然这个也是可伸缩的设计，一个连接实例不够的情况也可以按需增加连接实例。</li><li>在SpringBoot Data Redis 1.X之前默认使用的是Jedis，但目前最新版的修改成了Lettuce。</li><li>之前公司使用Jedis居多，Letuce近两年在逐步上升，总的来进Jedis的性能会优于Lettuce (因为它是直接操作Redis)</li></ul><h4 id="Jedis-直连"><a href="#Jedis-直连" class="headerlink" title="Jedis 直连"></a>Jedis 直连</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.After;</span><br><span class="line"><span class="keyword">import</span> org.junit.Before;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JedisTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//建立连接</span></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 初始化 Jedis 客户端，声明主机和端口</span></span><br><span class="line">        jedis = <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;117.50.197.120&quot;</span>,<span class="number">6379</span>);</span><br><span class="line">        <span class="comment">// 心跳机制检测是否连接成功</span></span><br><span class="line">        jedis.auth(<span class="string">&quot;redis&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">pong</span> <span class="operator">=</span> jedis.ping();</span><br><span class="line">        System.out.println(pong);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">// 选择/切换数据库</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">select</span> <span class="operator">=</span> jedis.select(<span class="number">3</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;select = &quot;</span> + select);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 插入一条数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> jedis.set(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;MIKE&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;result = &quot;</span> + result);</span><br><span class="line">        <span class="comment">// 获取一条数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> jedis.get(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;name = &quot;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//释放资源</span></span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="literal">null</span> != jedis) &#123;</span><br><span class="line">            jedis.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Jedis-连接池"><a href="#Jedis-连接池" class="headerlink" title="Jedis 连接池"></a>Jedis 连接池</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPool;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPoolConfig;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JedisPoolConnectRedis</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> JedisPool jedisPool;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">// 创建连接池配置对象</span></span><br><span class="line">        <span class="type">JedisPoolConfig</span> <span class="variable">jedisPoolConfig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JedisPoolConfig</span>();</span><br><span class="line">        <span class="comment">//设置最大连接数，默认 8</span></span><br><span class="line">        jedisPoolConfig.setMaxTotal(<span class="number">5</span>);</span><br><span class="line">       <span class="comment">// 设置最大空闲数量，默认 8</span></span><br><span class="line">        jedisPoolConfig.setMaxIdle(<span class="number">5</span>);</span><br><span class="line">        <span class="comment">//设置最少空闲数量，默认 0</span></span><br><span class="line">        jedisPoolConfig.setMinIdle(<span class="number">5</span>);</span><br><span class="line">        <span class="comment">//设置等待时间ms</span></span><br><span class="line">        jedisPoolConfig.setMaxWaitMillis(<span class="number">100</span>);</span><br><span class="line">        <span class="comment">//初始化 JedisPool 对象</span></span><br><span class="line">        jedisPool = <span class="keyword">new</span> <span class="title class_">JedisPool</span>(jedisPoolConfig,<span class="string">&quot;117.50.197.120&quot;</span>,<span class="number">6379</span>,<span class="number">100</span>,<span class="string">&quot;redis&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取 Jedis 对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Jedis <span class="title function_">getJedis</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> jedisPool.getResource();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="SpringBoot-集成-Redis"><a href="#SpringBoot-集成-Redis" class="headerlink" title="SpringBoot 集成 Redis"></a>SpringBoot 集成 Redis</h4><ul><li>使用脚手架引入相关依赖</li><li>配置Redis</li><li>添加Redis序列化方法</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.JsonAutoDetect;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.annotation.PropertyAccessor;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringdataDemoApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringdataDemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 自定义RedisTemplate的bean，不使用默认的RedisTemplate</span></span><br><span class="line"><span class="comment">     * redisTemplate 默认序列化使用的jdkSerializeable, 存储二进制字节码, 所以自定义序列化类</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> redisConnectionFactory</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate&lt;Object, Object&gt; <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span>&#123;</span><br><span class="line">        RedisTemplate&lt;Object, Object&gt; redisTemplate = <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>&lt;&gt;();</span><br><span class="line">        redisTemplate.setConnectionFactory(redisConnectionFactory);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用Jackson2JsonRedisSerialize 替换默认序列化</span></span><br><span class="line">        <span class="type">Jackson2JsonRedisSerializer</span> <span class="variable">jackson2JsonRedisSerializer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jackson2JsonRedisSerializer</span>(Object.class);</span><br><span class="line"></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">        objectMapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">        objectMapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line"></span><br><span class="line">        jackson2JsonRedisSerializer.setObjectMapper(objectMapper);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置value的序列化规则和 key的序列化规则</span></span><br><span class="line">        redisTemplate.setValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        redisTemplate.setKeySerializer(<span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>());</span><br><span class="line"></span><br><span class="line">        redisTemplate.setHashKeySerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        redisTemplate.setHashValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line"></span><br><span class="line">        redisTemplate.afterPropertiesSet();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest(classes = &#123;SpringdataDemoApplication.class&#125;)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SpringdataDemoApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">protected</span> RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testInit</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// PING PONG 心跳机制检测是否连接成功</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">pong</span> <span class="operator">=</span> redisTemplate.getConnectionFactory().getConnection().ping();</span><br><span class="line">        System.out.println(<span class="string">&quot;pong = &quot;</span> + pong);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 测试，插入一条数据</span></span><br><span class="line">        redisTemplate.opsForValue().set(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">username</span> <span class="operator">=</span> redisTemplate.opsForValue().get(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;username = &quot;</span> + username);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br><h2 id="需求分析与数据库设计"><a href="#需求分析与数据库设计" class="headerlink" title="需求分析与数据库设计"></a>需求分析与数据库设计</h2><h3 id="项目架构"><a href="#项目架构" class="headerlink" title="项目架构"></a>项目架构</h3><ul><li>基于微服务进行项目开发，微服务是目前比较热门的架构方式，具有以下特点:<ul><li>职责单一: 理论上一个微服务只解决一件事 (小)</li><li>隔离性强:服务单独部署，服务之间互相隔离，互不影响，因此一个服务宕机并不影响其他服务运行。 (松)</li><li>开发简单:一个微服务解决一件事情，那么对开发团队的要求相对就减少(不论从人数还是开发语言都可以随心所欲)，能够快速提高开发效率。 (便)</li></ul></li><li>本课程以美食社交APP后台API接口设计为例。涉及APP中用户、好友、订单为基础的相关业务，分为用户、好友、排行榜、优惠券&#x2F;秒杀、订单、附近的人、Feed 等微服务。完成用户登录、交友、发朋友圈以及购买优惠券、下单整个业务流程，并实现积分排行榜以及附近的人等相关功能。</li></ul><br><br><h2 id="数据库设计"><a href="#数据库设计" class="headerlink" title="数据库设计"></a>数据库设计</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> Navicat Premium Data Transfer</span><br><span class="line"></span><br><span class="line"> Source Server         : localhost</span><br><span class="line"> Source Server Type    : MySQL</span><br><span class="line"> Source Server Version : 80018</span><br><span class="line"> Source Host           : localhost:3306</span><br><span class="line"> Source Schema         : db_imooc</span><br><span class="line"></span><br><span class="line"> Target Server Type    : MySQL</span><br><span class="line"> Target Server Version : 80018</span><br><span class="line"> File Encoding         : 65001</span><br><span class="line"></span><br><span class="line"> Date: 14/11/2020 19:06:41</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">SET NAMES utf8mb4;</span><br><span class="line">SET FOREIGN_KEY_CHECKS = 0;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure for t_dictionary</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `t_dictionary`;</span><br><span class="line">CREATE TABLE `t_dictionary`  (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `type` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,</span><br><span class="line">  `data` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,</span><br><span class="line">  `display_order` int(11) NULL DEFAULT 0,</span><br><span class="line">  PRIMARY KEY (`id`) USING BTREE</span><br><span class="line">) ENGINE = InnoDB AUTO_INCREMENT = 415 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = DYNAMIC;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of t_dictionary</span><br><span class="line">-- ----------------------------</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (1, &#x27;TableType           &#x27;, &#x27;Regular|大厅&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (2, &#x27;TableType           &#x27;, &#x27;Bar|吧台&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (3, &#x27;TableType           &#x27;, &#x27;Window|靠窗&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (4, &#x27;TableType           &#x27;, &#x27;Outdoor|户外&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (5, &#x27;TableType           &#x27;, &#x27;Private|包间&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (7, &#x27;RestaurantTag       &#x27;, &#x27;24|hours|24小时营业&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (8, &#x27;RestaurantTag       &#x27;, &#x27;Afternoon|tea|下午茶&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (9, &#x27;RestaurantTag       &#x27;, &#x27;All|you|can|eat|自助餐&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (10, &#x27;RestaurantTag       &#x27;, &#x27;Bistros|酒馆&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (11, &#x27;RestaurantTag       &#x27;, &#x27;Breakfast|早餐&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (12, &#x27;RestaurantTag       &#x27;, &#x27;Bund|view|外滩风景&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (13, &#x27;RestaurantTag       &#x27;, &#x27;Classic|Shanghai|老上海&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (14, &#x27;RestaurantTag       &#x27;, &#x27;Cocktails|鸡尾酒&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (15, &#x27;RestaurantTag       &#x27;, &#x27;Credit|cards|accepted|可刷卡&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (16, &#x27;RestaurantTag       &#x27;, &#x27;Delivery|可送外卖&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (17, &#x27;RestaurantTag       &#x27;, &#x27;Pet|friendly|宠物友好&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (18, &#x27;RestaurantTag       &#x27;, &#x27;Kids|friendly||适合小孩&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (19, &#x27;RestaurantTag       &#x27;, &#x27;Fine|dining|顶级餐厅&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (20, &#x27;RestaurantTag       &#x27;, &#x27;Free|parking|免费停车&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (21, &#x27;RestaurantTag       &#x27;, &#x27;Lounge|酒廊&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (22, &#x27;RestaurantTag       &#x27;, &#x27;Lunch|set|午市套餐&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (23, &#x27;RestaurantTag       &#x27;, &#x27;Group|dining|团体&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (24, &#x27;RestaurantTag       &#x27;, &#x27;Healthy|健康&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (25, &#x27;RestaurantTag       &#x27;, &#x27;Historic|building|历史建筑&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (26, &#x27;RestaurantTag       &#x27;, &#x27;Hotel|restaurant||酒店餐厅&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (27, &#x27;RestaurantTag       &#x27;, &#x27;Ice|cream|冰激凌&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (28, &#x27;RestaurantTag       &#x27;, &#x27;Late|night|dining|夜宵&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (29, &#x27;RestaurantTag       &#x27;, &#x27;Non-smoking|有无烟区&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (30, &#x27;RestaurantTag       &#x27;, &#x27;Notable|wine|list|葡萄酒&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (32, &#x27;RestaurantTag       &#x27;, &#x27;Outdoor|seating|户外餐桌&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (33, &#x27;RestaurantTag       &#x27;, &#x27;Performance|现场表演&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (34, &#x27;RestaurantTag       &#x27;, &#x27;Romantic||浪漫&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (35, &#x27;RestaurantTag       &#x27;, &#x27;Ramen|日式拉面&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (36, &#x27;RestaurantTag       &#x27;, &#x27;Salads|沙拉&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (37, &#x27;RestaurantTag       &#x27;, &#x27;Sandwiches &amp; Delis|三明治&amp;熟食&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (38, &#x27;RestaurantTag       &#x27;, &#x27;Smoothies|冰沙&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (39, &#x27;RestaurantTag       &#x27;, &#x27;Tapas|西班牙小吃&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (40, &#x27;RestaurantTag       &#x27;, &#x27;Themed|restaurant|主题餐厅&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (41, &#x27;RestaurantTag       &#x27;, &#x27;Villa|别墅&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (43, &#x27;Cuisine             &#x27;, &#x27;American|北美菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (45, &#x27;Cuisine             &#x27;, &#x27;Australian|澳洲菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (48, &#x27;Cuisine             &#x27;, &#x27;Barbecue|烧烤&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (50, &#x27;Cuisine             &#x27;, &#x27;Beijing|京菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (63, &#x27;Cuisine             &#x27;, &#x27;Dongbei|东北菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (65, &#x27;Cuisine             &#x27;, &#x27;Hunan|湘菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (68, &#x27;Cuisine             &#x27;, &#x27;French|法国菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (70, &#x27;Cuisine             &#x27;, &#x27;Fusion|创意菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (71, &#x27;Cuisine             &#x27;, &#x27;German|德国菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (72, &#x27;Cuisine             &#x27;, &#x27;Grocery|杂货&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (73, &#x27;Cuisine             &#x27;, &#x27;Halal|清真&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (76, &#x27;Cuisine             &#x27;, &#x27;Hot Pot|火锅&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (79, &#x27;Cuisine             &#x27;, &#x27;Indian|印度菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (80, &#x27;Cuisine             &#x27;, &#x27;Indonesian|印尼菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (81, &#x27;Cuisine             &#x27;, &#x27;Italian|意大利菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (82, &#x27;Cuisine             &#x27;, &#x27;Japanese|日本料理&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (84, &#x27;Cuisine             &#x27;, &#x27;Jiangxi|赣菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (88, &#x27;Cuisine             &#x27;, &#x27;Malaysian|马来西亚菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (91, &#x27;Cuisine             &#x27;, &#x27;Mediterranean|地中海菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (92, &#x27;Cuisine             &#x27;, &#x27;Mexican / Tex-Mex|墨西哥菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (94, &#x27;Cuisine             &#x27;, &#x27;Other|其他&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (102, &#x27;Cuisine             &#x27;, &#x27;Portuguese|葡国菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (103, &#x27;Cuisine             &#x27;, &#x27;Russian|俄国菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (104, &#x27;Cuisine             &#x27;, &#x27;Sandwiches &amp; Delis|三明治&amp;简食&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (107, &#x27;Cuisine             &#x27;, &#x27;Shaoxing|绍兴菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (111, &#x27;Cuisine             &#x27;, &#x27;Shanghainese|上海菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (112, &#x27;Cuisine             &#x27;, &#x27;Singaporean|新加坡菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (113, &#x27;Cuisine             &#x27;, &#x27;South American|南美菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (114, &#x27;Cuisine             &#x27;, &#x27;Spanish|西班牙菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (115, &#x27;Cuisine             &#x27;, &#x27;Steakhouse|牛排店&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (117, &#x27;Cuisine             &#x27;, &#x27;Taiwanese|台湾菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (118, &#x27;Cuisine             &#x27;, &#x27;Thai|泰国菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (121, &#x27;Cuisine             &#x27;, &#x27;Turkish|土耳其菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (122, &#x27;Cuisine             &#x27;, &#x27;Vegetarian|素食&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (123, &#x27;Cuisine             &#x27;, &#x27;Vietnamese|越南菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (124, &#x27;Cuisine             &#x27;, &#x27;Wine Bar|红酒吧&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (126, &#x27;Cuisine             &#x27;, &#x27;Yunnan|云南菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (129, &#x27;Cuisine             &#x27;, &#x27;Zhejiang|浙菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (130, &#x27;nations             &#x27;, &#x27;Afghanistan | 阿富汗&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (131, &#x27;nations             &#x27;, &#x27;Albania | 阿尔巴尼亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (132, &#x27;nations             &#x27;, &#x27;Algeria | 阿尔及利亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (133, &#x27;nations             &#x27;, &#x27;Andorra | 安道尔&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (134, &#x27;nations             &#x27;, &#x27;Angola | 安哥拉&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (135, &#x27;nations             &#x27;, &#x27;Argentina | 阿根廷&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (136, &#x27;nations             &#x27;, &#x27;Armenia | 亚美尼亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (137, &#x27;nations             &#x27;, &#x27;Australia | 澳大利亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (138, &#x27;nations             &#x27;, &#x27;Austria | 奥地利&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (139, &#x27;nations             &#x27;, &#x27;Azerbaijan | 阿塞拜疆&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (140, &#x27;nations             &#x27;, &#x27;Bahamas | 巴哈马&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (141, &#x27;nations             &#x27;, &#x27;Bahrain | 巴林&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (142, &#x27;nations             &#x27;, &#x27;Bangladesh | 孟加拉国&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (143, &#x27;nations             &#x27;, &#x27;Barbados | 巴巴多斯&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (144, &#x27;nations             &#x27;, &#x27;Belarus | 白俄罗斯&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (145, &#x27;nations             &#x27;, &#x27;Belgium | 比利时&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (146, &#x27;nations             &#x27;, &#x27;Belize | 伯利兹&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (147, &#x27;nations             &#x27;, &#x27;Benin | 柏林&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (148, &#x27;nations             &#x27;, &#x27;Bhutan | 不丹&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (149, &#x27;nations             &#x27;, &#x27;Bolivia | 玻利维亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (150, &#x27;nations             &#x27;, &#x27;Bosnia-Herzegovina | 波斯尼亚和黑塞哥维那&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (151, &#x27;nations             &#x27;, &#x27;Botswana | 博茨瓦纳&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (152, &#x27;nations             &#x27;, &#x27;Brazil | 巴西&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (154, &#x27;nations             &#x27;, &#x27;Brunei | 文莱&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (155, &#x27;nations             &#x27;, &#x27;Bulgaria | 保加利亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (156, &#x27;nations             &#x27;, &#x27;Burkina | 布基纳法索&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (157, &#x27;nations             &#x27;, &#x27;Burma (Myanmar) | 缅甸&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (158, &#x27;nations             &#x27;, &#x27;Burundi | 布隆迪&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (159, &#x27;nations             &#x27;, &#x27;Cambodia | 柬埔寨&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (160, &#x27;nations             &#x27;, &#x27;Cameroon | 喀麦隆&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (161, &#x27;nations             &#x27;, &#x27;Canada | 加拿大&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (162, &#x27;nations             &#x27;, &#x27;Cape Verde Islands | 佛得角群岛&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (163, &#x27;nations             &#x27;, &#x27;Chad | 乍得&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (164, &#x27;nations             &#x27;, &#x27;Chile | 智利&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (166, &#x27;nations             &#x27;, &#x27;Colombia | 哥伦比亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (167, &#x27;nations             &#x27;, &#x27;Congo | 刚果&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (168, &#x27;nations             &#x27;, &#x27;Costa Rica | 哥斯达黎加&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (169, &#x27;nations             &#x27;, &#x27;Croatia | 克罗地亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (170, &#x27;nations             &#x27;, &#x27;Cuba | 古巴&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (171, &#x27;nations             &#x27;, &#x27;Cyprus | 塞浦路斯&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (172, &#x27;nations             &#x27;, &#x27;Czech Republic | 捷克共和国&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (173, &#x27;nations             &#x27;, &#x27;Denmark | 丹麦&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (174, &#x27;nations             &#x27;, &#x27;Djibouti | 吉布提&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (175, &#x27;nations             &#x27;, &#x27;Dominica | 多米尼加&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (176, &#x27;nations             &#x27;, &#x27;Dominican Republic | 多米尼加国共和国&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (177, &#x27;nations             &#x27;, &#x27;Ecuador | 厄瓜多尔&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (178, &#x27;nations             &#x27;, &#x27;Egypt | 埃及&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (179, &#x27;nations             &#x27;, &#x27;El Salvador | 萨尔瓦多&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (180, &#x27;nations             &#x27;, &#x27;England | 英格兰&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (181, &#x27;nations             &#x27;, &#x27;Eritrea | 厄立特里亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (182, &#x27;nations             &#x27;, &#x27;Estonia | 爱沙尼亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (183, &#x27;nations             &#x27;, &#x27;Ethiopia | 埃塞俄比亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (184, &#x27;nations             &#x27;, &#x27;Fiji | 斐济&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (185, &#x27;nations             &#x27;, &#x27;Finland | 芬兰&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (186, &#x27;nations             &#x27;, &#x27;France | 法国&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (187, &#x27;nations             &#x27;, &#x27;Gabon | 加蓬&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (188, &#x27;nations             &#x27;, &#x27;Gambia | 冈比亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (189, &#x27;nations             &#x27;, &#x27;Georgia | 格鲁吉亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (190, &#x27;nations             &#x27;, &#x27;Germany | 德国&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (191, &#x27;nations             &#x27;, &#x27;Ghana | 加纳&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (192, &#x27;nations             &#x27;, &#x27;Greece | 希腊&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (193, &#x27;nations             &#x27;, &#x27;Grenada | 格林纳达&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (194, &#x27;nations             &#x27;, &#x27;Guatemala | 危地马拉&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (195, &#x27;nations             &#x27;, &#x27;Guinea | 几内亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (196, &#x27;nations             &#x27;, &#x27;Guyana | 圭亚那&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (197, &#x27;nations             &#x27;, &#x27;Haiti | 海地&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (198, &#x27;nations             &#x27;, &#x27;Netherlands | 荷兰&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (199, &#x27;nations             &#x27;, &#x27;Honduras | 洪都拉斯&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (200, &#x27;nations             &#x27;, &#x27;Hungary | 匈牙利&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (201, &#x27;nations             &#x27;, &#x27;Iceland | 冰岛&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (202, &#x27;nations             &#x27;, &#x27;India | 印度&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (203, &#x27;nations             &#x27;, &#x27;Indonesia | 印度尼西亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (204, &#x27;nations             &#x27;, &#x27;Iran | 伊朗&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (205, &#x27;nations             &#x27;, &#x27;Iraq | 伊拉克&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (206, &#x27;nations             &#x27;, &#x27;Ireland | 爱尔兰&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (207, &#x27;nations             &#x27;, &#x27;Italy | 意大利&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (208, &#x27;nations             &#x27;, &#x27;Jamaica | 牙买加&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (209, &#x27;nations             &#x27;, &#x27;Japan | 日本&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (210, &#x27;nations             &#x27;, &#x27;Jordan | 约旦&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (211, &#x27;nations             &#x27;, &#x27;Kazakhstan | 哈萨克斯坦&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (212, &#x27;nations             &#x27;, &#x27;Kenya | 肯尼亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (213, &#x27;nations             &#x27;, &#x27;Kuwait | 科威特&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (214, &#x27;nations             &#x27;, &#x27;Laos | 老挝&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (215, &#x27;nations             &#x27;, &#x27;Latvia | 拉脱维亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (216, &#x27;nations             &#x27;, &#x27;Lebanon | 黎巴嫩&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (217, &#x27;nations             &#x27;, &#x27;Liberia | 利比里亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (218, &#x27;nations             &#x27;, &#x27;Libya | 利比亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (219, &#x27;nations             &#x27;, &#x27;Liechtenstein | 列支敦士登&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (220, &#x27;nations             &#x27;, &#x27;Lithuania | 立陶宛&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (221, &#x27;nations             &#x27;, &#x27;Luxembourg | 卢森堡&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (222, &#x27;nations             &#x27;, &#x27;Macedonia马其顿&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (223, &#x27;nations             &#x27;, &#x27;Madagascar | 马达加斯加&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (224, &#x27;nations             &#x27;, &#x27;Malawi | 马拉维&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (225, &#x27;nations             &#x27;, &#x27;Malaysia | 马来西亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (226, &#x27;nations             &#x27;, &#x27;Maldives | 马尔代夫&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (227, &#x27;nations             &#x27;, &#x27;Mali | 马里&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (228, &#x27;nations             &#x27;, &#x27;Malta | 马耳他&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (229, &#x27;nations             &#x27;, &#x27;Mauritania | 毛里塔尼亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (230, &#x27;nations             &#x27;, &#x27;Mauritius | 毛里求斯&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (231, &#x27;nations             &#x27;, &#x27;Mexico | 墨西哥&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (232, &#x27;nations             &#x27;, &#x27;Moldova | 摩尔多瓦&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (233, &#x27;nations             &#x27;, &#x27;Monaco | 摩纳哥&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (234, &#x27;nations             &#x27;, &#x27;Mongolia | 蒙古&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (235, &#x27;nations             &#x27;, &#x27;Montenegro | 黑山&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (236, &#x27;nations             &#x27;, &#x27;Morocco | 摩洛哥&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (237, &#x27;nations             &#x27;, &#x27;Mozambique | 莫桑比克&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (239, &#x27;nations             &#x27;, &#x27;Namibia | 纳米比亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (240, &#x27;nations             &#x27;, &#x27;Nepal | 尼泊尔&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (242, &#x27;nations             &#x27;, &#x27;New Zealand | 新西兰&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (243, &#x27;nations             &#x27;, &#x27;Nicaragua | 尼加拉瓜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (244, &#x27;nations             &#x27;, &#x27;Niger | 尼日尔&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (245, &#x27;nations             &#x27;, &#x27;Nigeria | 尼日利亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (246, &#x27;nations             &#x27;, &#x27;North Korea | 朝鲜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (247, &#x27;nations             &#x27;, &#x27;Norway | 挪威&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (248, &#x27;nations             &#x27;, &#x27;Oman | 阿曼&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (249, &#x27;nations             &#x27;, &#x27;Pakistan | 巴基斯坦&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (250, &#x27;nations             &#x27;, &#x27;Panama | 巴拿马&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (251, &#x27;nations             &#x27;, &#x27;Papua New Guinea | 巴布亚新几内亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (252, &#x27;nations             &#x27;, &#x27;Paraguay | 巴拉圭&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (253, &#x27;nations             &#x27;, &#x27;Peru | 秘鲁&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (254, &#x27;nations             &#x27;, &#x27;Philippines | 菲律宾&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (255, &#x27;nations             &#x27;, &#x27;Poland | 波兰&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (256, &#x27;nations             &#x27;, &#x27;Portugal | 葡萄牙&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (257, &#x27;nations             &#x27;, &#x27;Qatar | 卡塔尔&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (258, &#x27;nations             &#x27;, &#x27;Romania | 罗马尼亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (259, &#x27;nations             &#x27;, &#x27;Russia | 俄罗斯&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (260, &#x27;nations             &#x27;, &#x27;Rwanda | 卢旺达&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (261, &#x27;nations             &#x27;, &#x27;Saudi Arabia | 沙特阿拉伯&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (262, &#x27;nations             &#x27;, &#x27;Scotland | 苏格兰&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (263, &#x27;nations             &#x27;, &#x27;Senegal | 塞内加尔&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (264, &#x27;nations             &#x27;, &#x27;Serbia | 塞尔维亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (265, &#x27;nations             &#x27;, &#x27;Seychelles | 塞舌尔&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (266, &#x27;nations             &#x27;, &#x27;Sierra Leone | 塞拉里昂&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (267, &#x27;nations             &#x27;, &#x27;Singapore | 新加坡&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (268, &#x27;nations             &#x27;, &#x27;Slovakia | 斯洛伐克&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (269, &#x27;nations             &#x27;, &#x27;Slovenia | 斯洛伐尼亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (270, &#x27;nations             &#x27;, &#x27;Solomon Islands | 所罗门群岛&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (271, &#x27;nations             &#x27;, &#x27;Somalia | 索马里&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (272, &#x27;nations             &#x27;, &#x27;South Africa | 南非&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (273, &#x27;nations             &#x27;, &#x27;South Korea | 韩国&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (274, &#x27;nations             &#x27;, &#x27;Spain | 西班牙&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (275, &#x27;nations             &#x27;, &#x27;Sri Lanka | 斯里兰卡&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (276, &#x27;nations             &#x27;, &#x27;Sudan | 苏丹&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (277, &#x27;nations             &#x27;, &#x27;Suriname | 苏里南&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (278, &#x27;nations             &#x27;, &#x27;Swaziland | 斯维士兰&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (279, &#x27;nations             &#x27;, &#x27;Sweden | 瑞典&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (280, &#x27;nations             &#x27;, &#x27;Switzerland | 瑞士&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (281, &#x27;nations             &#x27;, &#x27;Syria | 叙利亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (282, &#x27;nations             &#x27;, &#x27;Taiwan | 台湾&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (283, &#x27;nations             &#x27;, &#x27;Tajikistan | 塔吉克斯坦&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (284, &#x27;nations             &#x27;, &#x27;Tanzania | 坦桑尼亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (285, &#x27;nations             &#x27;, &#x27;Thailand | 泰国&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (286, &#x27;nations             &#x27;, &#x27;Togo | 多哥&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (287, &#x27;nations             &#x27;, &#x27;Trinidad and Tobago | 特里尼达和多巴哥&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (289, &#x27;nations             &#x27;, &#x27;Tunisia | 突尼斯&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (290, &#x27;nations             &#x27;, &#x27;Turkey | 土耳其&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (291, &#x27;nations             &#x27;, &#x27;Turkmenistan | 土库曼斯坦&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (292, &#x27;nations             &#x27;, &#x27;Tuvalu | 图瓦卢&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (293, &#x27;nations             &#x27;, &#x27;Uganda | 乌干达&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (294, &#x27;nations             &#x27;, &#x27;Ukraine | 乌克兰&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (295, &#x27;nations             &#x27;, &#x27;United Arab Emirates | 阿拉伯联合大公国&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (296, &#x27;nations             &#x27;, &#x27;United Kingdom  | 联合王国&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (297, &#x27;nations             &#x27;, &#x27;U.S.A. | 美国&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (298, &#x27;nations             &#x27;, &#x27;Uruguay | 乌拉圭&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (299, &#x27;nations             &#x27;, &#x27;Uzbekistan | 乌兹别克斯坦&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (300, &#x27;nations             &#x27;, &#x27;Vanuatu | 瓦努阿图&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (301, &#x27;nations             &#x27;, &#x27;Vatican City | 梵蒂冈&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (302, &#x27;nations             &#x27;, &#x27;Venezuela | 委内瑞拉&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (303, &#x27;nations             &#x27;, &#x27;Vietnam | 越南&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (304, &#x27;nations             &#x27;, &#x27;Wales | 威尔士&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (305, &#x27;nations             &#x27;, &#x27;Western Samoa | 西萨摩亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (306, &#x27;nations             &#x27;, &#x27;Yemen | 也门&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (307, &#x27;nations             &#x27;, &#x27;Yugoslavia | 南斯拉夫&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (308, &#x27;nations             &#x27;, &#x27;Zaire | 扎伊尔&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (309, &#x27;nations             &#x27;, &#x27;Zambia | 赞比亚&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (310, &#x27;nations             &#x27;, &#x27;Zimbabwe | 津巴布韦&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (311, &#x27;nations             &#x27;, &#x27;Anhui | 安徽&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (312, &#x27;nations             &#x27;, &#x27;Fujian | 福建&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (313, &#x27;nations             &#x27;, &#x27;Gansu | 甘肃&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (314, &#x27;nations             &#x27;, &#x27;Guangdong | 广东&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (315, &#x27;nations             &#x27;, &#x27;Guizhou | 贵州&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (316, &#x27;nations             &#x27;, &#x27;Hainan | 海南&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (317, &#x27;nations             &#x27;, &#x27;Hebei | 河北&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (318, &#x27;nations             &#x27;, &#x27;Heilongjiang | 黑龙江&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (319, &#x27;nations             &#x27;, &#x27;Henan | 河南&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (320, &#x27;nations             &#x27;, &#x27;Hubei | 湖北&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (321, &#x27;nations             &#x27;, &#x27;Hunan | 湖南&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (322, &#x27;nations             &#x27;, &#x27;Jiangsu | 江苏&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (323, &#x27;nations             &#x27;, &#x27;Jiangxi | 江西&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (324, &#x27;nations             &#x27;, &#x27;Jilin | 吉林&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (325, &#x27;nations             &#x27;, &#x27;Liaoning | 辽宁&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (326, &#x27;nations             &#x27;, &#x27;Qinghai | 青海&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (327, &#x27;nations             &#x27;, &#x27;Shaanxi | 陕西&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (328, &#x27;nations             &#x27;, &#x27;Shandong | 山东&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (329, &#x27;nations             &#x27;, &#x27;Shanxi | 山西&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (330, &#x27;nations             &#x27;, &#x27;Sichuan | 四川&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (331, &#x27;nations             &#x27;, &#x27;Yunnan | 云南&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (332, &#x27;nations             &#x27;, &#x27;Zhejiang | 浙江&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (333, &#x27;nations             &#x27;, &#x27;Guangxi | 广西&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (334, &#x27;nations             &#x27;, &#x27;Inner Mongolia | 内蒙古&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (335, &#x27;nations             &#x27;, &#x27;Ningxia | 宁夏&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (336, &#x27;nations             &#x27;, &#x27;Xinjiang | 新疆&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (337, &#x27;nations             &#x27;, &#x27;Tibet | 西藏&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (338, &#x27;nations             &#x27;, &#x27;Beijing | 北京&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (339, &#x27;nations             &#x27;, &#x27;Chongqing | 重庆&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (340, &#x27;nations             &#x27;, &#x27;Shanghai | 上海&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (341, &#x27;nations             &#x27;, &#x27;Tianjin | 天津&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (342, &#x27;nations             &#x27;, &#x27;Hong Kong | 香港&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (343, &#x27;nations             &#x27;, &#x27;Macau | 澳门&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (346, &#x27;RestaurantTag       &#x27;, &#x27;Wifi|无线上网&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (349, &#x27;RestaurantTag       &#x27;, &#x27;Good|View|有景观位&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (351, &#x27;RestaurantTag       &#x27;, &#x27;Big|Party|大型宴会&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (352, &#x27;RestaurantTag       &#x27;, &#x27;Birthday|Party|生日宴会&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (353, &#x27;RestaurantTag       &#x27;, &#x27;BYOB|自带酒水&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (354, &#x27;RestaurantStyle     &#x27;, &#x27;朋友聚餐&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (355, &#x27;RestaurantStyle     &#x27;, &#x27;家庭聚会&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (356, &#x27;RestaurantStyle     &#x27;, &#x27;随便吃吃&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (357, &#x27;RestaurantStyle     &#x27;, &#x27;休闲小憩&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (358, &#x27;RestaurantStyle     &#x27;, &#x27;情侣约会&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (359, &#x27;RestaurantStyle     &#x27;, &#x27;商务宴请&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (360, &#x27;InviteStatus        &#x27;, &#x27;即将接洽&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (361, &#x27;InviteStatus        &#x27;, &#x27;等待老板决定&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (362, &#x27;InviteStatus        &#x27;, &#x27;合同签署中&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (363, &#x27;InviteStatus        &#x27;, &#x27;合同已经签订&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (370, &#x27;Cuisine&#x27;, &#x27;All-You-Can-Eat|自助餐&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (371, &#x27;Cuisine&#x27;, &#x27;Bar|酒吧&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (372, &#x27;Cuisine&#x27;, &#x27;Cafe|咖啡厅&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (373, &#x27;Cuisine&#x27;, &#x27;Cantonese|粤菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (374, &#x27;Cuisine&#x27;, &#x27;Dessert|甜品&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (375, &#x27;Cuisine&#x27;, &#x27;Global Cuisine|环球美食&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (376, &#x27;Cuisine&#x27;, &#x27;Middle Eastern|中东菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (377, &#x27;Cuisine&#x27;, &#x27;Southeast Asian|东南亚菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (378, &#x27;Cuisine&#x27;, &#x27;Zhejiang|浙江菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (379, &#x27;Cuisine&#x27;, &#x27;Fast Casual|小吃快餐&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (380, &#x27;nations&#x27;, &#x27;Israel&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (381, &#x27;nations&#x27;, &#x27;East Timor&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (382, &#x27;nations&#x27;, &#x27;Central African Republic&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (383, &#x27;nations&#x27;, &#x27;S?o Tomé and Principe&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (384, &#x27;nations&#x27;, &#x27;Ivory Coast&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (385, &#x27;nations&#x27;, &#x27;Lesotho&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (386, &#x27;nations&#x27;, &#x27;Equatorial Guinea&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (387, &#x27;nations&#x27;, &#x27;Guinea Bissau&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (400, &#x27;Cuisine&#x27;, &#x27;Sushi|寿司&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (401, &#x27;Cuisine&#x27;, &#x27;British|英国菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (402, &#x27;Cuisine&#x27;, &#x27;Dim Sum|早茶点心&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (403, &#x27;Cuisine&#x27;, &#x27;Xibei / Xinjiang|西北菜/新疆菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (405, &#x27;Cuisine&#x27;, &#x27;Guizhou|黔菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (406, &#x27;Cuisine&#x27;, &#x27;Pizza|披萨&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (408, &#x27;Cuisine&#x27;, &#x27;Seafood|海鲜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (409, &#x27;Cuisine&#x27;, &#x27;Anhui|徽菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (411, &#x27;Cuisine&#x27;, &#x27;Sichuan|川菜&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (412, &#x27;Cuisine&#x27;, &#x27;Korean|韩国料理&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (413, &#x27;Cuisine&#x27;, &#x27;Juice &amp; Beverages|果汁饮料&#x27;, 0);</span><br><span class="line">INSERT INTO `t_dictionary` VALUES (414, &#x27;Cuisine&#x27;, &#x27;Bakery &amp; Pastries|面包烘焙&#x27;, 0);</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure for t_diners</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `t_diners`;</span><br><span class="line">CREATE TABLE `t_diners`  (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `username` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL,</span><br><span class="line">  `nickname` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT &#x27;昵称&#x27;,</span><br><span class="line">  `phone` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL,</span><br><span class="line">  `email` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL,</span><br><span class="line">  `password` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL,</span><br><span class="line">  `avatar_url` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT &#x27;头像&#x27;,</span><br><span class="line">  `roles` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT &#x27;&#x27; COMMENT &#x27;角色&#x27;,</span><br><span class="line">  `is_valid` tinyint(1) NULL DEFAULT NULL,</span><br><span class="line">  `create_date` datetime(0) NULL DEFAULT NULL,</span><br><span class="line">  `update_date` datetime(0) NULL DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`) USING BTREE</span><br><span class="line">) ENGINE = InnoDB AUTO_INCREMENT = 6 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci ROW_FORMAT = DYNAMIC;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of t_diners</span><br><span class="line">-- ----------------------------</span><br><span class="line">INSERT INTO `t_diners` VALUES (1, &#x27;abc&#x27;, &#x27;昵称st&#x27;, &#x27;13888888888&#x27;, &#x27;abc@imooc.com&#x27;, &#x27;e10adc3949ba59abbe56e057f20f883e&#x27;, &#x27;/abc&#x27;, &#x27;ROLE_USER&#x27;, 1, &#x27;2020-11-06 16:17:52&#x27;, &#x27;2020-11-06 16:17:55&#x27;);</span><br><span class="line">INSERT INTO `t_diners` VALUES (2, &#x27;test&#x27;, &#x27;test&#x27;, &#x27;13666666666&#x27;, NULL, &#x27;e10adc3949ba59abbe56e057f20f883e&#x27;, &#x27;/test&#x27;, &#x27;ROLE_USER&#x27;, 1, &#x27;2020-11-12 12:01:13&#x27;, &#x27;2020-11-12 12:01:13&#x27;);</span><br><span class="line">INSERT INTO `t_diners` VALUES (3, &#x27;test2&#x27;, &#x27;test2&#x27;, &#x27;13666666667&#x27;, NULL, &#x27;e10adc3949ba59abbe56e057f20f883e&#x27;, &#x27;/test2&#x27;, &#x27;ROLE_USER&#x27;, 1, &#x27;2020-11-12 17:47:12&#x27;, &#x27;2020-11-12 17:47:12&#x27;);</span><br><span class="line">INSERT INTO `t_diners` VALUES (5, &#x27;aaa&#x27;, &#x27;aaa&#x27;, &#x27;12311112222&#x27;, NULL, &#x27;e10adc3949ba59abbe56e057f20f883e&#x27;, &#x27;/aaa&#x27;, &#x27;ROLE_USER&#x27;, 1, &#x27;2020-11-13 12:29:49&#x27;, &#x27;2020-11-13 12:29:49&#x27;);</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure for t_feed</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `t_feed`;</span><br><span class="line">CREATE TABLE `t_feed`  (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `content` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT &#x27;内容&#x27;,</span><br><span class="line">  `fk_diner_id` int(11) NULL DEFAULT NULL,</span><br><span class="line">  `praise_amount` int(11) NULL DEFAULT NULL COMMENT &#x27;点赞数量&#x27;,</span><br><span class="line">  `comment_amount` int(11) NULL DEFAULT NULL COMMENT &#x27;评论数量&#x27;,</span><br><span class="line">  `fk_restaurant_id` int(11) NULL DEFAULT NULL,</span><br><span class="line">  `create_date` datetime(0) NULL DEFAULT NULL,</span><br><span class="line">  `update_date` datetime(0) NULL DEFAULT NULL,</span><br><span class="line">  `is_valid` tinyint(1) NULL DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`) USING BTREE</span><br><span class="line">) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci ROW_FORMAT = DYNAMIC;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of t_feed</span><br><span class="line">-- ----------------------------</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure for t_follow</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `t_follow`;</span><br><span class="line">CREATE TABLE `t_follow`  (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `diner_id` int(11) NULL DEFAULT NULL,</span><br><span class="line">  `follow_diner_id` int(11) NULL DEFAULT NULL,</span><br><span class="line">  `is_valid` tinyint(1) NULL DEFAULT NULL,</span><br><span class="line">  `create_date` datetime(0) NULL DEFAULT NULL,</span><br><span class="line">  `update_date` datetime(0) NULL DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`) USING BTREE,</span><br><span class="line">  INDEX `index_followeddiner_valid`(`follow_diner_id`, `is_valid`) USING BTREE</span><br><span class="line">) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = DYNAMIC;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of t_follow</span><br><span class="line">-- ----------------------------</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure for t_restaurant</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `t_restaurant`;</span><br><span class="line">CREATE TABLE `t_restaurant`  (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `Name` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT &#x27;the En Name of the restaurant&#x27;,</span><br><span class="line">  `CnName` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,</span><br><span class="line">  `X` double NULL DEFAULT NULL,</span><br><span class="line">  `Y` double NULL DEFAULT NULL,</span><br><span class="line">  `Location` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT &#x27;En location of the restaurant&#x27;,</span><br><span class="line">  `CnLocation` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,</span><br><span class="line">  `Area` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT &#x27;city.district.neighbourhood\r\nExample: Shanghai.Xuhui.Xujiahui&#x27;,</span><br><span class="line">  `CnArea` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,</span><br><span class="line">  `Traffic` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT &#x27;the information/descripton of the restaurant&#x27;,</span><br><span class="line">  `Telephone` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT &#x27;Phone of the restaurant&#x27;,</span><br><span class="line">  `Email` varchar(80) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,</span><br><span class="line">  `Website` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,</span><br><span class="line">  `Cuisine` varchar(80) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,</span><br><span class="line">  `AveragePrice` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,</span><br><span class="line">  `AvgLunchPrice` decimal(19, 0) NULL DEFAULT NULL COMMENT &#x27;Average price of lunch&#x27;,</span><br><span class="line">  `Introduction` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT &#x27;Indtroduction of the restaurant&#x27;,</span><br><span class="line">  `Status` int(11) NULL DEFAULT 0 COMMENT &#x27;1=Opened 0=Closed&#x27;,</span><br><span class="line">  `CreateDT` datetime(0) NULL DEFAULT NULL,</span><br><span class="line">  `IsValid` smallint(1) NULL DEFAULT 1 COMMENT &#x27;1=Valid 0=Invalid&#x27;,</span><br><span class="line">  `Thumbnail` varchar(120) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT &#x27;pics at the list, value would be:\r\nbasepath/original/picname&#x27;,</span><br><span class="line">  `OpenHours` varchar(500) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,</span><br><span class="line">  `LikeVotes` int(10) NULL DEFAULT 0 COMMENT &#x27;the percentage of people like it&#x27;,</span><br><span class="line">  `DislikeVotes` int(10) NULL DEFAULT 0 COMMENT &#x27;How many people votes&#x27;,</span><br><span class="line">  `Amenities` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT &#x27;设备&#x27;,</span><br><span class="line">  `Tags` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT &#x27;tags of the restaurant&#x27;,</span><br><span class="line">  `OpenDate` datetime(0) NULL DEFAULT NULL,</span><br><span class="line">  `closeDate` datetime(0) NULL DEFAULT NULL,</span><br><span class="line">  `CityId` int(11) NULL DEFAULT 21 COMMENT &#x27;城市id&#x27;,</span><br><span class="line">  PRIMARY KEY (`id`) USING BTREE,</span><br><span class="line">  INDEX `index_isvalid`(`IsValid`) USING BTREE</span><br><span class="line">) ENGINE = InnoDB AUTO_INCREMENT = 23 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = DYNAMIC;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of t_restaurant</span><br><span class="line">-- ----------------------------</span><br><span class="line">INSERT INTO `t_restaurant` VALUES (14, &#x27;1931 Pub&#x27;, &#x27;名古&#x27;, 31.2158508275268, 121.461839852847, &#x27;112 Maoming Nan Lu, near Nanchang Lu&#x27;, &#x27;茂名南路112号, 近南昌路&#x27;, &#x27;Xuhui.Fmr French Concession&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;021 6472 5264&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;Shanghainese, Chinese&#x27;, &#x27;¥¥&#x27;, 0, &#x27;&#x27;, NULL, &#x27;2014-05-04 19:26:28&#x27;, 1, &#x27;&#x27;, &#x27;&#x27;, 1, 0, &#x27;&#x27;, &#x27;&#x27;, &#x27;2016-01-04 11:22:23&#x27;, &#x27;2016-01-04 11:22:23&#x27;, 21);</span><br><span class="line">INSERT INTO `t_restaurant` VALUES (15, &#x27;2001 Hong Kong Teahouse&#x27;, &#x27;2001港式茶餐&#x27;, 31.21385, 121.46051, &#x27;55 Shaanxi Nan Lu, near Changle Lu&#x27;, &#x27;陕西南路55号, 近长乐路&#x27;, &#x27;Xuhui.Fmr French Concession&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;021 5467 0205&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;Dim Sum, Chinese&#x27;, &#x27;¥&#x27;, 0, &#x27;&#x27;, NULL, &#x27;2014-05-04 19:26:28&#x27;, 4, &#x27;&#x27;, &#x27;&#x27;, 0, 0, &#x27;&#x27;, &#x27;&#x27;, &#x27;2016-01-04 11:22:23&#x27;, &#x27;2016-01-04 11:22:23&#x27;, 21);</span><br><span class="line">INSERT INTO `t_restaurant` VALUES (16, &#x27;2nd floor&#x27;, &#x27;2nd floor&#x27;, 31.2162, 121.447998, &#x27;2/F, 810 Changle Lu,near Changshu Lu&#x27;, &#x27;长乐路810号2楼, 近常熟路&#x27;, &#x27;Xuhui.Fmr French Concession&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;13761133471&#x27;, &#x27;&#x27;, &#x27;http://www.2ndfloor.asia&#x27;, &#x27;Cafe&#x27;, &#x27;¥&#x27;, 0, &#x27;&#x27;, NULL, &#x27;2014-05-04 19:26:28&#x27;, 3, &#x27;&#x27;, &#x27;&#x27;, 1, 0, &#x27;&#x27;, &#x27;&#x27;, &#x27;2016-01-04 11:22:23&#x27;, &#x27;2016-01-04 11:22:23&#x27;, 21);</span><br><span class="line">INSERT INTO `t_restaurant` VALUES (17, &#x27;400 Celsius&#x27;, &#x27;400 Celsius&#x27;, 31.19436, 121.43797, &#x27;1 Hongqiao Lu, 1/F, Grand Gateway, near Caoxi Bei Lu, Metro Line 1 Xujiahui Station&#x27;, &#x27;虹桥路1号港汇广场1楼, 近漕溪北路, 地铁1号线徐家汇站&#x27;, &#x27;Xuhui.Xujiahui&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;021 6447 0770&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;Steakhouse&#x27;, &#x27;¥¥¥¥&#x27;, 0, &#x27;&#x27;, NULL, &#x27;2014-05-04 19:26:28&#x27;, 3, &#x27;&#x27;, &#x27;&#x27;, 0, 0, &#x27;&#x27;, &#x27;&#x27;, &#x27;2016-01-04 11:22:23&#x27;, &#x27;2016-01-04 11:22:23&#x27;, 21);</span><br><span class="line">INSERT INTO `t_restaurant` VALUES (18, &#x27;5 on the Bund&#x27;, &#x27;5 on the Bund&#x27;, 31.234482, 121.490753, &#x27;Five on the Bund,20 Guangdong Lu, near Zhongshan Dong Yi Lu&#x27;, &#x27;广东路20号, 近中山东一路&#x27;, &#x27;Huangpu.The Bund&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;Global Cuisine&#x27;, &#x27;¥¥¥¥&#x27;, 0, &#x27;&#x27;, NULL, &#x27;2014-05-04 19:26:28&#x27;, 3, &#x27;&#x27;, &#x27;&#x27;, 0, 0, &#x27;&#x27;, &#x27;&#x27;, &#x27;2016-01-04 11:22:23&#x27;, &#x27;2016-01-04 11:22:23&#x27;, 21);</span><br><span class="line">INSERT INTO `t_restaurant` VALUES (19, &#x27;5 Tables Bistro&#x27;, &#x27;5桌餐厅&#x27;, 31.2174481541175, 121.47318647082, &#x27;210 Danshui Lu, near Zizhong Lu&#x27;, &#x27;淡水路210号, 近自忠路&#x27;, &#x27;Luwan.Xintiandi&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;021 3304 1205&#x27;, &#x27;&#x27;, &#x27;www.weibo.com/5tables&#x27;, &#x27;European&#x27;, &#x27;¥¥¥¥&#x27;, 0, &#x27;&#x27;, NULL, &#x27;2014-05-04 19:26:28&#x27;, 4, &#x27;&#x27;, &#x27;&#x27;, 0, 0, &#x27;&#x27;, &#x27;&#x27;, &#x27;2016-01-04 11:22:23&#x27;, &#x27;2016-01-04 11:22:23&#x27;, 21);</span><br><span class="line">INSERT INTO `t_restaurant` VALUES (20, &#x27;57 Du Xiang&#x27;, &#x27;57度湘&#x27;, 31.2250117063411, 121.47824432639, &#x27;138 Huaihai Zhong Lu, Infinity Plaza, 4/F, Room 401, near Longmen Lu&#x27;, &#x27;淮海路138号无限度广场4楼401室, 近龙门路&#x27;, &#x27;Xuhui.Huaihai Zhong Lu&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;021 3315 0057&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;Hunan, Chinese&#x27;, &#x27;¥&#x27;, 0, &#x27;&#x27;, NULL, &#x27;2014-05-04 19:26:28&#x27;, 1, &#x27;restaurant/20/restaurant/T/160_160/1399622680327.JPG&#x27;, &#x27;Daily 11am-9pm&#x27;, 17, 5, &#x27;&#x27;, &#x27;&#x27;, &#x27;2016-01-04 11:22:23&#x27;, &#x27;2016-01-04 11:22:23&#x27;, 21);</span><br><span class="line">INSERT INTO `t_restaurant` VALUES (21, &#x27;609 Pho&#x27;, &#x27;609 Pho&#x27;, 31.237629, 121.438797, &#x27;609 Anyuan Lu, near Jiaozhou Lu&#x27;, &#x27;安源路609号, 近胶州路&#x27;, &#x27;Jing\&#x27;an&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;18201753996&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;Vietnamese&#x27;, &#x27;¥&#x27;, 0, &#x27;&#x27;, NULL, &#x27;2014-05-04 19:26:28&#x27;, 4, &#x27;&#x27;, &#x27;&#x27;, 0, 0, &#x27;&#x27;, &#x27;&#x27;, &#x27;2016-01-04 11:22:23&#x27;, &#x27;2016-01-04 11:22:23&#x27;, 21);</span><br><span class="line">INSERT INTO `t_restaurant` VALUES (22, &#x27;70s Restaurant&#x27;, &#x27;70后饭吧&#x27;, 31.2398228737211, 121.438096413353, &#x27;1217 Changde Lu, near Changshou Lu&#x27;, &#x27;常德路1217号, 近长寿路&#x27;, &#x27;Putuo&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;021 6040 2808&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;Chinese&#x27;, &#x27;¥¥&#x27;, 0, &#x27;&#x27;, NULL, &#x27;2014-05-04 19:26:28&#x27;, 1, &#x27;restaurant/22/restaurant/160_160/14075670693130533.JPG&#x27;, &#x27;&#x27;, 7, 2, &#x27;&#x27;, &#x27;&#x27;, &#x27;2016-01-04 11:22:23&#x27;, &#x27;2016-01-04 11:22:23&#x27;, 21);</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure for t_seckill_vouchers</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `t_seckill_vouchers`;</span><br><span class="line">CREATE TABLE `t_seckill_vouchers`  (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `fk_voucher_id` int(11) NULL DEFAULT NULL,</span><br><span class="line">  `amount` int(11) NULL DEFAULT NULL,</span><br><span class="line">  `start_time` datetime(0) NULL DEFAULT NULL,</span><br><span class="line">  `end_time` datetime(0) NULL DEFAULT NULL,</span><br><span class="line">  `is_valid` int(11) NULL DEFAULT NULL,</span><br><span class="line">  `create_date` datetime(0) NULL DEFAULT NULL,</span><br><span class="line">  `update_date` datetime(0) NULL DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`) USING BTREE</span><br><span class="line">) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci ROW_FORMAT = DYNAMIC;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of t_seckill_vouchers</span><br><span class="line">-- ----------------------------</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure for t_voucher</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `t_voucher`;</span><br><span class="line">CREATE TABLE `t_voucher`  (</span><br><span class="line">  `id` int(10) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `title` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT &#x27;代金券标题&#x27;,</span><br><span class="line">  `thumbnail` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT &#x27;缩略图&#x27;,</span><br><span class="line">  `amount` int(11) NULL DEFAULT NULL COMMENT &#x27;抵扣金额&#x27;,</span><br><span class="line">  `price` decimal(10, 2) NULL DEFAULT NULL COMMENT &#x27;售价&#x27;,</span><br><span class="line">  `status` int(10) NULL DEFAULT NULL COMMENT &#x27;-1=过期 0=下架 1=上架&#x27;,</span><br><span class="line">  `expire_time` datetime(0) NULL DEFAULT NULL COMMENT &#x27;过期时间&#x27;,</span><br><span class="line">  `redeem_restaurant_id` int(10) NULL DEFAULT NULL COMMENT &#x27;验证餐厅&#x27;,</span><br><span class="line">  `stock` int(11) NULL DEFAULT 0 COMMENT &#x27;库存&#x27;,</span><br><span class="line">  `stock_left` int(11) NULL DEFAULT 0 COMMENT &#x27;剩余数量&#x27;,</span><br><span class="line">  `description` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT &#x27;描述信息&#x27;,</span><br><span class="line">  `clause` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT &#x27;使用条款&#x27;,</span><br><span class="line">  `create_date` datetime(0) NULL DEFAULT NULL,</span><br><span class="line">  `update_date` datetime(0) NULL DEFAULT NULL,</span><br><span class="line">  `is_valid` tinyint(1) NULL DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`) USING BTREE</span><br><span class="line">) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = DYNAMIC;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of t_voucher</span><br><span class="line">-- ----------------------------</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure for t_voucher_order</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `t_voucher_order`;</span><br><span class="line">CREATE TABLE `t_voucher_order`  (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `order_no` int(11) NULL DEFAULT NULL,</span><br><span class="line">  `fk_voucher_id` int(11) NULL DEFAULT NULL,</span><br><span class="line">  `fk_diner_id` int(11) NULL DEFAULT NULL,</span><br><span class="line">  `qrcode` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT &#x27;图片地址&#x27;,</span><br><span class="line">  `payment` tinyint(4) NULL DEFAULT NULL COMMENT &#x27;0=微信支付 1=支付宝支付&#x27;,</span><br><span class="line">  `status` tinyint(1) NULL DEFAULT NULL COMMENT &#x27;订单状态：-1=已取消 0=未支付 1=已支付 2=已消费 3=已过期&#x27;,</span><br><span class="line">  `fk_seckill_id` int(11) NULL DEFAULT NULL COMMENT &#x27;如果是抢购订单时，抢购订单的id&#x27;,</span><br><span class="line">  `order_type` int(11) NULL DEFAULT NULL COMMENT &#x27;订单类型：0=正常订单 1=抢购订单&#x27;,</span><br><span class="line">  `create_date` datetime(0) NULL DEFAULT NULL,</span><br><span class="line">  `update_date` datetime(0) NULL DEFAULT NULL,</span><br><span class="line">  `is_valid` int(11) NULL DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`) USING BTREE</span><br><span class="line">) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_0900_ai_ci ROW_FORMAT = DYNAMIC;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of t_voucher_order</span><br><span class="line">-- ----------------------------</span><br><span class="line"></span><br><span class="line">SET FOREIGN_KEY_CHECKS = 1;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br><br><h2 id="项目架构与微服务搭建"><a href="#项目架构与微服务搭建" class="headerlink" title="项目架构与微服务搭建"></a>项目架构与微服务搭建</h2><ul><li>基于Spring Cloud Hoxton.SR8搭建**</li><li><strong>第一步</strong>：创建Maven的父级工程，添加对应依赖</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 可以集中定义依赖资源的版本信息 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">spring-boot-version</span>&gt;</span>2.3.5.RELEASE<span class="tag">&lt;/<span class="name">spring-boot-version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">spring-cloud-version</span>&gt;</span>Hoxton.SR8<span class="tag">&lt;/<span class="name">spring-cloud-version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">lombok-version</span>&gt;</span>1.18.16<span class="tag">&lt;/<span class="name">lombok-version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">commons-lang-version</span>&gt;</span>3.11<span class="tag">&lt;/<span class="name">commons-lang-version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mybatis-starter-version</span>&gt;</span>2.1.3<span class="tag">&lt;/<span class="name">mybatis-starter-version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mysql-version</span>&gt;</span>8.0.22<span class="tag">&lt;/<span class="name">mysql-version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">swagger-starter-version</span>&gt;</span>2.1.5-RELEASE<span class="tag">&lt;/<span class="name">swagger-starter-version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">hutool-version</span>&gt;</span>5.4.7<span class="tag">&lt;/<span class="name">hutool-version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">guava-version</span>&gt;</span>20.0<span class="tag">&lt;/<span class="name">guava-version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- 集中定义依赖，不引入 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!-- spring boot 依赖 --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-boot-version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!-- spring cloud 依赖 --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring-cloud-version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!-- lombok 依赖 --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;lombok-version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!-- common-lang3 依赖 --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;commons-lang-version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!-- mybatis 依赖 --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis-starter-version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!-- swagger 依赖 --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.battcn<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>swagger-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;swagger-starter-version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!-- mysql 依赖 --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mysql-version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!-- hutool 依赖 --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;hutool-version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="comment">&lt;!-- guava 依赖 --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.guava<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>guava<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;guava-version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!-- 集中定义项目所需插件 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">               <span class="comment">&lt;!-- spring boot maven 项目打包插件 --&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><strong>第二步</strong>：创建基于Eureka的注册中心微服务</li><li><strong>第三步</strong>：配置注册中心(单机版)</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">ms-registry</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置 Eureka Server 注册中心</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8080/eureka/</span></span><br><span class="line"></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">console:</span> <span class="string">&#x27;%d&#123;HH:mm:ss&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n&#x27;</span></span><br></pre></td></tr></table></figure><ul><li><strong>第四步</strong>：启动注册中心并验证</li><li><strong>第五步</strong>：添加网关微服务，并注册到注册中心，启动并测试</li><li><strong>第六步</strong>：添加用户微服务，并注册到注册中心，启动并测试</li></ul><blockquote><p>同理创建其他微服务</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;br&gt;

&lt;h1 id=&quot;课程介绍&quot;&gt;&lt;a href=&quot;#课程介绍&quot; class=&quot;headerlink&quot; title=&quot;课程介绍&quot;&gt;&lt;/a&gt;课程介绍&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Redis是目前使用非常广泛的中间件&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;</summary>
      
    
    
    
    <category term="DataBase" scheme="https://ratears.github.io/dev.ratears.life/categories/DataBase/"/>
    
    <category term="Redis" scheme="https://ratears.github.io/dev.ratears.life/categories/DataBase/Redis/"/>
    
    
    <category term="DataBase" scheme="https://ratears.github.io/dev.ratears.life/tags/DataBase/"/>
    
    <category term="Redis" scheme="https://ratears.github.io/dev.ratears.life/tags/Redis/"/>
    
    <category term="cache" scheme="https://ratears.github.io/dev.ratears.life/tags/cache/"/>
    
  </entry>
  
  <entry>
    <title>JAVA-ACE-架构师系列视频课程-RocketMQ（下）</title>
    <link href="https://ratears.github.io/dev.ratears.life/2023/JAVA-ACE-%E6%9E%B6%E6%9E%84%E5%B8%88%E7%B3%BB%E5%88%97%E8%A7%86%E9%A2%91%E8%AF%BE%E7%A8%8B-RocketMQ%EF%BC%88%E4%B8%8B%EF%BC%89/"/>
    <id>https://ratears.github.io/dev.ratears.life/2023/JAVA-ACE-%E6%9E%B6%E6%9E%84%E5%B8%88%E7%B3%BB%E5%88%97%E8%A7%86%E9%A2%91%E8%AF%BE%E7%A8%8B-RocketMQ%EF%BC%88%E4%B8%8B%EF%BC%89/</id>
    <published>2023-09-28T06:10:12.254Z</published>
    <updated>2023-09-28T06:10:12.254Z</updated>
    
    <content type="html"><![CDATA[<br><h1 id="RocketMQ实战项目介绍与设计"><a href="#RocketMQ实战项目介绍与设计" class="headerlink" title="RocketMQ实战项目介绍与设计"></a>RocketMQ实战项目介绍与设计</h1><h2 id="RocketMQ适合的应用场景介绍"><a href="#RocketMQ适合的应用场景介绍" class="headerlink" title="RocketMQ适合的应用场景介绍"></a>RocketMQ适合的应用场景介绍</h2><ul><li>服务解耦</li><li>异步处理</li><li>并行处理</li><li>最终一致</li></ul><br><br><h2 id="为什么用RocketMQ"><a href="#为什么用RocketMQ" class="headerlink" title="为什么用RocketMQ ?"></a>为什么用RocketMQ ?</h2><ul><li>面向分布式系统的MQ</li><li>无单点的分布式集群化</li><li>数据安全</li><li>海量数据堆积</li><li>毫秒级投递延迟</li></ul><br><br><h2 id="实战项目介绍"><a href="#实战项目介绍" class="headerlink" title="实战项目介绍"></a>实战项目介绍</h2><blockquote><p>我们模拟一个真实项目案例，进行对RocketMQ的学习，假设我们有N多个订阅关系也就是说我们可能存在多个Topic主题，或者简单说我们的MQ服务器需要支持多个系统的消息收发。</p></blockquote><ul><li><p>模拟电商交易系统的几个流程：</p><ul><li>创建订单-&gt;减库存，库存-&gt;订单</li><li>支付成功-&gt;订单、积分、优惠券、物流等等</li></ul></li><li><p>实战项目：模拟一个电商网站的交易系统</p></li><li><p>任务分析：</p><ul><li>需求分析：在我们所熟悉的网上购物平台中，实现交易的几个主要操作动作<ul><li>挑商品(搜索)</li><li>创建订单<ul><li>选择收货地址</li><li>选择支付方式</li><li>选择优惠券</li><li>提交订单</li></ul></li><li>订单付款</li></ul></li><li>流程设计</li><li>模块划分</li><li>数据库设计</li><li>业务问题</li></ul></li></ul><br><br><h2 id="项目设计"><a href="#项目设计" class="headerlink" title="项目设计"></a>项目设计</h2><ul><li>提交订单请求，后台需要做哪些典型的事情?</li></ul><p>提交订单——&gt;校验——&gt;使用优惠劵——&gt;扣库存——&gt;创建交易单</p><img src="https://cdn.statically.io/gh/ratears/images-hosting@picx/picx/image.13raf5am0m68.webp" /><ul><li>支付流程</li></ul><img src="https://cdn.statically.io/gh/ratears/images-hosting@picx/picx/image.1pvnzkcqc37k.webp" /><br><br><h2 id="消息可靠投递"><a href="#消息可靠投递" class="headerlink" title="消息可靠投递"></a>消息可靠投递</h2><ul><li>一段伪代码（存在问题）</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doBusiness</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> service.doSave(model);<span class="comment">//1、如操作数据库失败，抛出异常</span></span><br><span class="line">            <span class="keyword">if</span> (result) &#123;</span><br><span class="line">                sendMessage(model); <span class="comment">//2、如果数据库操作成功，发送消息，如消息发送失败，抛出异常</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            rollback(); <span class="comment">//3、如果发生异常，回滚数据库</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="https://cdn.statically.io/gh/ratears/images-hosting@picx/picx/image.1oagij78bqyo.webp" /><blockquote><p>在1.5 ~ 1.8 步 出现问题的时候，事务无法提交或回滚</p></blockquote><ul><li>可靠设计如下：即使MQ发送消息 ~ 返回消息的过程中出现了问题，业务依然正常运行</li></ul><img src="https://cdn.statically.io/gh/ratears/images-hosting@picx/picx/image.6iy2ordzlow0.webp" /><br><br><h2 id="交易系统模块划分"><a href="#交易系统模块划分" class="headerlink" title="交易系统模块划分"></a>交易系统模块划分</h2><img src="https://cdn.statically.io/gh/ratears/images-hosting@picx/picx/image.a7kzcf6envk.webp" /><br><br><br><h1 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h1><ul><li>略</li></ul><br><br><br><h1 id="RocketMQ与Spring结合"><a href="#RocketMQ与Spring结合" class="headerlink" title="RocketMQ与Spring结合"></a>RocketMQ与Spring结合</h1><br><br><br><h1 id="数据库模型设计"><a href="#数据库模型设计" class="headerlink" title="数据库模型设计"></a>数据库模型设计</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;br&gt;

&lt;h1 id=&quot;RocketMQ实战项目介绍与设计&quot;&gt;&lt;a href=&quot;#RocketMQ实战项目介绍与设计&quot; class=&quot;headerlink&quot; title=&quot;RocketMQ实战项目介绍与设计&quot;&gt;&lt;/a&gt;RocketMQ实战项目介绍与设计&lt;/h1&gt;&lt;h2 id=</summary>
      
    
    
    
    <category term="MQ" scheme="https://ratears.github.io/dev.ratears.life/categories/MQ/"/>
    
    <category term="RocketMQ" scheme="https://ratears.github.io/dev.ratears.life/categories/MQ/RocketMQ/"/>
    
    
    <category term="MQ" scheme="https://ratears.github.io/dev.ratears.life/tags/MQ/"/>
    
    <category term="RocketMQ" scheme="https://ratears.github.io/dev.ratears.life/tags/RocketMQ/"/>
    
  </entry>
  
  <entry>
    <title>JAVA-ACE-架构师系列视频课程-RocketMQ（上）</title>
    <link href="https://ratears.github.io/dev.ratears.life/2023/JAVA-ACE-%E6%9E%B6%E6%9E%84%E5%B8%88%E7%B3%BB%E5%88%97%E8%A7%86%E9%A2%91%E8%AF%BE%E7%A8%8B-RocketMQ%EF%BC%88%E4%B8%8A%EF%BC%89/"/>
    <id>https://ratears.github.io/dev.ratears.life/2023/JAVA-ACE-%E6%9E%B6%E6%9E%84%E5%B8%88%E7%B3%BB%E5%88%97%E8%A7%86%E9%A2%91%E8%AF%BE%E7%A8%8B-RocketMQ%EF%BC%88%E4%B8%8A%EF%BC%89/</id>
    <published>2023-09-28T06:09:43.860Z</published>
    <updated>2023-09-28T06:09:43.860Z</updated>
    
    <content type="html"><![CDATA[<br><h1 id="RocketMQ简介"><a href="#RocketMQ简介" class="headerlink" title="RocketMQ简介"></a>RocketMQ简介</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul><li>RocketMQ是一款分布式、队列模型的消息中间件，由阿里巴巴研发，借鉴参考了JMS规范的MQ实现，更参考了优秀的开源消息中间件Kafka，并且结合阿里实际业务需求，在天猫双十一的场景，实现业务消峰、分布式事务的优秀框架。</li><li><a class="link"   href="https://github.com/apache/rocketmq" >rocketmq github<i class="fas fa-external-link-alt"></i></a></li><li>其底层代码编写清晰优秀，采用NettyNIO框架进行数据通信。</li><li>3.X版本摒弃了Zookeeper，内部使用更轻量级的NameServer进行网络路由，提高服务性能，并且支持消息失败重试机制。</li><li>天然支持集群模型，消费者负载均衡、水平扩展能力，支持广播模式。</li><li>采用零拷贝的原理、顺序写盘、支持亿级消息堆积能力。</li><li>提供丰富的消息机制，如顺序消息、事务消息等(开源版本目前并未支持)。</li></ul><br><br><h2 id="特点-优势"><a href="#特点-优势" class="headerlink" title="特点 &amp; 优势"></a>特点 &amp; 优势</h2><ul><li>能够保证严格的消息顺序</li><li>提供丰富的消息拉取模式</li><li>高效的订阅者水平扩展能力</li><li>实时的消息订阅机制</li><li>亿级消息堆积能力</li><li>Metaq2.x版本之后:改名为RocketMQ</li><li><font color=red>Rocket4.x ( 分布式事务。事务消息 )</font></li></ul><br><br><h2 id="选择理由"><a href="#选择理由" class="headerlink" title="选择理由"></a>选择理由</h2><ul><li>强调集群无单点，可扩展，任意一点高可用，水平可扩展</li><li>海量消息堆积能力，消息堆积后，写入低延迟。</li><li>支持上万个队列</li><li>消息失败重试机制</li><li>消息可查询</li><li>开源社区活跃</li><li>成熟度(经过双十一考验)</li></ul><br><br><h2 id="核心概念-专业术语"><a href="#核心概念-专业术语" class="headerlink" title="核心概念&#x2F;专业术语"></a>核心概念&#x2F;专业术语</h2><ul><li><strong>Producer</strong>：消息生产者，负责产生消息，一般由业务系统负责产生消息。</li><li><strong>Consumer</strong>：消息消费者，负责消费消息，一般是后台系统负责异步消费。</li><li><strong>Push Consumer</strong>：Consumer 的一种，应用通常吐 Consumer 对象注册一个 Listener 接口，一旦收到消息，Consumer 对象立刻回调 Listener 接口方法。</li><li><strong>Pull Consumer</strong>：Consumer 的一种，应用通常主劢调用 Consumer 的拉消息方法从 Broker 拉消息，主劢权由应用控制。</li><li><strong>Producer Group</strong>：一类 Producer 的集合名称，返类 Producer 通常収送一类消息，丏収送逡辑一致。</li><li><strong>Consumer Group</strong>：一类 Consumer 的集合名称，返类 Consumer 通常消费一类消息，且消费逻辑一致。</li><li><strong>Broker</strong>：消息中转角色，负责存储消息，转发消息，一般也称为 Server。在 JMS 规范中称为 Provider。</li><li><strong>广播消费</strong>：<ul><li>一条消息被多个 Consumer 消费，即使这些 Consumer 属于同一个 Consumer Group，消息也会被 Consumer Group 中的每个 Consumer 都消费一次，广播消费中的 Consumer Group 概念可以认为在消息划分方面无意义。</li><li>在 CORBA Notification 规范中，消费方式都属亍广播消费。</li><li>在 JMS 规范中，相当亍 JMS publish&#x2F;subscribe model</li></ul></li><li><strong>集群消费</strong>：<ul><li>一个 Consumer Group 中的 Consumer 实例平均分摊消费消息。例如某个 Topic 有 9 条消息，其中一个Consumer Group 有 3 个实例（可能是 3 个迕程，戒者 3 台机器），那举每个实例只消费其中的 3 条消息。</li><li>在 CORBA Notification 规范中，无此消费方式。</li></ul></li><li><strong>顺序消息</strong>：<ul><li>消费消息的顺序要同发送消息的顺序一致，在 RocketMQ 中，主要指的是局部顺序，即一类消息为满足顺序性，必须 Producer 单线程顺序发送，且发送到同一个队列，这样 Consumer 就可以按照 Producer 发送的顺序去消费消息</li></ul></li><li><strong>普通顺序消息</strong>：<ul><li>顺序消息的一种，正常情况下可以保证完全的顺序消息，但是一旦发生通信异常，Broker 重启，由队列总数发生变化，哈希取模后定位的队列会变化，产生短暂的消息顺序不一致。</li><li>如果业务能容忍在集群异常情况（如某个 Broker 宕机或者重启）下，消息短暂的乱序，使用普通顺序方式比较合适。</li></ul></li><li><strong>严格顺序消息</strong>：<ul><li>顺序消息的一种，无论正常异常情况都能保证顺序，但是牺牲了分布式 Failover 特性，即 Broker 集群中只要有一台机器不可用，则整个集群都不可用，服务可用性大大降低。</li><li>如果服务器部署为同步双写模式，此缺陷可通过备机自动切换为主避免，不过仍然会存在几分钟的服务不可用。（依赖同步双写，主备自动切换，自动切换功能目前还未实现）</li><li>目前已知的应用只有数据库 binlog 同步强依赖严格顺序消息，其他应用绝大部分都可以容忍短暂乱序，推荐使用普通的顺序消息。</li></ul></li><li><strong>Message Queue</strong>：<ul><li>在 RocketMQ 中，所有消息队列都是持久化，长度无限的数据结构，所谓长度无限是指队列中的每个存储单元都是定长，访问其中的存储单元使用 Offset 来访问，offset 为 java long 类型，64 位，理论上在 100年内不会溢出，所以认为是长度无限，另外队列中只保存最近几天的数据，之前的数据会按照过期时间来删除。</li><li>也可以认为 Message Queue 是一个长度无限的数组，offset 就是下标。</li></ul></li></ul><br><br><h2 id="RocketMQ-Overview"><a href="#RocketMQ-Overview" class="headerlink" title="RocketMQ Overview"></a>RocketMQ Overview</h2><h3 id="RocketMQ-是什么？"><a href="#RocketMQ-是什么？" class="headerlink" title="RocketMQ 是什么？"></a>RocketMQ 是什么？</h3><ul><li>是一个队列模型的消息中间件，具有高性能、高可靠、高实时、分布式特点。</li><li>Producer、Consumer、队列都可以分布式。</li><li>Producer 吐一些队列轮流収送消息，队列集合称为 Topic，Consumer 如果做广播消费，则一个 consumer实例消费返个 Topic 对应的所有队列，如果做集群消费，则多个 Consumer 实例平均消费返个 topic 对应的队列集合。</li><li>能够保证严格的消息顺序</li><li>提供丰富的消息拉取模式</li><li>高效的订阅者水平扩展能力</li><li>实时的消息订阅机制</li><li>亿级消息堆积能力</li><li>较少的依赖</li></ul><br><h3 id="RocketMQ-物理部署结构"><a href="#RocketMQ-物理部署结构" class="headerlink" title="RocketMQ 物理部署结构"></a>RocketMQ 物理部署结构</h3><ul><li>RocketMQ 网络部署图</li></ul><img src="https://cdn.statically.io/gh/ratears/images-hosting@picx/picx/image.3u9v4axb4ie0.webp" width="100%"><ul><li>Name Server 是一个几乎无状态节点，可集群部署，节点之间无任何信息同步。</li><li>Broker 部署相对复杂，Broker 分为 Master 与 Slave，一个 Master 可以对应多个 Slave，但是一个 Slave 只能对应一个Master，Master与 Slave的对应关系通过指定相同的BrokerName，不同的BrokerId来定指定，BrokerId为 0 表示 Master，非 0 表示 Slave。Master 也可以部署多个。每个 Broker 与 Name Server 集群中的所有节点建立长连接，定时注册 Topic 信息到所有 Name Server。</li><li>Producer 与 Name Server 集群中的其中一个节点（随机选择）建立长连接，定期从 Name Server 取 Topic 路 由信息，并向提供 Topic 服务的 Master 建立长连接，且定时向 Master 发送心跳。Producer 完全无状态，可 集群部署。</li><li>Consumer 与Name Server 集群中的其中一个节点（随机选择）建立长连接，定期从 Name Server 取 Topic 路 由信息，并向提供 Topic 服务的 Master、Slave 建立长连接，且定时向 Master、Slave 发送心跳。Consumer 既可以从 Master 订阅消息，也可以从 Slave 订阅消息，订阅规则由 Broker 配置决定。</li></ul><br><h3 id="RocketMQ-逻辑部署结构"><a href="#RocketMQ-逻辑部署结构" class="headerlink" title="RocketMQ 逻辑部署结构"></a><strong>RocketMQ</strong> <strong>逻辑部署结构</strong></h3><ul><li>RocketMQ 逻辑部署结构图</li></ul><img src= "https://cdn.statically.io/gh/ratears/images-hosting@picx/picx/image.574x9bxe6n40.webp" width="100%" /><ul><li>Producer Group<ul><li>用来表示一个发送消息应用，一个 Producer Group 下包含多个 Producer 实例，可以是多台机器，也可以 是一台机器的多个进程，或者一个进程的多个 Producer 对象。一个 Producer Group 可以发送多个 Topic 消息，Producer Group 作用如下：<ul><li>标识一类 Producer </li><li>可以通过运维工具查询返个収送消息应用下有多个 Producer 实例 </li><li>収送分布式事务消息时，如果 Producer 中途意外宕机，Broker 会主劢回调 Producer Group 内的任意 一台机器来确认事务状态。</li></ul></li></ul></li><li>Consumer Group <ul><li>用来表示一个消费消息应用，一个 Consumer Group 下包含多个 Consumer 实例，可以是多台机器，也可 以是多个迕程，或者是一个进程的多个 Consumer 对象。一个 Consumer Group 下的多个 Consumer 以均摊 方式消费消息，如果设置为广播方式，那么这个 Consumer Group 下的每个实例都消费全量数据。</li></ul></li></ul><br><br><br><h1 id="集群环境"><a href="#集群环境" class="headerlink" title="集群环境"></a>集群环境</h1><h2 id="集群环境介绍"><a href="#集群环境介绍" class="headerlink" title="集群环境介绍"></a>集群环境介绍</h2><ul><li>RocketMO就是为了分布式而产生的，当然天然支持集群</li><li>RocketMO的集群模型：<ul><li>单机模式(M)</li><li>Master-Slave模式(M-S)</li><li>双Master模式 ( 2M)</li><li>双主双从模式(2M-2S)</li><li>多主多从模式(NM-NS)</li></ul></li></ul><br><br><h2 id="RocketMQ-部署【双Master-方式】"><a href="#RocketMQ-部署【双Master-方式】" class="headerlink" title="RocketMQ 部署【双Master 方式】"></a>RocketMQ 部署【双Master 方式】</h2><h3 id="服务器环境"><a href="#服务器环境" class="headerlink" title="服务器环境"></a>服务器环境</h3><table><thead><tr><th align="center">序号</th><th align="center">IP</th><th align="center">用户名</th><th align="center">角色</th><th align="center">模式</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">192.168.61.221</td><td align="center">root</td><td align="center">nameServer1,brokerServer1</td><td align="center">Master1</td></tr><tr><td align="center">2</td><td align="center">192.168.61.222</td><td align="center">root</td><td align="center">nameServer2,brokerServer2</td><td align="center">Master2</td></tr></tbody></table><br><h3 id="Hosts-添加信息【两台机器】"><a href="#Hosts-添加信息【两台机器】" class="headerlink" title="Hosts 添加信息【两台机器】"></a>Hosts 添加信息【两台机器】</h3><blockquote><p>注意：两台机器需要在9876端口互通，需要开通相关网络策略</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hosts</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">192.168.61.221  rocketmq-nameserver1</span><br><span class="line">192.168.61.221  rocketmq-master1</span><br><span class="line">192.168.61.222  rocketmq-nameserver2</span><br><span class="line">192.168.61.222  rocketmq-master2</span><br></pre></td></tr></table></figure><br><h3 id="上传解压【两台机器】"><a href="#上传解压【两台机器】" class="headerlink" title="上传解压【两台机器】"></a>上传解压【两台机器】</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash"> 上传 alibaba-rocketmq-3.2.6.tar.gz 文件至/usr/local/src/</span></span><br><span class="line"></span><br><span class="line">cd /usr/local/src/</span><br><span class="line"></span><br><span class="line">tar -zxvf alibaba-rocketmq-3.2.6.tar.gz -C /usr/local/</span><br><span class="line"></span><br><span class="line">cd /usr/local/</span><br><span class="line"></span><br><span class="line">mv alibaba-rocketmq alibaba-rocketmq-3.2.6</span><br><span class="line"></span><br><span class="line">ln -s alibaba-rocketmq-3.2.6 rocketmq</span><br></pre></td></tr></table></figure><br><h3 id="创建存储路径【两台机器】"><a href="#创建存储路径【两台机器】" class="headerlink" title="创建存储路径【两台机器】"></a>创建存储路径【两台机器】</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /usr/local/rocketmq/store</span><br><span class="line">mkdir /usr/local/rocketmq/store/commitlog</span><br><span class="line">mkdir /usr/local/rocketmq/store/consumequeue</span><br><span class="line">mkdir /usr/local/rocketmq/store/index</span><br></pre></td></tr></table></figure><br><h3 id="修改RocketMQ-配置文件【两台机器】"><a href="#修改RocketMQ-配置文件【两台机器】" class="headerlink" title="修改RocketMQ  配置文件【两台机器】"></a>修改RocketMQ  配置文件【两台机器】</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/rocketmq/conf/2m-noslave/broker-a.properties</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">brokerClusterName=rocketmq-cluster</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">broker 名字，注意此处不同的配置文件填写的不一样</span></span><br><span class="line">brokerName=broker-a</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">0 表示 Master，&gt;0 表示 Slave</span></span><br><span class="line">brokerId=0</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">nameServer 地址，分号分割</span></span><br><span class="line">namesrvAddr=rocketmq-nameserver1:9876;rocketmq-nameserver2:9876</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在发送消息时，自动创建服务器不存在的 topic，默认创建的队列数</span></span><br><span class="line">defaultTopicQueueNums=4</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">是否允许 Broker 自动创建 Topic，建议线下开启，线上关闭</span></span><br><span class="line">autoCreateTopicEnable=true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">是否允许 Broker 自动创建订阅组，建议线下开启，线上关闭</span></span><br><span class="line">autoCreateSubscriptionGroup=true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Broker 对外服务的监听端口</span></span><br><span class="line">listenPort=10911</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除文件时间点，默认凌晨 4 点</span></span><br><span class="line">deleteWhen=04</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">文件保留时间，默认 48 小时</span></span><br><span class="line">fileReservedTime=120</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">commitLog 每个文件的大小默认 1G</span></span><br><span class="line">mapedFileSizeCommitLog=1073741824</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ConsumeQueue 每个文件默认存 30W 条，根据业务情况调整</span></span><br><span class="line">mapedFileSizeConsumeQueue=300000</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">destroyMapedFileIntervalForcibly=120000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">redeleteHangedFileInterval=120000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">检测物理文件磁盘空间</span></span><br><span class="line">diskMaxUsedSpaceRatio=88</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">存储路径</span></span><br><span class="line">storePathRootDir=/usr/local/rocketmq/store</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">commitLog 存储路径</span></span><br><span class="line">storePathCommitLog=/usr/local/rocketmq/store/commitlog</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">消费队列存储路径存储路径</span></span><br><span class="line">storePathConsumeQueue=/usr/local/rocketmq/store/consumequeue</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">消息索引存储路径</span></span><br><span class="line">storePathIndex=/usr/local/rocketmq/store/index</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">checkpoint 文件存储路径</span></span><br><span class="line">storeCheckpoint=/usr/local/rocketmq/store/checkpoint</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">abort 文件存储路径</span></span><br><span class="line">abortFile=/usr/local/rocketmq/store/abort</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">限制的消息大小</span></span><br><span class="line">maxMessageSize=65536</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushCommitLogLeastPages=4</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushConsumeQueueLeastPages=2</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushCommitLogThoroughInterval=10000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushConsumeQueueThoroughInterval=60000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Broker 的角色</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- ASYNC_MASTER 异步复制 Master</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SYNC_MASTER 同步双写 Master</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SLAVE</span></span><br><span class="line">brokerRole=ASYNC_MASTER</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">刷盘方式</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- ASYNC_FLUSH 异步刷盘</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SYNC_FLUSH 同步刷盘</span></span><br><span class="line">flushDiskType=ASYNC_FLUSH</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">checkTransactionMessageEnable=<span class="literal">false</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">发消息线程池数量</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">sendMessageThreadPoolNums=128</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">拉消息线程池数量</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">pullMessageThreadPoolNums=128</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/rocketmq/conf/2m-noslave/broker-b.properties</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">brokerClusterName=rocketmq-cluster</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">broker 名字，注意此处不同的配置文件填写的不一样</span></span><br><span class="line">brokerName=broker-b</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">0 表示 Master，&gt;0 表示 Slave</span></span><br><span class="line">brokerId=0</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">nameServer 地址，分号分割</span></span><br><span class="line">namesrvAddr=rocketmq-nameserver1:9876;rocketmq-nameserver2:9876</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在发送消息时，自动创建服务器不存在的 topic，默认创建的队列数</span></span><br><span class="line">defaultTopicQueueNums=4</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">是否允许 Broker 自动创建 Topic，建议线下开启，线上关闭</span></span><br><span class="line">autoCreateTopicEnable=true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">是否允许 Broker 自动创建订阅组，建议线下开启，线上关闭</span></span><br><span class="line">autoCreateSubscriptionGroup=true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Broker 对外服务的监听端口</span></span><br><span class="line">listenPort=10911</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除文件时间点，默认凌晨 4 点</span></span><br><span class="line">deleteWhen=04</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">文件保留时间，默认 48 小时</span></span><br><span class="line">fileReservedTime=120</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">commitLog 每个文件的大小默认 1G</span></span><br><span class="line">mapedFileSizeCommitLog=1073741824</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ConsumeQueue 每个文件默认存 30W 条，根据业务情况调整</span></span><br><span class="line">mapedFileSizeConsumeQueue=300000</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">destroyMapedFileIntervalForcibly=120000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">redeleteHangedFileInterval=120000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">检测物理文件磁盘空间</span></span><br><span class="line">diskMaxUsedSpaceRatio=88</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">存储路径</span></span><br><span class="line">storePathRootDir=/usr/local/rocketmq/store</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">commitLog 存储路径</span></span><br><span class="line">storePathCommitLog=/usr/local/rocketmq/store/commitlog</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">消费队列存储路径存储路径</span></span><br><span class="line">storePathConsumeQueue=/usr/local/rocketmq/store/consumequeue</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">消息索引存储路径</span></span><br><span class="line">storePathIndex=/usr/local/rocketmq/store/index</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">checkpoint 文件存储路径</span></span><br><span class="line">storeCheckpoint=/usr/local/rocketmq/store/checkpoint</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">abort 文件存储路径</span></span><br><span class="line">abortFile=/usr/local/rocketmq/store/abort</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">限制的消息大小</span></span><br><span class="line">maxMessageSize=65536</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushCommitLogLeastPages=4</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushConsumeQueueLeastPages=2</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushCommitLogThoroughInterval=10000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushConsumeQueueThoroughInterval=60000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Broker 的角色</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- ASYNC_MASTER 异步复制 Master</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SYNC_MASTER 同步双写 Master</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SLAVE</span></span><br><span class="line">brokerRole=ASYNC_MASTER</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">刷盘方式</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- ASYNC_FLUSH 异步刷盘</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SYNC_FLUSH 同步刷盘</span></span><br><span class="line">flushDiskType=ASYNC_FLUSH</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">checkTransactionMessageEnable=<span class="literal">false</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">发消息线程池数量</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">sendMessageThreadPoolNums=128</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">拉消息线程池数量</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">pullMessageThreadPoolNums=128</span></span><br></pre></td></tr></table></figure><br><h3 id="修改日志配置文件【两台机器】"><a href="#修改日志配置文件【两台机器】" class="headerlink" title="修改日志配置文件【两台机器】"></a>修改日志配置文件【两台机器】</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /usr/local/rocketmq/logs</span><br><span class="line"></span><br><span class="line">cd /usr/local/rocketmq/conf &amp;&amp; sed -i &#x27;s#$&#123;user.home&#125;#/usr/local/rocketmq#g&#x27; *.xml</span><br></pre></td></tr></table></figure><br><h3 id="修改启动脚本参数【两台机器】"><a href="#修改启动脚本参数【两台机器】" class="headerlink" title="修改启动脚本参数【两台机器】"></a>修改启动脚本参数【两台机器】</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/rocketmq/bin/runbroker.sh</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">==============================================================================</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开发环境 JVM Configuration</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">==============================================================================</span></span><br><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125;  -server  -Xms1g  -Xmx1g  -Xmn512m  -XX:PermSize=128m  -</span><br><span class="line">XX:MaxPermSize=320m&quot;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/rocketmq/bin/runserver.sh</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JAVA_OPT=&quot;$&#123;JAVA_OPT&#125;  -server  -Xms1g  -Xmx1g  -Xmn512m  -XX:PermSize=128m  -</span><br><span class="line">XX:MaxPermSize=320m&quot;</span><br></pre></td></tr></table></figure><br><h3 id="启动-NameServer-【两台机器】"><a href="#启动-NameServer-【两台机器】" class="headerlink" title="启动 NameServer 【两台机器】"></a>启动 NameServer 【两台机器】</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/rocketmq/bin</span><br><span class="line"></span><br><span class="line">nohup sh mqnamesrv &amp;</span><br><span class="line"></span><br><span class="line">jsp</span><br></pre></td></tr></table></figure><br><h3 id="启动-BrokerServerA-【192-168-61-221】"><a href="#启动-BrokerServerA-【192-168-61-221】" class="headerlink" title="启动 BrokerServerA 【192.168.61.221】"></a>启动 BrokerServerA 【192.168.61.221】</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/rocketmq/bin</span><br><span class="line">nohup sh mqbroker -c /usr/local/rocketmq/conf/2m-noslave/broker-a.properties &gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line"></span><br><span class="line">netstat -ntlp</span><br><span class="line">jps</span><br><span class="line">tail -f -n 500 /usr/local/rocketmq/logs/rocketmqlogs/broker.log</span><br><span class="line">tail -f -n 500 /usr/local/rocketmq/logs/rocketmqlogs/namesrv.log</span><br></pre></td></tr></table></figure><br><h3 id="启动-BrokerServer2-【192-168-61-222】"><a href="#启动-BrokerServer2-【192-168-61-222】" class="headerlink" title="启动 BrokerServer2 【192.168.61.222】"></a>启动 BrokerServer2 【192.168.61.222】</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/rocketmq/bin</span><br><span class="line">nohup sh mqbroker -c /usr/local/rocketmq/conf/2m-noslave/broker-b.properties &gt;/dev/null 2&gt;&amp;1 &amp;</span><br><span class="line"></span><br><span class="line">netstat -ntlp</span><br><span class="line">jps</span><br><span class="line">tail -f -n 500 /usr/local/rocketmq/logs/rocketmqlogs/broker.log</span><br><span class="line">tail -f -n 500 /usr/local/rocketmq/logs/rocketmqlogs/namesrv.log</span><br></pre></td></tr></table></figure><br><br><h2 id="RocketMQ-监控台"><a href="#RocketMQ-监控台" class="headerlink" title="RocketMQ 监控台"></a>RocketMQ 监控台</h2><ul><li>我们使用RocketMQ自带的web项目监控集群消费信息。rocketmg-console-3.26war把这个部署到tomcat上即可</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/src/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">上传 apache-tomcat-8.5.93.tar.gz 到 /usr/local/src/ 目录下</span></span><br><span class="line"></span><br><span class="line">tar -zxvf  apache-tomcat-8.5.93.tar.gz -C /usr/local/</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">上传 rocketmq-console.war 到 /usr/local/apache-tomcat-8.5.93/webapps/ 目录下</span></span><br><span class="line"></span><br><span class="line">cd /usr/local/apache-tomcat-8.5.93/webapps/</span><br><span class="line"></span><br><span class="line">unzip rocketmq-console.war -d rocketmq-console</span><br><span class="line"></span><br><span class="line">rm -rf rocketmq-console.war</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /usr/local/apache-tomcat-8.5.93/webapps/rocketmq-console/WEB-INF/classes/config.properties</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rocketmq.namesrv.addr=rocketmq-nameserver1:9876;rocketmq-nameserver2:9876</span><br><span class="line">throwDone=true</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/apache-tomcat-8.5.93/bin/startup.sh</span><br></pre></td></tr></table></figure><ul><li><a class="link"   href="http://192.168.61.222:8080/rocketmq-console" >http://192.168.61.222:8080/rocketmq-console<i class="fas fa-external-link-alt"></i></a></li></ul><img src="https://cdn.statically.io/gh/ratears/images-hosting@picx/picx/image.1tes78fvpnvk.webp" /><br><br><h2 id="Broker配置文件详解"><a href="#Broker配置文件详解" class="headerlink" title="Broker配置文件详解"></a>Broker配置文件详解</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">brokerClusterName=rocketmq-cluster</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">broker 名字，注意此处不同的配置文件填写的不一样</span></span><br><span class="line">brokerName=broker-a</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">0 表示 Master，&gt;0 表示 Slave</span></span><br><span class="line">brokerId=0</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">nameServer 地址，分号分割</span></span><br><span class="line">namesrvAddr=rocketmq-nameserver1:9876;rocketmq-nameserver2:9876</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在发送消息时，自动创建服务器不存在的 topic，默认创建的队列数</span></span><br><span class="line">defaultTopicQueueNums=4</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">是否允许 Broker 自动创建 Topic，建议线下开启，线上关闭</span></span><br><span class="line">autoCreateTopicEnable=true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">是否允许 Broker 自动创建订阅组，建议线下开启，线上关闭</span></span><br><span class="line">autoCreateSubscriptionGroup=true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Broker 对外服务的监听端口</span></span><br><span class="line">listenPort=10911</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">删除文件时间点，默认凌晨 4 点</span></span><br><span class="line">deleteWhen=04</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">文件保留时间，默认 48 小时</span></span><br><span class="line">fileReservedTime=120</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">commitLog 每个文件的大小默认 1G</span></span><br><span class="line">mapedFileSizeCommitLog=1073741824</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ConsumeQueue 每个文件默认存 30W 条，根据业务情况调整</span></span><br><span class="line">mapedFileSizeConsumeQueue=300000</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">destroyMapedFileIntervalForcibly=120000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">redeleteHangedFileInterval=120000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">检测物理文件磁盘空间</span></span><br><span class="line">diskMaxUsedSpaceRatio=88</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">存储路径</span></span><br><span class="line">storePathRootDir=/usr/local/rocketmq/store</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">commitLog 存储路径</span></span><br><span class="line">storePathCommitLog=/usr/local/rocketmq/store/commitlog</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">消费队列存储路径存储路径</span></span><br><span class="line">storePathConsumeQueue=/usr/local/rocketmq/store/consumequeue</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">消息索引存储路径</span></span><br><span class="line">storePathIndex=/usr/local/rocketmq/store/index</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">checkpoint 文件存储路径</span></span><br><span class="line">storeCheckpoint=/usr/local/rocketmq/store/checkpoint</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">abort 文件存储路径</span></span><br><span class="line">abortFile=/usr/local/rocketmq/store/abort</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">限制的消息大小</span></span><br><span class="line">maxMessageSize=65536</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushCommitLogLeastPages=4</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushConsumeQueueLeastPages=2</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushCommitLogThoroughInterval=10000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flushConsumeQueueThoroughInterval=60000</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Broker 的角色</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- ASYNC_MASTER 异步复制 Master</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SYNC_MASTER 同步双写 Master</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SLAVE</span></span><br><span class="line">brokerRole=ASYNC_MASTER</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">刷盘方式</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- ASYNC_FLUSH 异步刷盘</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">- SYNC_FLUSH 同步刷盘</span></span><br><span class="line">flushDiskType=ASYNC_FLUSH</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">checkTransactionMessageEnable=<span class="literal">false</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">发消息线程池数量</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">sendMessageThreadPoolNums=128</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">拉消息线程池数量</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">pullMessageThreadPoolNums=128</span></span><br></pre></td></tr></table></figure><br><br><br><h1 id="RocketMQ-Java-API-helloword"><a href="#RocketMQ-Java-API-helloword" class="headerlink" title="RocketMQ Java API helloword"></a>RocketMQ Java API helloword</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Copyright (C) 2010-2013 Alibaba Group Holding Limited</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></span><br><span class="line"><span class="comment"> * you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment"> * You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *     http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><br><span class="line"><span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"> * See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"> * limitations under the License.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> com.alibaba.rocketmq.example.simple;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.rocketmq.client.exception.MQClientException;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.rocketmq.client.producer.DefaultMQProducer;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.rocketmq.client.producer.SendResult;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.rocketmq.common.message.Message;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Producer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> MQClientException, InterruptedException &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 一个应用创建一个Producer，由应用来维护此对象，可以设置为全局对象或者单例&lt;br&gt;</span></span><br><span class="line"><span class="comment">         * 注意：ProducerGroupName需要由应用来保证唯一&lt;br&gt;</span></span><br><span class="line"><span class="comment">         * ProducerGroup这个概念发送普通的消息时，作用不大，但是发送分布式事务消息时，比较关键，</span></span><br><span class="line"><span class="comment">         * 因为服务器会回查这个Group下的任意一个Producer</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">DefaultMQProducer</span> <span class="variable">producer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultMQProducer</span>(<span class="string">&quot;ProducerGroupName&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Producer对象在使用之前必须要调用start初始化，初始化一次即可&lt;br&gt;</span></span><br><span class="line"><span class="comment">         * 注意：切记不可以在每次发送消息时，都调用start方法</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        producer.start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 下面这段代码表明一个Producer对象可以发送多个topic，多个tag的消息。</span></span><br><span class="line"><span class="comment">         * 注意：send方法是同步调用，只要不抛异常就标识成功。但是发送成功也可会有多种状态，&lt;br&gt;</span></span><br><span class="line"><span class="comment">         * 例如消息写入Master成功，但是Slave不成功，这种情况消息属于成功，但是对于个别应用如果对消息可靠性要求极高，&lt;br&gt;</span></span><br><span class="line"><span class="comment">         * 需要对这种情况做处理。另外，消息可能会存在发送失败的情况，失败重试由应用来处理。</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">1</span>; i++)</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="type">Message</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Message</span>(<span class="string">&quot;TopicTest1&quot;</span>,<span class="comment">// topic</span></span><br><span class="line">                        <span class="string">&quot;TagA&quot;</span>,<span class="comment">// tag</span></span><br><span class="line">                        <span class="string">&quot;OrderID188&quot;</span>,<span class="comment">// key</span></span><br><span class="line">                        (<span class="string">&quot;Hello MetaQ&quot;</span>).getBytes());<span class="comment">// body</span></span><br><span class="line">                    <span class="type">SendResult</span> <span class="variable">sendResult</span> <span class="operator">=</span> producer.send(msg);</span><br><span class="line">                    System.out.println(sendResult);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 应用退出时，要调用shutdown来清理资源，关闭网络连接，从MetaQ服务器上注销自己</span></span><br><span class="line"><span class="comment">         * 注意：我们建议应用在JBOSS、Tomcat等容器的退出钩子里调用shutdown方法</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        producer.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Copyright (C) 2010-2013 Alibaba Group Holding Limited</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></span><br><span class="line"><span class="comment"> * you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment"> * You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *     http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><br><span class="line"><span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"> * See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"> * limitations under the License.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">package</span> com.alibaba.rocketmq.example.simple;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.rocketmq.client.consumer.DefaultMQPushConsumer;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.rocketmq.client.consumer.listener.ConsumeConcurrentlyContext;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.rocketmq.client.consumer.listener.ConsumeConcurrentlyStatus;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.rocketmq.client.consumer.listener.MessageListenerConcurrently;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.rocketmq.client.exception.MQClientException;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.rocketmq.common.consumer.ConsumeFromWhere;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.rocketmq.common.message.MessageExt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PushConsumer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 当前例子是PushConsumer用法，使用方式给用户感觉是消息从RocketMQ服务器推到了应用客户端。&lt;br&gt;</span></span><br><span class="line"><span class="comment">     * 但是实际PushConsumer内部是使用长轮询Pull方式从Broker拉消息，然后再回调用户Listener方法&lt;br&gt;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException, MQClientException &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 一个应用创建一个Consumer，由应用来维护此对象，可以设置为全局对象或者单例&lt;br&gt;</span></span><br><span class="line"><span class="comment">         * 注意：ConsumerGroupName需要由应用来保证唯一</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">DefaultMQPushConsumer</span> <span class="variable">consumer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultMQPushConsumer</span>(<span class="string">&quot;CID_001&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 订阅指定topic下tags分别等于TagA或TagC或TagD</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        consumer.subscribe(<span class="string">&quot;TopicTest1&quot;</span>, <span class="string">&quot;TagA || TagC || TagD&quot;</span>);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 订阅指定topic下所有消息&lt;br&gt;</span></span><br><span class="line"><span class="comment">         * 注意：一个consumer对象可以订阅多个topic</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        consumer.subscribe(<span class="string">&quot;TopicTest2&quot;</span>, <span class="string">&quot;*&quot;</span>);</span><br><span class="line">        consumer.subscribe(<span class="string">&quot;TopicTest3&quot;</span>, <span class="string">&quot;*&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 设置Consumer第一次启动是从队列头部开始消费还是队列尾部开始消费&lt;br&gt;</span></span><br><span class="line"><span class="comment">         * 如果非第一次启动，那么按照上次消费的位置继续消费</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET);</span><br><span class="line"></span><br><span class="line">        consumer.registerMessageListener(<span class="keyword">new</span> <span class="title class_">MessageListenerConcurrently</span>() &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * 默认msgs里只有一条消息，可以通过设置consumeMessageBatchMaxSize参数来批量接收消息</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> ConsumeConcurrentlyStatus <span class="title function_">consumeMessage</span><span class="params">(List&lt;MessageExt&gt; msgs,</span></span><br><span class="line"><span class="params">                    ConsumeConcurrentlyContext context)</span> &#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot; Receive New Messages: &quot;</span> + msgs);</span><br><span class="line"></span><br><span class="line">                <span class="type">MessageExt</span> <span class="variable">msg</span> <span class="operator">=</span> msgs.get(<span class="number">0</span>);</span><br><span class="line">                <span class="keyword">if</span> (msg.getTopic().equals(<span class="string">&quot;TopicTest1&quot;</span>)) &#123;</span><br><span class="line">                    <span class="comment">// 执行TopicTest1的消费逻辑</span></span><br><span class="line">                    <span class="keyword">if</span> (msg.getTags() != <span class="literal">null</span> &amp;&amp; msg.getTags().equals(<span class="string">&quot;TagA&quot;</span>)) &#123;</span><br><span class="line">                        <span class="comment">// 执行TagA的消费</span></span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (msg.getTags() != <span class="literal">null</span> &amp;&amp; msg.getTags().equals(<span class="string">&quot;TagC&quot;</span>)) &#123;</span><br><span class="line">                        <span class="comment">// 执行TagC的消费</span></span><br><span class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (msg.getTags() != <span class="literal">null</span> &amp;&amp; msg.getTags().equals(<span class="string">&quot;TagD&quot;</span>)) &#123;</span><br><span class="line">                        <span class="comment">// 执行TagD的消费</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (msg.getTopic().equals(<span class="string">&quot;TopicTest2&quot;</span>)) &#123;</span><br><span class="line">                    <span class="comment">// 执行TopicTest2的消费逻辑</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Consumer对象在使用之前必须要调用start初始化，初始化一次即可&lt;br&gt;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        consumer.start();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;Consumer Started.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;br&gt;

&lt;h1 id=&quot;RocketMQ简介&quot;&gt;&lt;a href=&quot;#RocketMQ简介&quot; class=&quot;headerlink&quot; title=&quot;RocketMQ简介&quot;&gt;&lt;/a&gt;RocketMQ简介&lt;/h1&gt;&lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;he</summary>
      
    
    
    
    <category term="MQ" scheme="https://ratears.github.io/dev.ratears.life/categories/MQ/"/>
    
    <category term="RocketMQ" scheme="https://ratears.github.io/dev.ratears.life/categories/MQ/RocketMQ/"/>
    
    
    <category term="MQ" scheme="https://ratears.github.io/dev.ratears.life/tags/MQ/"/>
    
    <category term="RocketMQ" scheme="https://ratears.github.io/dev.ratears.life/tags/RocketMQ/"/>
    
  </entry>
  
  <entry>
    <title>Hexo常用命令与核心配置</title>
    <link href="https://ratears.github.io/dev.ratears.life/2023/Hexo%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%B8%8E%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE/"/>
    <id>https://ratears.github.io/dev.ratears.life/2023/Hexo%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%B8%8E%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE/</id>
    <published>2023-09-24T22:38:55.000Z</published>
    <updated>2023-09-24T22:38:55.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Hexo常用命令"><a href="#Hexo常用命令" class="headerlink" title="Hexo常用命令"></a>Hexo常用命令</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 本地部署hexo并指定端口</span><br><span class="line">hexo -s [port]</span><br><span class="line"></span><br><span class="line"># 清理生成部署</span><br><span class="line">hexo clean &amp;&amp; hexo g -d</span><br></pre></td></tr></table></figure><h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><p><a class="link"   href="https://easyhexo.com/" >Easy Hexo<i class="fas fa-external-link-alt"></i></a></p><br><br><br><h1 id="学习备注"><a href="#学习备注" class="headerlink" title="学习备注"></a>学习备注</h1><blockquote><p>1</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">red</span>&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line"><span class="symbol">&amp;emsp;</span><span class="symbol">&amp;emsp;</span></span><br></pre></td></tr></table></figure><img src="" width="70%"><br>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Hexo常用命令&quot;&gt;&lt;a href=&quot;#Hexo常用命令&quot; class=&quot;headerlink&quot; title=&quot;Hexo常用命令&quot;&gt;&lt;/a&gt;Hexo常用命令&lt;/h1&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;t</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://ratears.github.io/dev.ratears.life/2023/hello-world/"/>
    <id>https://ratears.github.io/dev.ratears.life/2023/hello-world/</id>
    <published>2023-09-24T19:25:44.023Z</published>
    <updated>2023-09-24T19:25:44.023Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a class="link"   href="https://hexo.io/" >Hexo<i class="fas fa-external-link-alt"></i></a>! This is your very first post. Check <a class="link"   href="https://hexo.io/docs/" >documentation<i class="fas fa-external-link-alt"></i></a> for more info. If you get any problems when using Hexo, you can find the answer in <a class="link"   href="https://hexo.io/docs/troubleshooting.html" >troubleshooting<i class="fas fa-external-link-alt"></i></a> or you can ask me on <a class="link"   href="https://github.com/hexojs/hexo/issues" >GitHub<i class="fas fa-external-link-alt"></i></a>.</p><span id="more"></span><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a class="link"   href="https://hexo.io/docs/writing.html" >Writing<i class="fas fa-external-link-alt"></i></a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a class="link"   href="https://hexo.io/docs/server.html" >Server<i class="fas fa-external-link-alt"></i></a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a class="link"   href="https://hexo.io/docs/generating.html" >Generating<i class="fas fa-external-link-alt"></i></a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a class="link"   href="https://hexo.io/docs/one-command-deployment.html" >Deployment<i class="fas fa-external-link-alt"></i></a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Welcome to &lt;a class=&quot;link&quot;   href=&quot;https://hexo.io/&quot; &gt;Hexo&lt;i class=&quot;fas fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;! This is your very first post. Check &lt;a class=&quot;link&quot;   href=&quot;https://hexo.io/docs/&quot; &gt;documentation&lt;i class=&quot;fas fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a class=&quot;link&quot;   href=&quot;https://hexo.io/docs/troubleshooting.html&quot; &gt;troubleshooting&lt;i class=&quot;fas fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt; or you can ask me on &lt;a class=&quot;link&quot;   href=&quot;https://github.com/hexojs/hexo/issues&quot; &gt;GitHub&lt;i class=&quot;fas fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;.&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
</feed>
